<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 24 Date and Time calculations | R for Audit Analytics</title>
<meta name="author" content="Anil Goyal">
<meta name="description" content="24.1 Base R classes to deal with date and time variables There may hardly be any data analytics activity, wherein we do not have to deal with temporal information and thus need to manipulate dates...">
<meta name="generator" content="bookdown 0.40 with bs4_book()">
<meta property="og:title" content="Chapter 24 Date and Time calculations | R for Audit Analytics">
<meta property="og:type" content="book">
<meta property="og:url" content="https://anilyayavar.github.io/new-book/lubridate.html">
<meta property="og:image" content="https://anilyayavar.github.io/new-book/images/cover.jpg">
<meta property="og:description" content="24.1 Base R classes to deal with date and time variables There may hardly be any data analytics activity, wherein we do not have to deal with temporal information and thus need to manipulate dates...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 24 Date and Time calculations | R for Audit Analytics">
<meta name="twitter:description" content="24.1 Base R classes to deal with date and time variables There may hardly be any data analytics activity, wherein we do not have to deal with temporal information and thus need to manipulate dates...">
<meta name="twitter:image" content="https://anilyayavar.github.io/new-book/images/cover.jpg">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.8.0/transition.js"></script><script src="libs/bs3compat-0.8.0/tabs.js"></script><script src="libs/bs3compat-0.8.0/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/kePrint-0.0.1/kePrint.js"></script><link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<style type="text/css">
    /* Used with Pandoc 2.11+ new --citeproc when CSL is used */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
          margin-bottom: 0em;
        }
    .hanging div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }
  </style>
<link rel="stylesheet" href="style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">R for Audit Analytics</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Welcome to R for Audit Analytics</a></li>
<li><a class="" href="preface.html">Preface</a></li>
<li><a class="" href="about-author.html">About author</a></li>
<li><a class="" href="gearing-up.html">Gearing up</a></li>
<li><a class="" href="part-i-basic-r-programming-concepts.html">Part-I: Basic R Programming Concepts</a></li>
<li><a class="" href="r-programming-language.html"><span class="header-section-number">1</span> R Programming Language</a></li>
<li><a class="" href="subset.html"><span class="header-section-number">2</span> Subsetting R objects or accesing specific elements</a></li>
<li><a class="" href="func.html"><span class="header-section-number">3</span> Functions and operations in R</a></li>
<li><a class="" href="existing-and-useful-functions-in-base-r.html"><span class="header-section-number">4</span> Existing and useful functions in base R</a></li>
<li><a class="" href="pipes-in-r.html"><span class="header-section-number">5</span> Pipes in R</a></li>
<li><a class="" href="control-statements.html"><span class="header-section-number">6</span> Control statements</a></li>
<li><a class="" href="functional-programming.html"><span class="header-section-number">7</span> Functional Programming</a></li>
<li><a class="" href="file.html"><span class="header-section-number">8</span> File handling operations in R</a></li>
<li><a class="" href="read.html"><span class="header-section-number">9</span> Getting data in and out of R</a></li>
<li><a class="" href="data-cleaning-in-r.html"><span class="header-section-number">10</span> Data Cleaning in R</a></li>
<li><a class="" href="merging-large-number-of-similar-datasets-into-one.html"><span class="header-section-number">11</span> Merging large number of similar datasets into one</a></li>
<li><a class="" href="part-ii-exploratory-data-analysis.html">Part-II: Exploratory Data Analysis</a></li>
<li><a class="" href="visualisations-in-base-r.html"><span class="header-section-number">12</span> Visualisations in Base R</a></li>
<li><a class="" href="visualising-data-with-ggplot2.html"><span class="header-section-number">13</span> Visualising data with ggplot2</a></li>
<li><a class="" href="DPLYRR.html"><span class="header-section-number">14</span> Data Transformation in dplyr</a></li>
<li><a class="" href="combining-tablestabular-data.html"><span class="header-section-number">15</span> Combining Tables/tabular data</a></li>
<li><a class="" href="data-wrangling-in-tidyr.html"><span class="header-section-number">16</span> Data Wrangling in tidyr</a></li>
<li><a class="" href="generating-descriptive-statistics.html"><span class="header-section-number">17</span> Generating Descriptive statistics</a></li>
<li><a class="" href="part-iii-probability-and-sampling-in-r.html">Part-III: Probability and Sampling in R</a></li>
<li><a class="" href="probability-in-r.html"><span class="header-section-number">18</span> Probability in R</a></li>
<li><a class="" href="random-sampling-in-r.html"><span class="header-section-number">19</span> Random sampling in R</a></li>
<li><a class="" href="part-iv-machine-learning-in-r.html">Part-IV: Machine Learning in R</a></li>
<li><a class="" href="linear-regression.html"><span class="header-section-number">20</span> Linear Regression</a></li>
<li><a class="" href="principal-component-analysis-in-r.html"><span class="header-section-number">21</span> Principal Component Analysis in R</a></li>
<li><a class="" href="clustering-in-r-using-kmeans-algorithm.html"><span class="header-section-number">22</span> Clustering in R (Using Kmeans algorithm)</a></li>
<li><a class="" href="association-rule-mining-in-r-apriori.html"><span class="header-section-number">23</span> Association Rule Mining in R (Apriori)</a></li>
<li><a class="" href="part-v-time-series.html">Part-V: Time Series</a></li>
<li><a class="active" href="lubridate.html"><span class="header-section-number">24</span> Date and Time calculations</a></li>
<li><a class="" href="time-series-analysis.html"><span class="header-section-number">25</span> Time Series Analysis</a></li>
<li><a class="" href="part-vi-network-analytics.html">Part VI: Network Analytics</a></li>
<li><a class="" href="network-analyticsgraph-theory-in-r.html"><span class="header-section-number">26</span> Network Analytics/Graph theory in R</a></li>
<li><a class="" href="applying-network-analysis-in-auditfraud-detection.html"><span class="header-section-number">27</span> Applying network analysis in audit/fraud detection</a></li>
<li><a class="" href="part-vii-text-analytics-in-r.html">Part-VII: Text Analytics in R</a></li>
<li><a class="" href="string-manipulation-in-stringr.html"><span class="header-section-number">28</span> String manipulation in stringr</a></li>
<li><a class="" href="regex---a-quick-introduction.html"><span class="header-section-number">29</span> Regex - A quick introduction</a></li>
<li><a class="" href="regex-in-human-readble-format-using-rebus.html"><span class="header-section-number">30</span> Regex in human readble format using rebus</a></li>
<li><a class="" href="factors.html"><span class="header-section-number">31</span> Factors</a></li>
<li><a class="" href="text-analytics-in-r.html"><span class="header-section-number">32</span> Text Analytics in R</a></li>
<li><a class="" href="sentiment-analysis.html"><span class="header-section-number">33</span> Sentiment Analysis</a></li>
<li><a class="" href="visualising-text-analytics-through-wordcloud-etc..html"><span class="header-section-number">34</span> Visualising Text analytics through Wordcloud, etc.</a></li>
<li><a class="" href="finding-string-similarity.html"><span class="header-section-number">35</span> Finding string similarity</a></li>
<li><a class="" href="part-viii-geo-computation-in-r.html">Part-VIII: Geo computation in R</a></li>
<li><a class="" href="maps-in-r.html"><span class="header-section-number">36</span> Maps in R</a></li>
<li><a class="" href="geo-coding-in-r.html"><span class="header-section-number">37</span> Geo-Coding in R</a></li>
<li><a class="" href="reverse-geo-coding.html"><span class="header-section-number">38</span> Reverse geo-coding</a></li>
<li><a class="" href="part-ix-identifying-anamolous-observations-for-audit.html">Part-IX: Identifying anamolous observations for audit</a></li>
<li><a class="" href="benford-testsanalysis.html"><span class="header-section-number">39</span> Benford Tests/Analysis</a></li>
<li><a class="" href="anomaly-detection.html"><span class="header-section-number">40</span> Anomaly Detection</a></li>
<li><a class="" href="finding-anamolous-outliers.html"><span class="header-section-number">41</span> Finding Anamolous Outliers</a></li>
<li><a class="" href="dup.html"><span class="header-section-number">42</span> Duplicate Detection</a></li>
<li><a class="" href="detecting-gaps-in-sequences.html"><span class="header-section-number">43</span> Detecting gaps in sequences</a></li>
<li><a class="" href="data-envelopment-analysis.html"><span class="header-section-number">44</span> Data Envelopment Analysis</a></li>
<li class="book-part">Appendix</li>
<li><a class="" href="COLORR.html"><span class="header-section-number">A</span> Colors in R</a></li>
<li><a class="" href="various-datasets-in-base-r-used-in-this-book.html"><span class="header-section-number">B</span> Various Datasets, in base R, used in this book</a></li>
<li><a class="" href="references.html">References</a></li>
</ul>

        <div class="book-extra">
          
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="lubridate" class="section level1" number="24">
<h1>
<span class="header-section-number">24</span> Date and Time calculations<a class="anchor" aria-label="anchor" href="#lubridate"><i class="fas fa-link"></i></a>
</h1>
<div id="base-r-classes-to-deal-with-date-and-time-variables" class="section level2" number="24.1">
<h2>
<span class="header-section-number">24.1</span> Base R classes to deal with date and time variables<a class="anchor" aria-label="anchor" href="#base-r-classes-to-deal-with-date-and-time-variables"><i class="fas fa-link"></i></a>
</h2>
<p>There may hardly be any data analytics activity, wherein we do not have to deal with temporal information and thus need to manipulate dates and date-time objects/variables. To deal with these variable types, R has four core data types/classes,</p>
<ul>
<li>
<code>Date</code> To deal with date objects (note: <code>D</code> in UPPER case)</li>
<li>
<code>POSIXct</code> To deal with times</li>
<li>
<code>POSIXlt</code> To deal with times (for difference between these two refer section <a href="lubridate.html#timm">24.1.2</a>.)</li>
<li>
<code>difftime</code> To deal with time-spans</li>
</ul>
<div id="dates" class="section level3" number="24.1.1">
<h3>
<span class="header-section-number">24.1.1</span> Dates<a class="anchor" aria-label="anchor" href="#dates"><i class="fas fa-link"></i></a>
</h3>
<p><code>Date</code> objects can be created from <code>string/character</code> type objects (we will just see that date objects can be created from numeric objects too), using base R’s function <code><a href="https://rdrr.io/r/base/as.Date.html">as.Date()</a></code> which accepts a character vector and a format to parse the date from the given string of characters. E.g.</p>
<div class="sourceCode" id="cb1215"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span><span class="op">(</span><span class="st">"2000-12-12"</span><span class="op">)</span> <span class="co"># default format</span></span></code></pre></div>
<pre><code>## [1] "2000-12-12"</code></pre>
<div class="sourceCode" id="cb1217"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span><span class="op">(</span><span class="st">"12-12-2000"</span>, format <span class="op">=</span> <span class="st">"%d-%m-%Y"</span><span class="op">)</span> <span class="co"># custom format</span></span></code></pre></div>
<pre><code>## [1] "2000-12-12"</code></pre>
<p>In the above example, we can see that a custom format has been given to parse the character string into the date type object. We can check the <code>class</code> of the object created.</p>
<div class="sourceCode" id="cb1219"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">a_date</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span><span class="op">(</span><span class="st">"20-12-2022"</span>, format <span class="op">=</span> <span class="st">"%d-%m-%Y"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">a_date</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "Date"</code></pre>
<p>The format used in the above function accepts special codes, which can be seen by running <code><a href="https://rdrr.io/r/base/strptime.html">?strptime</a></code> in your R console. A ready reference for most used codes is however, given in table <a href="lubridate.html#tab:lubri001">24.1</a> in section <a href="lubridate.html#strpp">24.1.9</a>. The date objects in R, are actually based on numeric classes which actually store the number of days since an epoch. Check the following code-</p>
<div class="sourceCode" id="cb1221"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html">Sys.Date</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "Date"</code></pre>
<div class="sourceCode" id="cb1223"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/typeof.html">typeof</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html">Sys.Date</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "double"</code></pre>
<div class="sourceCode" id="cb1225"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html">unclass</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html">Sys.Date</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] 19965</code></pre>
<p>So, in R versions 4.3.0 and later, it also accepts a number to convert into a date using the number of days elapsed since epoch. So,</p>
<div class="sourceCode" id="cb1227"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "1970-01-02"</code></pre>
<p>Here date since one day of default origin date 1970-01-01 has been returned. However, default <code>origin</code> can be changed using the argument <code>origin</code>. Example,</p>
<div class="sourceCode" id="cb1229"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># One day since launch of R version 1.0</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span><span class="op">(</span><span class="fl">1</span>, origin <span class="op">=</span> <span class="st">"2000-02-29"</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "2000-03-01"</code></pre>
</div>
<div id="timm" class="section level3" number="24.1.2">
<h3>
<span class="header-section-number">24.1.2</span> Times<a class="anchor" aria-label="anchor" href="#timm"><i class="fas fa-link"></i></a>
</h3>
<p>Now, to create date-time objects we can use either of <code>POSIXct</code> and <code>POSIXlt</code> classes, i.e. by using <code><a href="https://rdrr.io/r/base/as.POSIXlt.html">as.POSIXct()</a></code> and/or <code><a href="https://rdrr.io/r/base/as.POSIXlt.html">as.POSIXlt()</a></code> functions, as shown below.</p>
<div class="sourceCode" id="cb1231"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/as.POSIXlt.html">as.POSIXct</a></span><span class="op">(</span><span class="st">"1990/2/17 12:20:05"</span><span class="op">)</span> <span class="co"># default format</span></span></code></pre></div>
<pre><code>## [1] "1990-02-17 12:20:05 IST"</code></pre>
<div class="sourceCode" id="cb1233"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/as.POSIXlt.html">as.POSIXct</a></span><span class="op">(</span><span class="st">"17-2-1990 15:30:00"</span>, format <span class="op">=</span> <span class="st">"%d-%m-%Y %H:%M:%S"</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "1990-02-17 15:30:00 IST"</code></pre>
<div class="sourceCode" id="cb1235"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/as.POSIXlt.html">as.POSIXlt</a></span><span class="op">(</span><span class="st">"17-2-1990 15:30:00"</span>, format <span class="op">=</span> <span class="st">"%d-%m-%Y %H:%M:%S"</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "1990-02-17 15:30:00 IST"</code></pre>
<p>As regards, the difference between these two classes, <code>POSIXct</code> stores <em>seconds</em> since UNIX epoch (and other information), and <code>POSIXlt</code>, which stores a list of <em>day</em>, <em>month</em>, <em>year</em>, <em>hour</em>, <em>minute</em>, <em>second</em>, etc., which can be understood from the following codes.</p>
<blockquote>
<p><code>ct</code> in <code>POSIXct</code> stands for calendar time whereas, <code>lt</code> in <code>POSIXlt</code> stands for local time, explaining the conceptual difference.</p>
</blockquote>
<div class="sourceCode" id="cb1237"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">time_ct</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.POSIXlt.html">as.POSIXct</a></span><span class="op">(</span><span class="st">"17-2-1990 15:30:00"</span>, format <span class="op">=</span> <span class="st">"%d-%m-%Y %H:%M:%S"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">time_ct</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "POSIXct" "POSIXt"</code></pre>
<div class="sourceCode" id="cb1239"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html">unclass</a></span><span class="op">(</span><span class="va">time_ct</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] 635248800
## attr(,"tzone")
## [1] ""</code></pre>
<div class="sourceCode" id="cb1241"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## POSIXlt</span></span>
<span><span class="co"># Convert above object into POSIXlt type</span></span>
<span><span class="va">time_lt</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.POSIXlt.html">as.POSIXlt</a></span><span class="op">(</span><span class="va">time_ct</span><span class="op">)</span></span>
<span><span class="co"># Let us print</span></span>
<span><span class="va">time_lt</span></span></code></pre></div>
<pre><code>## [1] "1990-02-17 15:30:00 IST"</code></pre>
<div class="sourceCode" id="cb1243"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">time_lt</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "POSIXlt" "POSIXt"</code></pre>
<div class="sourceCode" id="cb1245"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html">unclass</a></span><span class="op">(</span><span class="va">time_lt</span><span class="op">)</span></span></code></pre></div>
<pre><code>## $sec
## [1] 0
## 
## $min
## [1] 30
## 
## $hour
## [1] 15
## 
## $mday
## [1] 17
## 
## $mon
## [1] 1
## 
## $year
## [1] 90
## 
## $wday
## [1] 6
## 
## $yday
## [1] 47
## 
## $isdst
## [1] 0
## 
## $zone
## [1] "IST"
## 
## $gmtoff
## [1] 19800
## 
## attr(,"tzone")
## [1] ""      "IST"   "+0630"
## attr(,"balanced")
## [1] TRUE</code></pre>
<p>Similar to <code><a href="https://rdrr.io/r/base/as.Date.html">as.Date()</a></code>, <code><a href="https://rdrr.io/r/base/as.POSIXlt.html">as.POSIXct()</a></code> also accepts a number and converts it into a date-time object using that much number of seconds since epoch.</p>
<div class="sourceCode" id="cb1247"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/as.POSIXlt.html">as.POSIXct</a></span><span class="op">(</span><span class="fl">60</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "1970-01-01 05:31:00 IST"</code></pre>
</div>
<div id="times-without-dates" class="section level3" number="24.1.3">
<h3>
<span class="header-section-number">24.1.3</span> Times (without dates)<a class="anchor" aria-label="anchor" href="#times-without-dates"><i class="fas fa-link"></i></a>
</h3>
<p>In base R, we do not have specific class to deal with time objects. However, there is a package <code>hms</code> part of <code>tidyverse</code> which can be used to create time objects to perform required calculations.</p>
<div class="sourceCode" id="cb1249"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">hms</span><span class="fu">::</span><span class="fu"><a href="https://hms.tidyverse.org/reference/hms.html">as_hms</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span></span></code></pre></div>
<pre><code>## 00:00:10</code></pre>
</div>
<div id="diffftime" class="section level3" number="24.1.4">
<h3>
<span class="header-section-number">24.1.4</span> Timespan<a class="anchor" aria-label="anchor" href="#diffftime"><i class="fas fa-link"></i></a>
</h3>
<p>In base R, besides above date/date-time object classes, there is a special class which creates time difference between two given temporal objects in specified units. The class is <code>difftime</code>.</p>
<div class="sourceCode" id="cb1251"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="va">freedom_age</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html">Sys.Date</a></span><span class="op">(</span><span class="op">)</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span><span class="op">(</span><span class="st">"1947-08-15"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>## Time difference of 28140 days</code></pre>
<div class="sourceCode" id="cb1253"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">freedom_age</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "difftime"</code></pre>
<div class="sourceCode" id="cb1255"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html">unclass</a></span><span class="op">(</span><span class="va">freedom_age</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] 28140
## attr(,"units")
## [1] "days"</code></pre>
<p>Function <code>difftime</code> can create difftime objects, as per specific requirement due to presence of an argument <code>units</code> which can take values from one of <code>“auto”</code>, <code>“secs”</code>, <code>“mins”</code>, <code>“hours”</code>, <code>“days”</code>, <code>“weeks”</code>.</p>
<div class="sourceCode" id="cb1257"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/difftime.html">difftime</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span><span class="op">(</span><span class="st">"2020-02-29"</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span><span class="op">(</span><span class="st">"2019-02-28"</span><span class="op">)</span>, units <span class="op">=</span> <span class="st">"weeks"</span><span class="op">)</span></span></code></pre></div>
<pre><code>## Time difference of 52.28571 weeks</code></pre>
<p>We can also create a difftime object by coercion.</p>
<div class="sourceCode" id="cb1259"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">a_difftime</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://generics.r-lib.org/reference/coercion-time-difference.html">as.difftime</a></span><span class="op">(</span><span class="fl">15</span>, units <span class="op">=</span> <span class="st">"days"</span><span class="op">)</span></span>
<span><span class="va">a_difftime</span></span></code></pre></div>
<pre><code>## Time difference of 15 days</code></pre>
<div class="sourceCode" id="cb1261"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">a_difftime</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "difftime"</code></pre>
</div>
<div id="time-zones" class="section level3" number="24.1.5">
<h3>
<span class="header-section-number">24.1.5</span> Time zones<a class="anchor" aria-label="anchor" href="#time-zones"><i class="fas fa-link"></i></a>
</h3>
<p>Run the function <code><a href="https://rdrr.io/r/base/timezones.html">Sys.timezone()</a></code> in your console to check the current timezone. Function <code><a href="https://rdrr.io/r/base/timezones.html">OlsonNames()</a></code> will however, display the known location for time-zones.</p>
<div class="sourceCode" id="cb1263"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/timezones.html">Sys.timezone</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "Asia/Calcutta"</code></pre>
<div class="sourceCode" id="cb1265"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/timezones.html">OlsonNames</a></span><span class="op">(</span><span class="op">)</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">253</span>, <span class="fl">284</span><span class="op">)</span><span class="op">]</span></span></code></pre></div>
<pre><code>## [1] "Asia/Calcutta" "Asia/Kolkata"</code></pre>
<p>So, we may use <code>tz</code> argument of <code><a href="https://rdrr.io/r/base/as.POSIXlt.html">as.POSIXlt()</a></code> and <code><a href="https://rdrr.io/r/base/as.POSIXlt.html">as.POSIXct()</a></code> functions to coerce the numeric or other class variables to dates and/or times.</p>
<div class="sourceCode" id="cb1267"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/as.POSIXlt.html">as.POSIXct</a></span><span class="op">(</span><span class="fl">1</span>, tz <span class="op">=</span> <span class="st">"GMT"</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "1970-01-01 00:00:01 GMT"</code></pre>
</div>
<div id="coercion" class="section level3" number="24.1.6">
<h3>
<span class="header-section-number">24.1.6</span> Coercion<a class="anchor" aria-label="anchor" href="#coercion"><i class="fas fa-link"></i></a>
</h3>
<p>In earlier sections we have already seen coercing functions useful to coerce the objects from one class to another.</p>
<ul>
<li><code><a href="https://rdrr.io/r/base/as.Date.html">as.Date()</a></code></li>
<li><code><a href="https://rdrr.io/r/base/as.POSIXlt.html">as.POSIXct()</a></code></li>
<li><code><a href="https://rdrr.io/r/base/as.POSIXlt.html">as.POSIXlt()</a></code></li>
<li><code><a href="https://generics.r-lib.org/reference/coercion-time-difference.html">as.difftime()</a></code></li>
</ul>
</div>
<div id="extracting-parts-from-datestimes" class="section level3" number="24.1.7">
<h3>
<span class="header-section-number">24.1.7</span> Extracting parts from dates/times<a class="anchor" aria-label="anchor" href="#extracting-parts-from-datestimes"><i class="fas fa-link"></i></a>
</h3>
<p>Base R provides us some useful function to extract relevant part of objects of dates/times classes.</p>
<ul>
<li>
<code>weekdays(x, abbreviate = FALSE)</code> to extract the weekday name. (Output is in character vector)</li>
<li>
<code>months(x, abbreviate = FALSE)</code> to extract the month name. (Output is in character vector)</li>
<li>
<code>quarters(x)</code> to extract the quarter. Output is in character vector.</li>
<li>
<code>julian(x)</code> to extract the days elapsed since origin. Output is in numeric vector.</li>
</ul>
<p>Examples-</p>
<div class="sourceCode" id="cb1269"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dates_vec</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span><span class="op">(</span><span class="fl">15001</span> <span class="op">+</span> <span class="fl">1</span><span class="op">:</span><span class="fl">7</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/weekday.POSIXt.html">weekdays</a></span><span class="op">(</span><span class="va">dates_vec</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "Friday"    "Saturday"  "Sunday"    "Monday"    "Tuesday"   "Wednesday"
## [7] "Thursday"</code></pre>
<div class="sourceCode" id="cb1271"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/weekday.POSIXt.html">months</a></span><span class="op">(</span><span class="va">dates_vec</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "January"  "January"  "January"  "January"  "February" "February" "February"</code></pre>
<div class="sourceCode" id="cb1273"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/weekday.POSIXt.html">quarters</a></span><span class="op">(</span><span class="va">dates_vec</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "Q1" "Q1" "Q1" "Q1" "Q1" "Q1" "Q1"</code></pre>
<div class="sourceCode" id="cb1275"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/weekday.POSIXt.html">julian</a></span><span class="op">(</span><span class="va">dates_vec</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] 15002 15003 15004 15005 15006 15007 15008
## attr(,"origin")
## [1] "1970-01-01"</code></pre>
</div>
<div id="other-useful-related-functions" class="section level3" number="24.1.8">
<h3>
<span class="header-section-number">24.1.8</span> Other useful related functions<a class="anchor" aria-label="anchor" href="#other-useful-related-functions"><i class="fas fa-link"></i></a>
</h3>
<p>There are certain other useful functions to the related classes which are useful in data analytics.</p>
<ol style="list-style-type: decimal">
<li>
<code>seq.Date(from, to, by, length.out = NULL, along.with = NULL, ...)</code> where-</li>
</ol>
<ul>
<li>
<code>from</code> and <code>to</code> are start and end dates respectively</li>
<li>
<code>by</code> is increment of sequence which can accept either of these
<ul>
<li>a number to be taken in days,</li>
<li>an object of class <code>difftime</code>
</li>
<li>a character string, containing one of “day”, “week”, “month”, “quarter” or “year”. This can optionally be preceded by a (positive or negative) integer and a space, or followed by “s”.</li>
</ul>
</li>
<li>
<code>length.out</code> is optional argument accepting an integer, for desired length of the sequence.</li>
<li>
<code>along.with</code> take the length from the length of this argument.</li>
</ul>
<p>Example-</p>
<div class="sourceCode" id="cb1277"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span><span class="op">(</span><span class="st">"2000/1/1"</span><span class="op">)</span>, by <span class="op">=</span> <span class="st">"month"</span>, length.out <span class="op">=</span> <span class="fl">12</span><span class="op">)</span></span></code></pre></div>
<pre><code>##  [1] "2000-01-01" "2000-02-01" "2000-03-01" "2000-04-01" "2000-05-01"
##  [6] "2000-06-01" "2000-07-01" "2000-08-01" "2000-09-01" "2000-10-01"
## [11] "2000-11-01" "2000-12-01"</code></pre>
</div>
<div id="strpp" class="section level3" number="24.1.9">
<h3>
<span class="header-section-number">24.1.9</span> <code>strptime</code> character codes<a class="anchor" aria-label="anchor" href="#strpp"><i class="fas fa-link"></i></a>
</h3>
<p>A few format codes useful to parse date/date-time objects in R, are listed below for ready reference. To know more about these codes, readers can see the output of <code>?strptime()</code> in their console. Some useful codes have been reproduced in the table <a href="lubridate.html#tab:lubri001">24.1</a> for ready reference.</p>
<div class="inline-table"><table class="table table-sm">
<caption>
<span id="tab:lubri001">Table 24.1: </span> Conversion Specifications for Date/Date-time</caption>
<colgroup>
<col width="27%">
<col width="72%">
</colgroup>
<thead><tr class="header">
<th align="center">Format</th>
<th>Meaning</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">
<code>%y</code> (or <code>%Y</code>)</td>
<td>Year without (or with) Century</td>
</tr>
<tr class="even">
<td align="center"><code>%m</code></td>
<td>Month as decimal number (01-12)</td>
</tr>
<tr class="odd">
<td align="center">
<code>%B</code> (or <code>%b</code>)</td>
<td>Month name in full (or abbreviated) in current locale</td>
</tr>
<tr class="even">
<td align="center"><code>%d</code></td>
<td>Day of the month (01-31)</td>
</tr>
<tr class="odd">
<td align="center"><code>%H</code></td>
<td>Hours as decimal number (00-23)</td>
</tr>
<tr class="even">
<td align="center"><code>%I</code></td>
<td>Hours as decimal number, in 12 hour format (00-12)</td>
</tr>
<tr class="odd">
<td align="center"><code>%M</code></td>
<td>Minute as decimal number (00-59)</td>
</tr>
<tr class="even">
<td align="center"><code>%S</code></td>
<td>Second as integer (00-61) allowing up to two leap-seconds</td>
</tr>
<tr class="odd">
<td align="center"><code>%OS</code></td>
<td>Second(s) as decimal number</td>
</tr>
<tr class="even">
<td align="center"><code>%T</code></td>
<td>Equivalent to <code>%H:%M:%S</code>
</td>
</tr>
<tr class="odd">
<td align="center"><code>%p</code></td>
<td>AM/PM indicator in the locale.</td>
</tr>
<tr class="even">
<td align="center">
<code>%A</code> (or <code>%a</code>)</td>
<td>Full (or abbreviated) week-day name, in current locale</td>
</tr>
<tr class="odd">
<td align="center"><code>%j</code></td>
<td>Day of year as decimal number (001–366): For input, 366 is only valid in a leap year.</td>
</tr>
<tr class="even">
<td align="center"><code>%u</code></td>
<td>Weekday as a decimal number (1–7, Monday is 1)</td>
</tr>
<tr class="odd">
<td align="center"><code>%w</code></td>
<td>Weekday as decimal number (0–6, Sunday is 0).</td>
</tr>
<tr class="even">
<td align="center"><code>%U</code></td>
<td>Week of the year as decimal number (00–53) using Sunday as the first day 1 of the week (and typically with the first Sunday of the year as day 1 of week 1). <strong>The US convention.</strong>
</td>
</tr>
<tr class="odd">
<td align="center"><code>%V</code></td>
<td>Week of the year as decimal number (01–53) as defined in ISO 8601. If the week (starting on Monday) containing 1 January has four or more days in the new year, then it is considered week 1. Otherwise, it is the last week of the previous year, and the next week is week 1.</td>
</tr>
<tr class="even">
<td align="center"><code>%W</code></td>
<td>Week of the year as decimal number (00–53) using Monday as the first day of week (and typically with the first Monday of the year as day 1 of week 1). <strong>The UK convention</strong>.</td>
</tr>
<tr class="odd">
<td align="center"><code>%z</code></td>
<td>Offset from UTC</td>
</tr>
<tr class="even">
<td align="center"><code>%Z</code></td>
<td>Time Zone name</td>
</tr>
</tbody>
</table></div>
</div>
</div>
<div id="using-lubridate-package-for-parsingcreating-dates" class="section level2" number="24.2">
<h2>
<span class="header-section-number">24.2</span> Using <code>lubridate</code> package for parsing/creating dates<a class="anchor" aria-label="anchor" href="#using-lubridate-package-for-parsingcreating-dates"><i class="fas fa-link"></i></a>
</h2>
<p>Package <code>lubridate</code> which is now part of core <code>tidyverse</code> is extremely helpful package while analysing temporal variables in data. Creating date/date-time objects and converting variables from numeric/character to these types is easier than in base R. Besides, it offers us some other temporal class objects to make our time-series analysis easier.</p>
<div id="datedate-time-objects-creation" class="section level3" number="24.2.1">
<h3>
<span class="header-section-number">24.2.1</span> Date/date-time objects creation<a class="anchor" aria-label="anchor" href="#datedate-time-objects-creation"><i class="fas fa-link"></i></a>
</h3>
<p>Date and Date-time object classes in <code>lubridate</code> are defined similarly as in base R. So we can create a date (or date-time) using a number of days (or seconds) elapsed since epoch.</p>
<div class="sourceCode" id="cb1279"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://lubridate.tidyverse.org">lubridate</a></span>, warn.conflicts <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co"># Creation using numbers</span></span>
<span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/as_date.html">as_date</a></span><span class="op">(</span><span class="fl">2392</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "1976-07-20"</code></pre>
<div class="sourceCode" id="cb1281"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/as_date.html">as_datetime</a></span><span class="op">(</span><span class="fl">206668800</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "1976-07-20 UTC"</code></pre>
<div class="sourceCode" id="cb1283"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Converting from one type to another</span></span>
<span><span class="op">(</span><span class="va">date_today</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/as_date.html">as_date</a></span><span class="op">(</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/now.html">now</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "2024-08-30"</code></pre>
<div class="sourceCode" id="cb1285"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Check its class</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">date_today</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "Date"</code></pre>
<div class="sourceCode" id="cb1287"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Or see what's all in there</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html">unclass</a></span><span class="op">(</span><span class="va">date_today</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] 19965</code></pre>
</div>
<div id="parsing-datedate-time-objects-from-character" class="section level3" number="24.2.2">
<h3>
<span class="header-section-number">24.2.2</span> Parsing date/date-time objects from <code>character</code><a class="anchor" aria-label="anchor" href="#parsing-datedate-time-objects-from-character"><i class="fas fa-link"></i></a>
</h3>
<p>In <code>lubridate</code> parsing date/date-time objects from character strings is pretty easy as we have a number of functions useful to parse dates/date-times written in any specific locale/order irrespective of the delimiter used to separate different components of date/time therein. In these functions, the orders of the year (<code>y</code>), quarter (<code>q</code>), month (<code>m</code>) date (<code>d</code>) hour (<code>h</code>) minute (<code>m</code>) and second (<code>s</code>) are represented by their first characters. These are -</p>
<ul>
<li>
<code>ymd_hms</code>, <code>ymd_hm</code>, <code>ymd_h</code>, <code>ymd</code>
</li>
<li>
<code>dmy_hms</code>, <code>dmy_hm</code>, <code>dmy_h</code>, <code>dmy</code>
</li>
<li>
<code>mdy_hms</code>, <code>mdy_hm</code>, <code>mdy_h</code>, <code>mdy</code>
</li>
<li>
<code>ydm_hms</code>, <code>ydm_hm</code>, <code>ydm_h</code>, <code>ydm</code>
</li>
<li>
<code>myd</code>, <code>dym</code>
</li>
<li>
<code>yq</code>, <code>ym</code>, <code>my</code>
</li>
</ul>
<p>A few of the examples are -</p>
<div class="sourceCode" id="cb1289"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd.html">ymd</a></span><span class="op">(</span><span class="st">"19760720"</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "1976-07-20"</code></pre>
<div class="sourceCode" id="cb1291"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd.html">dmy</a></span><span class="op">(</span><span class="st">"01.12.2004"</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "2004-12-01"</code></pre>
<div class="sourceCode" id="cb1293"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd.html">dmy</a></span><span class="op">(</span><span class="st">"15th of January, 2006"</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "2006-01-15"</code></pre>
<div class="sourceCode" id="cb1295"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd_hms.html">mdy_hm</a></span><span class="op">(</span><span class="st">"August 15th, 1947 at 10:45 PM"</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "1947-08-15 22:45:00 UTC"</code></pre>
<div class="sourceCode" id="cb1297"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd.html">my</a></span><span class="op">(</span><span class="st">"04-2006"</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "2006-04-01"</code></pre>
<div class="sourceCode" id="cb1299"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd.html">yq</a></span><span class="op">(</span><span class="st">"2024: Quarter 4"</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "2024-10-01"</code></pre>
<p>To parse date-time from a fraction of year passed, we can use <code><a href="https://lubridate.tidyverse.org/reference/date_decimal.html">date_decimal()</a></code>. Example-</p>
<div class="sourceCode" id="cb1301"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/date_decimal.html">date_decimal</a></span><span class="op">(</span><span class="fl">2024.162</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "2024-02-29 07:00:28 UTC"</code></pre>
</div>
<div id="parsing-datesdate-times-from-individual-conponents" class="section level3" number="24.2.3">
<h3>
<span class="header-section-number">24.2.3</span> Parsing dates/date-times from individual conponents<a class="anchor" aria-label="anchor" href="#parsing-datesdate-times-from-individual-conponents"><i class="fas fa-link"></i></a>
</h3>
<p>For the scenario, where we have to create date/date-times we can make use of two functions <code>make_date</code> and <code>make_datetime</code>. Syntax is</p>
<pre><code>make_datetime(
  year = 1970L,
  month = 1L,
  day = 1L,
  hour = 0L,
  min = 0L,
  sec = 0,
  tz = "UTC"
)

make_date(year = 1970L, month = 1L, day = 1L)</code></pre>
<p>Example-</p>
<div class="sourceCode" id="cb1304"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/make_datetime.html">make_date</a></span><span class="op">(</span>year <span class="op">=</span> <span class="fl">1947</span>, month <span class="op">=</span> <span class="fl">8</span>, day <span class="op">=</span> <span class="fl">15</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "1947-08-15"</code></pre>
</div>
</div>
<div id="extracting-and-setting-datedate-time-components" class="section level2" number="24.3">
<h2>
<span class="header-section-number">24.3</span> Extracting and setting date/date-time components<a class="anchor" aria-label="anchor" href="#extracting-and-setting-datedate-time-components"><i class="fas fa-link"></i></a>
</h2>
<div id="extraction" class="section level3" number="24.3.1">
<h3>
<span class="header-section-number">24.3.1</span> Extraction<a class="anchor" aria-label="anchor" href="#extraction"><i class="fas fa-link"></i></a>
</h3>
<p>We can extract the specific components from date/date-times using, intuitively named accessor functions, which are listed below. Note that in all of these functions the individual date components is in singular; as plural component functions will be used in different context, as we will discuss in Section <a href="lubridate.html#perriod">24.4.1</a>.</p>
<ul>
<li>
<code><a href="https://lubridate.tidyverse.org/reference/year.html">year()</a></code> for Year; <code><a href="https://lubridate.tidyverse.org/reference/year.html">isoyear()</a></code> for ISO 8601 Year</li>
<li>
<code><a href="https://lubridate.tidyverse.org/reference/quarter.html">semester()</a></code> for Semester</li>
<li>
<code><a href="https://lubridate.tidyverse.org/reference/quarter.html">quarter()</a></code> for Quarter</li>
<li>
<code><a href="https://lubridate.tidyverse.org/reference/month.html">month()</a></code> for Month</li>
<li>
<code>week</code> for Week of the year, <code><a href="https://lubridate.tidyverse.org/reference/week.html">isoweek()</a></code> for ISO 8601 Week</li>
<li>
<code>day</code> for Day of the month, <code><a href="https://lubridate.tidyverse.org/reference/day.html">wday()</a></code> for Day of the week, <code><a href="https://lubridate.tidyverse.org/reference/day.html">qday()</a></code> for Day of the quarter</li>
<li>
<code><a href="https://lubridate.tidyverse.org/reference/hour.html">hour()</a></code>, <code><a href="https://lubridate.tidyverse.org/reference/minute.html">minute()</a></code> and <code><a href="https://lubridate.tidyverse.org/reference/second.html">second()</a></code> for Hour, Minute and Second respectively</li>
<li>
<code><a href="https://lubridate.tidyverse.org/reference/tz.html">tz()</a></code> for Time Zone</li>
</ul>
<p>See following examples.</p>
<div class="sourceCode" id="cb1306"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Make an example date</span></span>
<span><span class="op">(</span><span class="va">a_time</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/as_date.html">as_datetime</a></span><span class="op">(</span><span class="fl">999999999</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "2001-09-09 01:46:39 UTC"</code></pre>
<div class="sourceCode" id="cb1308"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Extract the DAY of the month</span></span>
<span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/day.html">day</a></span><span class="op">(</span><span class="va">a_time</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] 9</code></pre>
<div class="sourceCode" id="cb1310"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Extract Weekday name in full</span></span>
<span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/day.html">wday</a></span><span class="op">(</span><span class="va">a_time</span>, label <span class="op">=</span> <span class="cn">TRUE</span>, abbr <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] Sunday
## 7 Levels: Sunday &lt; Monday &lt; Tuesday &lt; Wednesday &lt; Thursday &lt; ... &lt; Saturday</code></pre>
<div class="sourceCode" id="cb1312"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Extract second component</span></span>
<span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/second.html">second</a></span><span class="op">(</span><span class="va">a_time</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] 39</code></pre>
<div class="sourceCode" id="cb1314"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Extract Month name (abbreviated)</span></span>
<span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/month.html">month</a></span><span class="op">(</span><span class="va">a_time</span>, label <span class="op">=</span> <span class="cn">TRUE</span>, abbr <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] Sep
## 12 Levels: Jan &lt; Feb &lt; Mar &lt; Apr &lt; May &lt; Jun &lt; Jul &lt; Aug &lt; Sep &lt; ... &lt; Dec</code></pre>
<div class="sourceCode" id="cb1316"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Extract week number of the year</span></span>
<span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/week.html">week</a></span><span class="op">(</span><span class="va">a_time</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] 36</code></pre>
<p>Besides above functions, there are a few functions which are helpful in knowing certain characteristics of date/date-time variable. These functions return which logical vectors, are listed as -</p>
<ul>
<li>
<code>am(x)</code>, <code>pm(x)</code> to know whether the <code>x</code> is in AM or PM, respectively.</li>
<li>
<code>dst(x)</code> to know whether <code>x</code> is in Daylight savings.</li>
<li>
<code>leap_year(x)</code> to know whether <code>x</code> is a leap year.</li>
</ul>
<p>Examples-</p>
<div class="sourceCode" id="cb1318"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Is our a_time AM?</span></span>
<span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/am.html">am</a></span><span class="op">(</span><span class="va">a_time</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb1320"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Is a_time falling in leap year?</span></span>
<span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/leap_year.html">leap_year</a></span><span class="op">(</span><span class="va">a_time</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb1322"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Is it during DST?</span></span>
<span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/dst.html">dst</a></span><span class="op">(</span><span class="va">a_time</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
</div>
<div id="setting-components" class="section level3" number="24.3.2">
<h3>
<span class="header-section-number">24.3.2</span> Setting Components<a class="anchor" aria-label="anchor" href="#setting-components"><i class="fas fa-link"></i></a>
</h3>
<p>Just like we used accessor functions to extract the date-time components, we can use those functions to set specific component in date/date-time object/variable. See Example-</p>
<div class="sourceCode" id="cb1324"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Initial variable</span></span>
<span><span class="va">a_time</span></span></code></pre></div>
<pre><code>## [1] "2001-09-09 01:46:39 UTC"</code></pre>
<div class="sourceCode" id="cb1326"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Setting component - Year</span></span>
<span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/year.html">year</a></span><span class="op">(</span><span class="va">a_time</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fl">2024</span></span>
<span><span class="co"># Print modified variable</span></span>
<span><span class="va">a_time</span></span></code></pre></div>
<pre><code>## [1] "2024-09-09 01:46:39 UTC"</code></pre>
<div class="sourceCode" id="cb1328"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Modify Time zone</span></span>
<span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/tz.html">tz</a></span><span class="op">(</span><span class="va">a_time</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="st">"Asia/Kolkata"</span></span>
<span><span class="co"># print modified variable</span></span>
<span><span class="va">a_time</span></span></code></pre></div>
<pre><code>## [1] "2024-09-09 01:46:39 IST"</code></pre>
<p>Finally, function <code>update</code> can also be used to return a date with the specified elements updated. Example-</p>
<div class="sourceCode" id="cb1330"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">EOD</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd.html">dmy</a></span><span class="op">(</span><span class="st">"31-01-2024"</span><span class="op">)</span></span>
<span><span class="va">EOD</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/update.html">update</a></span><span class="op">(</span><span class="va">EOD</span>, year <span class="op">=</span> <span class="fl">2020</span><span class="op">)</span></span>
<span><span class="va">EOD</span></span></code></pre></div>
<pre><code>## [1] "2020-01-31"</code></pre>
<div class="sourceCode" id="cb1332"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># If values are too big, they will roll-over:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/update.html">update</a></span><span class="op">(</span><span class="va">EOD</span>, month <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "2020-03-02"</code></pre>
</div>
</div>
<div id="time-spans" class="section level2" number="24.4">
<h2>
<span class="header-section-number">24.4</span> Time spans<a class="anchor" aria-label="anchor" href="#time-spans"><i class="fas fa-link"></i></a>
</h2>
<p>When we subtract a date-time object from another in base R, we get a <code>difftime</code> object, as we have already seen in section <a href="lubridate.html#diffftime">24.1.4</a>.</p>
<p>We know that every time/date unit is not same in strict sense. Like leap years may have 366 days whereas others have 365 days. Now there is a concept of leap seconds too. Moreover, certain countries have daylight saving time and thus, every day is not of equal length there. In order to deal with specific and clear requirements on date calculations, there are three different classes in <code>lubridate</code>, as discussed next.</p>
<p>Lubridate has three classes, which may sound similar at first, but are different in their working. These are -</p>
<ul>
<li><code>period</code></li>
<li><code>duration</code></li>
<li><code>interval</code></li>
</ul>
<p>Let us discuss about each one separately.</p>
<div id="perriod" class="section level3" number="24.4.1">
<h3>
<span class="header-section-number">24.4.1</span> Periods<a class="anchor" aria-label="anchor" href="#perriod"><i class="fas fa-link"></i></a>
</h3>
<p>The <code>period</code> objects track changes in clock times and ignore time line irregularities. So every time object is of standard length like our clocks.</p>
<p>Period objects can be created in <code>lubridate</code> using <strong>pluralized</strong> date component functions. Example-</p>
<div class="sourceCode" id="cb1334"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="va">one_year</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/period.html">years</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "1y 0m 0d 0H 0M 0S"</code></pre>
<div class="sourceCode" id="cb1336"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">one_year</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "Period"
## attr(,"package")
## [1] "lubridate"</code></pre>
<div class="sourceCode" id="cb1338"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Add one year PERIOD to get a leap year?</span></span>
<span><span class="va">a_date</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd.html">dmy</a></span><span class="op">(</span><span class="st">"01-03-2019"</span><span class="op">)</span></span>
<span><span class="va">a_date</span> <span class="op">+</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/period.html">years</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "2020-03-01"</code></pre>
</div>
<div id="durations" class="section level3" number="24.4.2">
<h3>
<span class="header-section-number">24.4.2</span> Durations<a class="anchor" aria-label="anchor" href="#durations"><i class="fas fa-link"></i></a>
</h3>
<p>Durations, on the other hand track changes in physical time, i.e. taking into account all the timeline adjusting irregularities. These duration objects can be created in lubridate, by adding <code>d</code> as prefix to all pluralized <code>period</code> objects.</p>
<div class="sourceCode" id="cb1340"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="va">one_year_duration</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/duration.html">dyears</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "31557600s (~1 years)"</code></pre>
<div class="sourceCode" id="cb1342"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">one_year_duration</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "Duration"
## attr(,"package")
## [1] "lubridate"</code></pre>
<div class="sourceCode" id="cb1344"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Add one year DURATION to get a leap year date?</span></span>
<span><span class="va">a_date</span> <span class="op">+</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/duration.html">dyears</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "2020-02-29 06:00:00 UTC"</code></pre>
</div>
<div id="intervals" class="section level3" number="24.4.3">
<h3>
<span class="header-section-number">24.4.3</span> Intervals<a class="anchor" aria-label="anchor" href="#intervals"><i class="fas fa-link"></i></a>
</h3>
<p>The objects of class <code>interval</code> represent <strong>specific</strong> interval on the timeline. In other words, these have a specific start and end date/datetimes. These can be created in lubridate using function <code>interval</code>, which has syntax like -</p>
<pre><code>interval(start = NULL, end = NULL, tzone = tz(start))</code></pre>
<p>This should be clear with the following examples.</p>
<div class="sourceCode" id="cb1347"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="va">a_interval</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/interval.html">interval</a></span><span class="op">(</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd.html">dmy</a></span><span class="op">(</span><span class="st">"15-08-1947"</span><span class="op">)</span>, <span class="fu"><a href="https://lubridate.tidyverse.org/reference/now.html">today</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] 1947-08-15 UTC--2024-08-30 UTC</code></pre>
<div class="sourceCode" id="cb1349"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">a_interval</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "Interval"
## attr(,"package")
## [1] "lubridate"</code></pre>
<p>Intervals can also be created using special operator <code>%--%</code>. E.g.</p>
<div class="sourceCode" id="cb1351"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="va">interval1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd.html">dmy</a></span><span class="op">(</span><span class="st">"15-08-1947"</span><span class="op">)</span> <span class="op"><a href="https://lubridate.tidyverse.org/reference/interval.html">%--%</a></span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd.html">dmy</a></span><span class="op">(</span><span class="st">"26-01-1950"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] 1947-08-15 UTC--1950-01-26 UTC</code></pre>
</div>
</div>
<div id="performing-calculations-on-intervalsdates" class="section level2" number="24.5">
<h2>
<span class="header-section-number">24.5</span> Performing calculations on intervals/dates<a class="anchor" aria-label="anchor" href="#performing-calculations-on-intervalsdates"><i class="fas fa-link"></i></a>
</h2>
<p>There are a few functions to make our life easier while performing data analysis on temporal fields. These are -</p>
<div id="within-operator" class="section level3" number="24.5.1">
<h3>
<span class="header-section-number">24.5.1</span> <code>%within%</code> operator<a class="anchor" aria-label="anchor" href="#within-operator"><i class="fas fa-link"></i></a>
</h3>
<p>Operator <code>a %within% b</code> checks whether interval/date-time <code>a</code> falls with interval <code>b</code>. Returns boolean value(s).</p>
<div class="sourceCode" id="cb1353"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">interval1</span> <span class="op"><a href="https://lubridate.tidyverse.org/reference/within-interval.html">%within%</a></span> <span class="va">a_interval</span></span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
</div>
<div id="backward-intervals" class="section level3" number="24.5.2">
<h3>
<span class="header-section-number">24.5.2</span> Backward intervals<a class="anchor" aria-label="anchor" href="#backward-intervals"><i class="fas fa-link"></i></a>
</h3>
<p>Intervals in lubridate can be backwards too. E.g.</p>
<div class="sourceCode" id="cb1355"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="va">back_interval</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd.html">dmy</a></span><span class="op">(</span><span class="st">"26-01-2024"</span><span class="op">)</span> <span class="op"><a href="https://lubridate.tidyverse.org/reference/interval.html">%--%</a></span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd.html">dmy</a></span><span class="op">(</span><span class="st">"15-01-2024"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] 2024-01-26 UTC--2024-01-15 UTC</code></pre>
</div>
<div id="flipping-intervals" class="section level3" number="24.5.3">
<h3>
<span class="header-section-number">24.5.3</span> Flipping intervals<a class="anchor" aria-label="anchor" href="#flipping-intervals"><i class="fas fa-link"></i></a>
</h3>
<p>Function <code><a href="https://lubridate.tidyverse.org/reference/interval.html">int_flip()</a></code> can flip the interval. E.g.</p>
<div class="sourceCode" id="cb1357"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/interval.html">int_flip</a></span><span class="op">(</span><span class="va">back_interval</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] 2024-01-15 UTC--2024-01-26 UTC</code></pre>
</div>
<div id="checking-alignment-of-two-intervals" class="section level3" number="24.5.4">
<h3>
<span class="header-section-number">24.5.4</span> Checking alignment of two intervals<a class="anchor" aria-label="anchor" href="#checking-alignment-of-two-intervals"><i class="fas fa-link"></i></a>
</h3>
<p>Function <code>int_aligns</code> tests if two intervals share an endpoint. The direction of each interval is ignored. In other words, it actually tests whether the earliest or latest moments of each interval occur at the same time. E.g.</p>
<div class="sourceCode" id="cb1359"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">int1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/interval.html">interval</a></span><span class="op">(</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd.html">ymd</a></span><span class="op">(</span><span class="st">"2001-01-01"</span><span class="op">)</span>, <span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd.html">ymd</a></span><span class="op">(</span><span class="st">"2002-01-01"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">int2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/interval.html">interval</a></span><span class="op">(</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd.html">ymd</a></span><span class="op">(</span><span class="st">"2001-06-01"</span><span class="op">)</span>, <span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd.html">ymd</a></span><span class="op">(</span><span class="st">"2002-01-01"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">int3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/interval.html">interval</a></span><span class="op">(</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd.html">ymd</a></span><span class="op">(</span><span class="st">"2003-01-01"</span><span class="op">)</span>, <span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd.html">ymd</a></span><span class="op">(</span><span class="st">"2004-01-01"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/interval.html">int_aligns</a></span><span class="op">(</span><span class="va">int1</span>, <span class="va">int2</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb1361"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/interval.html">int_aligns</a></span><span class="op">(</span><span class="va">int1</span>, <span class="va">int3</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
</div>
<div id="checking-overlap-in-two-intervals" class="section level3" number="24.5.5">
<h3>
<span class="header-section-number">24.5.5</span> Checking Overlap in two intervals<a class="anchor" aria-label="anchor" href="#checking-overlap-in-two-intervals"><i class="fas fa-link"></i></a>
</h3>
<p>Function <code>int_overlaps</code> can test if two intervals overlap each other.</p>
<div class="sourceCode" id="cb1363"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/interval.html">int_overlaps</a></span><span class="op">(</span><span class="va">int1</span>, <span class="va">int2</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
</div>
<div id="length-of-the-interval" class="section level3" number="24.5.6">
<h3>
<span class="header-section-number">24.5.6</span> Length of the interval<a class="anchor" aria-label="anchor" href="#length-of-the-interval"><i class="fas fa-link"></i></a>
</h3>
<p>Function <code><a href="https://lubridate.tidyverse.org/reference/interval.html">int_length()</a></code> can calculate the length of interval and returns a <code>numeric</code> variable equal to the seconds in that interval. E.g.</p>
<div class="sourceCode" id="cb1365"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/interval.html">int_length</a></span><span class="op">(</span><span class="va">back_interval</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] -950400</code></pre>
</div>
<div id="adding-months-without-exceeding-last-day-of-the-month." class="section level3" number="24.5.7">
<h3>
<span class="header-section-number">24.5.7</span> Adding Months without exceeding last day of the month.<a class="anchor" aria-label="anchor" href="#adding-months-without-exceeding-last-day-of-the-month."><i class="fas fa-link"></i></a>
</h3>
<p>Operators <code>%m+%</code> and <code>%m-%</code> will add (or subtract) months to a date without exceeding the last day of the new month. E.g.</p>
<div class="sourceCode" id="cb1367"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="va">leap</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd.html">ymd</a></span><span class="op">(</span><span class="st">"2012-02-29"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "2012-02-29"</code></pre>
<div class="sourceCode" id="cb1369"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">leap</span> <span class="op"><a href="https://lubridate.tidyverse.org/reference/mplus.html">%m+%</a></span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/period.html">years</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "2013-02-28"</code></pre>
<div class="sourceCode" id="cb1371"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">leap</span> <span class="op"><a href="https://lubridate.tidyverse.org/reference/mplus.html">%m+%</a></span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/period.html">years</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "2011-02-28"</code></pre>
<div class="sourceCode" id="cb1373"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">leap</span> <span class="op"><a href="https://lubridate.tidyverse.org/reference/mplus.html">%m-%</a></span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/period.html">years</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "2011-02-28"</code></pre>
<p>Another Example-</p>
<div class="sourceCode" id="cb1375"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">jan</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd_hms.html">ymd_hms</a></span><span class="op">(</span><span class="st">"2010-01-31 03:04:05"</span><span class="op">)</span></span>
<span><span class="va">jan</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/weekday.POSIXt.html">months</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span> <span class="co"># Feb 31 and April 31 returned as NA</span></span></code></pre></div>
<pre><code>## [1] NA                        "2010-03-31 03:04:05 UTC"
## [3] NA</code></pre>
<div class="sourceCode" id="cb1377"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># NA "2010-03-31 03:04:05 UTC" NA</span></span>
<span><span class="va">jan</span> <span class="op"><a href="https://lubridate.tidyverse.org/reference/mplus.html">%m+%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/weekday.POSIXt.html">months</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span> <span class="co"># No rollover</span></span></code></pre></div>
<pre><code>## [1] "2010-02-28 03:04:05 UTC" "2010-03-31 03:04:05 UTC"
## [3] "2010-04-30 03:04:05 UTC"</code></pre>
</div>
<div id="adding-with-rollback" class="section level3" number="24.5.8">
<h3>
<span class="header-section-number">24.5.8</span> Adding with Rollback<a class="anchor" aria-label="anchor" href="#adding-with-rollback"><i class="fas fa-link"></i></a>
</h3>
<p>One more function <code><a href="https://lubridate.tidyverse.org/reference/mplus.html">add_with_rollback()</a></code> which performs similarly, but has more control due to specific syntax-</p>
<pre><code>add_with_rollback(e1, e2, roll_to_first = FALSE, preserve_hms = TRUE)</code></pre>
<p>Example-</p>
<div class="sourceCode" id="cb1380"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd_hms.html">ymd_hms</a></span><span class="op">(</span><span class="st">"2019-01-29 01:02:03"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/mplus.html">add_with_rollback</a></span><span class="op">(</span><span class="va">x</span>, <span class="fu"><a href="https://rdrr.io/r/base/weekday.POSIXt.html">months</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "2019-02-28 01:02:03 UTC"</code></pre>
<div class="sourceCode" id="cb1382"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/mplus.html">add_with_rollback</a></span><span class="op">(</span><span class="va">x</span>, <span class="fu"><a href="https://rdrr.io/r/base/weekday.POSIXt.html">months</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span>, preserve_hms <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "2019-02-28 UTC"</code></pre>
<div class="sourceCode" id="cb1384"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/mplus.html">add_with_rollback</a></span><span class="op">(</span><span class="va">x</span>, <span class="fu"><a href="https://rdrr.io/r/base/weekday.POSIXt.html">months</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span>, roll_to_first <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "2019-03-01 01:02:03 UTC"</code></pre>
<div class="sourceCode" id="cb1386"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/mplus.html">add_with_rollback</a></span><span class="op">(</span><span class="va">x</span>, <span class="fu"><a href="https://rdrr.io/r/base/weekday.POSIXt.html">months</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span>, roll_to_first <span class="op">=</span> <span class="cn">TRUE</span>, preserve_hms <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "2019-03-01 UTC"</code></pre>
</div>
<div id="coercing-one-time-span-unit-to-another" class="section level3" number="24.5.9">
<h3>
<span class="header-section-number">24.5.9</span> Coercing one time span unit to another<a class="anchor" aria-label="anchor" href="#coercing-one-time-span-unit-to-another"><i class="fas fa-link"></i></a>
</h3>
<p>Time-span objects in lubridate can be coerced from one to another using coercing functions,</p>
<ul>
<li><code>as.period(x, unit)</code></li>
<li><code>as.duration(x)</code></li>
<li><code>as.interval(x, start)</code></li>
<li><code>make_difftime(x)</code></li>
</ul>
<p>Examples-</p>
<div class="sourceCode" id="cb1388"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># With Period - clock time</span></span>
<span><span class="op">(</span><span class="va">per</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/period.html">days</a></span><span class="op">(</span><span class="fl">31</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "31d 0H 0M 0S"</code></pre>
<div class="sourceCode" id="cb1390"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="va">int1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/as.interval.html">as.interval</a></span><span class="op">(</span><span class="va">per</span>, <span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd.html">dmy</a></span><span class="op">(</span><span class="st">"01022020"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] 2020-02-01 UTC--2020-03-03 UTC</code></pre>
<div class="sourceCode" id="cb1392"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># With Duration - physical time</span></span>
<span><span class="op">(</span><span class="va">dur</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/duration.html">ddays</a></span><span class="op">(</span><span class="fl">31</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "2678400s (~4.43 weeks)"</code></pre>
<div class="sourceCode" id="cb1394"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="va">int2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/as.interval.html">as.interval</a></span><span class="op">(</span><span class="va">dur</span>, <span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd.html">dmy</a></span><span class="op">(</span><span class="st">"01022020"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] 2020-02-01 UTC--2020-03-03 UTC</code></pre>
</div>
</div>
<div id="rounding-date-time-variables" class="section level2" number="24.6">
<h2>
<span class="header-section-number">24.6</span> Rounding date-time variables<a class="anchor" aria-label="anchor" href="#rounding-date-time-variables"><i class="fas fa-link"></i></a>
</h2>
<p>There are dedicated functions to round the dates as per specific requirements.</p>
<ul>
<li>
<code><a href="https://lubridate.tidyverse.org/reference/round_date.html">floor_date()</a></code> takes a date-time object and rounds it down to the nearest boundary of the specified time unit.</li>
<li>
<code><a href="https://lubridate.tidyverse.org/reference/round_date.html">ceiling_date()</a></code> takes a date-time object and rounds it up to the nearest boundary of the specified time unit.</li>
<li>
<code><a href="https://lubridate.tidyverse.org/reference/round_date.html">round_date()</a></code> takes a date-time object and time unit, and rounds it to the nearest value of the specified time unit.</li>
</ul>
<p>Examples-</p>
<div class="sourceCode" id="cb1396"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd_hms.html">ymd_hms</a></span><span class="op">(</span><span class="st">"2009-08-03 12:01:59.23"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/round_date.html">round_date</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">"month"</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "2009-08-01 UTC"</code></pre>
<div class="sourceCode" id="cb1398"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/round_date.html">round_date</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">"week"</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "2009-08-02 UTC"</code></pre>
<div class="sourceCode" id="cb1400"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/round_date.html">floor_date</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">"day"</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "2009-08-03 UTC"</code></pre>
<div class="sourceCode" id="cb1402"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/round_date.html">ceiling_date</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">"month"</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "2009-09-01 UTC"</code></pre>
<p>Three other functions helps rolling a date forward or backwards, as</p>
<ul>
<li>
<code><a href="https://lubridate.tidyverse.org/reference/rollbackward.html">rollbackward()</a></code> changes a date to the last day of the previous month or to the first day of the month.</li>
<li>
<code><a href="https://lubridate.tidyverse.org/reference/rollbackward.html">rollforward()</a></code> rolls to the last day of the current month or to the first day of the next month. Optionally, the new date can retain the same hour, minute, and second information.</li>
<li>
<code><a href="https://lubridate.tidyverse.org/reference/rollbackward.html">rollback()</a></code> is a synonym for <code><a href="https://lubridate.tidyverse.org/reference/rollbackward.html">rollbackward()</a></code>.</li>
</ul>
<p>See these examples-</p>
<div class="sourceCode" id="cb1404"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">date</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd_hms.html">ymd_hms</a></span><span class="op">(</span><span class="st">"2010-03-03 12:44:22"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/rollbackward.html">rollbackward</a></span><span class="op">(</span><span class="va">date</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "2010-02-28 12:44:22 UTC"</code></pre>
<div class="sourceCode" id="cb1406"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/rollbackward.html">rollbackward</a></span><span class="op">(</span><span class="va">date</span>, roll_to_first <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "2010-03-01 12:44:22 UTC"</code></pre>
<div class="sourceCode" id="cb1408"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/rollbackward.html">rollbackward</a></span><span class="op">(</span><span class="va">date</span>, preserve_hms <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "2010-02-28 UTC"</code></pre>
<div class="sourceCode" id="cb1410"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/rollbackward.html">rollbackward</a></span><span class="op">(</span><span class="va">date</span>, roll_to_first <span class="op">=</span> <span class="cn">TRUE</span>, preserve_hms <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "2010-03-01 UTC"</code></pre>
<div class="sourceCode" id="cb1412"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/rollbackward.html">rollforward</a></span><span class="op">(</span><span class="va">date</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "2010-03-31 12:44:22 UTC"</code></pre>
<div class="sourceCode" id="cb1414"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/rollbackward.html">rollforward</a></span><span class="op">(</span><span class="va">date</span>, roll_to_first <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "2010-04-01 12:44:22 UTC"</code></pre>
</div>
<div id="representing-date-and-date-times-in-cutomised-formats" class="section level2" number="24.7">
<h2>
<span class="header-section-number">24.7</span> Representing date and date-times in cutomised formats<a class="anchor" aria-label="anchor" href="#representing-date-and-date-times-in-cutomised-formats"><i class="fas fa-link"></i></a>
</h2>
<p>In all of the above sections, we saw that once R recognises a temporal object, it depicts that objects in a uniform format. See</p>
<div class="sourceCode" id="cb1416"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="va">date1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd.html">dmy</a></span><span class="op">(</span><span class="st">"01-01-2020"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "2020-01-01"</code></pre>
<div class="sourceCode" id="cb1418"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="va">date2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd.html">ymd</a></span><span class="op">(</span><span class="st">"2020/01/01"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "2020-01-01"</code></pre>
<div class="sourceCode" id="cb1420"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/character.html">as.character</a></span><span class="op">(</span><span class="va">date1</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "2020-01-01"</code></pre>
<p>In the output/console all dates print like a character/string. However, sometimes requirement is to have print dates in a specific customised format. In this scenario, function <code><a href="https://rdrr.io/r/base/strptime.html">strftime()</a></code> comes to our rescue which converts objects of classes “POSIXlt” and “POSIXct” representing calendar dates and times to specific character representation. Character codes can be used from the table <a href="lubridate.html#tab:lubri001">24.1</a> in section <a href="lubridate.html#strpp">24.1.9</a>.</p>
<p>See following examples-</p>
<div class="sourceCode" id="cb1422"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/strptime.html">strftime</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html">Sys.Date</a></span><span class="op">(</span><span class="op">)</span>, format <span class="op">=</span> <span class="st">"%d %B %Y"</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "30 August 2024"</code></pre>
<p>In this context, let’s also discuss about a special date stamping function in <code>lubridate</code> which can format date/time outputs based on human friendly formats. Functions <code><a href="https://lubridate.tidyverse.org/reference/stamp.html">stamp()</a></code>, <code>stamp_date</code> and <code><a href="https://lubridate.tidyverse.org/reference/stamp.html">stamp_time()</a></code> will create a function from the given template, which can be applied to date/time objects to re-format them. Example-</p>
<div class="sourceCode" id="cb1424"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">eclipse_dates</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd.html">dmy</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"11-7-2010"</span>, <span class="st">"13-11-2012"</span>, <span class="st">"3-11-2013"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">eclipse_stamp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/stamp.html">stamp_date</a></span><span class="op">(</span><span class="st">"There was a solar eclipse on January 13th, 1999"</span><span class="op">)</span></span>
<span><span class="fu">eclipse_stamp</span><span class="op">(</span><span class="va">eclipse_dates</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "There was a solar eclipse on July 11th, 2010"    
## [2] "There was a solar eclipse on November 13th, 2012"
## [3] "There was a solar eclipse on November 03th, 2013"</code></pre>
</div>
<div id="dates-in-ggplot2-visualisations" class="section level2" number="24.8">
<h2>
<span class="header-section-number">24.8</span> Dates in GGPLOT2 visualisations<a class="anchor" aria-label="anchor" href="#dates-in-ggplot2-visualisations"><i class="fas fa-link"></i></a>
</h2>
<p>Before concluding the chapter on date and time variables, it is important to learn the related functions to deal with impact of date and time formats on visualisations. Since we have already seen that, date and date-time variables are actually continuous variables with labels depicted in a specific formats, we have two <code>scale</code> functions in ggplot2 to deal with -</p>
<ul>
<li><code><a href="https://ggplot2.tidyverse.org/reference/scale_date.html">scale_x_date()</a></code></li>
<li><code><a href="https://ggplot2.tidyverse.org/reference/scale_date.html">scale_x_datetime()</a></code></li>
</ul>
<p>In these functions, we have <code>date_breaks</code> and <code>date_minor_breaks</code> arguments to position the breaks by date units. E.g. <code>date_breaks = "6 months"</code> will place major tick mark every six months.</p>
<p>Using another argument <code>date_labels</code> we can control the display of the labels in the plots. The values of the argument may be in <code>strptime</code> formats as we have already seen in <a href="lubridate.html#tab:lubri001">24.1</a> above.</p>
<p>Example-</p>
<div class="sourceCode" id="cb1426"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span>, warn.conflicts <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">economics</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">date</span>, <span class="va">uempmed</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_date.html">scale_x_date</a></span><span class="op">(</span>date_labels <span class="op">=</span> <span class="st">"%Y"</span>, </span>
<span>               date_breaks <span class="op">=</span> <span class="st">"5 years"</span>, </span>
<span>               date_minor_breaks <span class="op">=</span> <span class="st">"1 year"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">""</span>, y <span class="op">=</span> <span class="st">""</span><span class="op">)</span></span></code></pre></div>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:unnamed-chunk-417"></span>
<img src="DauR_files/figure-html/unnamed-chunk-417-1.png" alt="Use of Date Time Scale in ggplot2" width="672"><p class="caption">
Figure 24.1: Use of Date Time Scale in ggplot2
</p>
</div>
<hr>
</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="part-v-time-series.html">Part-V: Time Series</a></div>
<div class="next"><a href="time-series-analysis.html"><span class="header-section-number">25</span> Time Series Analysis</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#lubridate"><span class="header-section-number">24</span> Date and Time calculations</a></li>
<li>
<a class="nav-link" href="#base-r-classes-to-deal-with-date-and-time-variables"><span class="header-section-number">24.1</span> Base R classes to deal with date and time variables</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#dates"><span class="header-section-number">24.1.1</span> Dates</a></li>
<li><a class="nav-link" href="#timm"><span class="header-section-number">24.1.2</span> Times</a></li>
<li><a class="nav-link" href="#times-without-dates"><span class="header-section-number">24.1.3</span> Times (without dates)</a></li>
<li><a class="nav-link" href="#diffftime"><span class="header-section-number">24.1.4</span> Timespan</a></li>
<li><a class="nav-link" href="#time-zones"><span class="header-section-number">24.1.5</span> Time zones</a></li>
<li><a class="nav-link" href="#coercion"><span class="header-section-number">24.1.6</span> Coercion</a></li>
<li><a class="nav-link" href="#extracting-parts-from-datestimes"><span class="header-section-number">24.1.7</span> Extracting parts from dates/times</a></li>
<li><a class="nav-link" href="#other-useful-related-functions"><span class="header-section-number">24.1.8</span> Other useful related functions</a></li>
<li><a class="nav-link" href="#strpp"><span class="header-section-number">24.1.9</span> strptime character codes</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#using-lubridate-package-for-parsingcreating-dates"><span class="header-section-number">24.2</span> Using lubridate package for parsing/creating dates</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#datedate-time-objects-creation"><span class="header-section-number">24.2.1</span> Date/date-time objects creation</a></li>
<li><a class="nav-link" href="#parsing-datedate-time-objects-from-character"><span class="header-section-number">24.2.2</span> Parsing date/date-time objects from character</a></li>
<li><a class="nav-link" href="#parsing-datesdate-times-from-individual-conponents"><span class="header-section-number">24.2.3</span> Parsing dates/date-times from individual conponents</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#extracting-and-setting-datedate-time-components"><span class="header-section-number">24.3</span> Extracting and setting date/date-time components</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#extraction"><span class="header-section-number">24.3.1</span> Extraction</a></li>
<li><a class="nav-link" href="#setting-components"><span class="header-section-number">24.3.2</span> Setting Components</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#time-spans"><span class="header-section-number">24.4</span> Time spans</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#perriod"><span class="header-section-number">24.4.1</span> Periods</a></li>
<li><a class="nav-link" href="#durations"><span class="header-section-number">24.4.2</span> Durations</a></li>
<li><a class="nav-link" href="#intervals"><span class="header-section-number">24.4.3</span> Intervals</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#performing-calculations-on-intervalsdates"><span class="header-section-number">24.5</span> Performing calculations on intervals/dates</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#within-operator"><span class="header-section-number">24.5.1</span> %within% operator</a></li>
<li><a class="nav-link" href="#backward-intervals"><span class="header-section-number">24.5.2</span> Backward intervals</a></li>
<li><a class="nav-link" href="#flipping-intervals"><span class="header-section-number">24.5.3</span> Flipping intervals</a></li>
<li><a class="nav-link" href="#checking-alignment-of-two-intervals"><span class="header-section-number">24.5.4</span> Checking alignment of two intervals</a></li>
<li><a class="nav-link" href="#checking-overlap-in-two-intervals"><span class="header-section-number">24.5.5</span> Checking Overlap in two intervals</a></li>
<li><a class="nav-link" href="#length-of-the-interval"><span class="header-section-number">24.5.6</span> Length of the interval</a></li>
<li><a class="nav-link" href="#adding-months-without-exceeding-last-day-of-the-month."><span class="header-section-number">24.5.7</span> Adding Months without exceeding last day of the month.</a></li>
<li><a class="nav-link" href="#adding-with-rollback"><span class="header-section-number">24.5.8</span> Adding with Rollback</a></li>
<li><a class="nav-link" href="#coercing-one-time-span-unit-to-another"><span class="header-section-number">24.5.9</span> Coercing one time span unit to another</a></li>
</ul>
</li>
<li><a class="nav-link" href="#rounding-date-time-variables"><span class="header-section-number">24.6</span> Rounding date-time variables</a></li>
<li><a class="nav-link" href="#representing-date-and-date-times-in-cutomised-formats"><span class="header-section-number">24.7</span> Representing date and date-times in cutomised formats</a></li>
<li><a class="nav-link" href="#dates-in-ggplot2-visualisations"><span class="header-section-number">24.8</span> Dates in GGPLOT2 visualisations</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
          
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>R for Audit Analytics</strong>" was written by Anil Goyal. It was last built on 2024-08-30.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
