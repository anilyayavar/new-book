<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>Chapter 30 Regex in human readble format using rebus | R for Audit Analytics</title>

    <meta name="author" content="Anil Goyal" />
  
   <meta name="description" content="This book is intended for auditors performing exploratory data analytics using R programming language, mainly Base R and Tidyverse." />
   <meta name="generator" content="placeholder" />
  <meta property="og:title" content="Chapter 30 Regex in human readble format using rebus | R for Audit Analytics" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://anilyayavar.github.io/new-book/" />
  <meta property="og:image" content="https://anilyayavar.github.io/new-book/images/cover.jpg" />
  <meta property="og:description" content="This book is intended for auditors performing exploratory data analytics using R programming language, mainly Base R and Tidyverse." />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 30 Regex in human readble format using rebus | R for Audit Analytics" />
  
  <meta name="twitter:description" content="This book is intended for auditors performing exploratory data analytics using R programming language, mainly Base R and Tidyverse." />
  <meta name="twitter:image" content="https://anilyayavar.github.io/new-book/images/cover.jpg" />
  <!-- JS -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script>
  <script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script>
    <script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet" />
    <script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script>
    <script src="libs/bs3compat-0.8.0/transition.js"></script>
    <script src="libs/bs3compat-0.8.0/tabs.js"></script>
    <script src="libs/bs3compat-0.8.0/bs3compat.js"></script>
    <link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet" />
    <script src="libs/bs4_book-1.0.0/bs4_book.js"></script>
    <script src="libs/kePrint-0.0.1/kePrint.js"></script>
    <link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script>

  <!-- CSS -->
  <style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
    <style type="text/css">
    /* Used with Pandoc 2.11+ new --citeproc when CSL is used */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
          margin-bottom: 0em;
        }
    .hanging div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }
  </style>
      <link rel="stylesheet" href="style.css" />
  
</head>

<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book">
    <a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">R for Audit Analytics</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
      </form>

      <nav aria-label="Table of contents">
        <h2>Table of contents</h2>
        <div id="book-toc"></div>

        <div class="book-extra">
          <p><a id="book-repo" href="#">View book source <i class="fab fa-github"></i></a></li></p>
        </div>
      </nav>
    </div>
  </header>

  <main class="col-sm-12 col-md-9 col-lg-7" id="content">
<div id="regex-in-human-readble-format-using-rebus" class="section level1" number="30">
<h1><span class="header-section-number">Chapter 30</span> Regex in human readble format using <code>rebus</code></h1>
<p>Regular expressions, as explained in earlier chapter, are very powerful. However they are often difficult to interpret. There is a package called <code>rebus</code> in R, which allows us to build complex regular expressions from human readable expressions. So instead of writing <code>[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}</code> and later trying to decipher what this expression actually meant, we can use a more human-readble format -</p>
<pre><code>one_or_more(char_class(ASCII_ALNUM %R% &quot;._%+-&quot;)) %R%
  &quot;@&quot; %R%
  one_or_more(char_class(ASCII_ALNUM %R% &quot;.-&quot;)) %R%
  DOT %R%
  ascii_alpha(2, 4)</code></pre>
<p>Many of us could have by now correctly guessed that these both are regular expressions to detect email addresses from the given text strings. Rebus actually contains functions like <code>char_class()</code> or <code>one_or_more()</code> to make building regular expressions easier. So let’s dive in to learn the package.</p>
<p>First of all let’s load the library. Alongside let’s also load <code>stringr</code> so that we can use its function <code>str_view</code> to understand the examples. <strong>Readers may note here that this library <code>rebus</code> also contains a function <code>regex</code> which creates a conflict with <code>stringr::regex</code>. So to avoid that conflict we may use library <code>conflicted</code> here which may set our preferential library in case of conflicts.</strong></p>
<div class="sourceCode" id="cb1743"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1743-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1743-1" tabindex="-1"></a><span class="fu">library</span>(rebus)</span>
<span id="cb1743-2"><a href="regex-in-human-readble-format-using-rebus.html#cb1743-2" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb1743-3"><a href="regex-in-human-readble-format-using-rebus.html#cb1743-3" tabindex="-1"></a><span class="fu">library</span>(conflicted)</span>
<span id="cb1743-4"><a href="regex-in-human-readble-format-using-rebus.html#cb1743-4" tabindex="-1"></a><span class="fu">conflict_prefer</span>(<span class="st">&quot;regex&quot;</span>, <span class="st">&quot;stringr&quot;</span>)</span>
<span id="cb1743-5"><a href="regex-in-human-readble-format-using-rebus.html#cb1743-5" tabindex="-1"></a><span class="fu">conflicts_prefer</span>(rebus<span class="sc">::</span>or)</span></code></pre></div>
<div id="operators-for-concatenation-and-alternation" class="section level2" number="30.1">
<h2><span class="header-section-number">30.1</span> Operators for concatenation and alternation</h2>
<p>For concatenating two regular expressions we may use either of the operators <code>%R%</code> or <code>%c%</code> which like a pipe operator concatenates LHS and RHS together as one regular expression.</p>
<p>For alternation we may use either the operator <code>%|%</code> or function <code>or()</code> from the package which separates two regular expressions through a pipe for alternation.
Example-1:</p>
<div class="sourceCode" id="cb1744"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1744-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1744-1" tabindex="-1"></a>my_colors <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;red&quot;</span>, <span class="st">&quot;grey&quot;</span>, <span class="st">&quot;blue&quot;</span>, <span class="st">&quot;gray&quot;</span>)</span>
<span id="cb1744-2"><a href="regex-in-human-readble-format-using-rebus.html#cb1744-2" tabindex="-1"></a><span class="fu">str_view</span>(my_colors, <span class="st">&quot;gr&quot;</span> <span class="sc">%R%</span> <span class="fu">or</span>(<span class="st">&quot;a&quot;</span> , <span class="st">&quot;e&quot;</span>) <span class="sc">%R%</span> <span class="st">&quot;y&quot;</span>)</span></code></pre></div>
<pre><code>## [2] │ &lt;grey&gt;
## [4] │ &lt;gray&gt;</code></pre>
<div class="sourceCode" id="cb1746"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1746-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1746-1" tabindex="-1"></a><span class="co"># Note operator precedence</span></span>
<span id="cb1746-2"><a href="regex-in-human-readble-format-using-rebus.html#cb1746-2" tabindex="-1"></a><span class="co"># This actually means either &quot;gra&quot; or &quot;ey&quot;</span></span>
<span id="cb1746-3"><a href="regex-in-human-readble-format-using-rebus.html#cb1746-3" tabindex="-1"></a><span class="fu">str_view</span>(my_colors, <span class="st">&quot;gr&quot;</span> <span class="sc">%R%</span> <span class="st">&quot;a&quot;</span> <span class="sc">%|%</span> <span class="st">&quot;e&quot;</span> <span class="sc">%R%</span> <span class="st">&quot;y&quot;</span>)</span></code></pre></div>
<pre><code>## [2] │ gr&lt;ey&gt;
## [4] │ &lt;gra&gt;y</code></pre>
</div>
<div id="literal-characters-specvial-characters-and-case-sensitivity" class="section level2" number="30.2">
<h2><span class="header-section-number">30.2</span> Literal Characters, specvial characters and case sensitivity</h2>
<p>The literal characters may, as we learnt earlier, may be given in the string as they mean. Literals are case sensitive too. So if we want a case insensitive match, there is a function <code>case_insensitive</code> here which will take care of the requirement.</p>
<p>Example-2:</p>
<div class="sourceCode" id="cb1748"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1748-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1748-1" tabindex="-1"></a>ex_text <span class="ot">&lt;-</span> <span class="st">&quot;This is an example text.&quot;</span></span>
<span id="cb1748-2"><a href="regex-in-human-readble-format-using-rebus.html#cb1748-2" tabindex="-1"></a><span class="co"># Match literal `x`</span></span>
<span id="cb1748-3"><a href="regex-in-human-readble-format-using-rebus.html#cb1748-3" tabindex="-1"></a><span class="fu">str_view</span>(ex_text, <span class="st">&quot;X&quot;</span>, <span class="at">match =</span> <span class="cn">NA</span>)</span></code></pre></div>
<pre><code>## [1] │ This is an example text.</code></pre>
<div class="sourceCode" id="cb1750"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1750-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1750-1" tabindex="-1"></a><span class="fu">str_view</span>(ex_text, <span class="fu">case_insensitive</span>(<span class="st">&quot;X&quot;</span>), <span class="at">match =</span> <span class="cn">NA</span>)</span></code></pre></div>
<pre><code>## [1] │ This is an e&lt;x&gt;ample te&lt;x&gt;t.</code></pre>
<p>To match special characters which may have special meaning in regular expressions, we have constants here. In rebus, the constants are usually available in <code>UPPER CASE</code> and equivalent functions are available in <code>lower case</code>. The following special character constants are available -</p>
<div class="sourceCode" id="cb1752"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1752-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1752-1" tabindex="-1"></a>BACKSLASH</span></code></pre></div>
<pre><code>## &lt;regex&gt; \\</code></pre>
<div class="sourceCode" id="cb1754"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1754-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1754-1" tabindex="-1"></a>CARET</span></code></pre></div>
<pre><code>## &lt;regex&gt; \^</code></pre>
<div class="sourceCode" id="cb1756"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1756-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1756-1" tabindex="-1"></a>DOLLAR</span></code></pre></div>
<pre><code>## &lt;regex&gt; \$</code></pre>
<div class="sourceCode" id="cb1758"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1758-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1758-1" tabindex="-1"></a>DOT</span></code></pre></div>
<pre><code>## &lt;regex&gt; \.</code></pre>
<div class="sourceCode" id="cb1760"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1760-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1760-1" tabindex="-1"></a>PIPE</span></code></pre></div>
<pre><code>## &lt;regex&gt; \|</code></pre>
<div class="sourceCode" id="cb1762"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1762-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1762-1" tabindex="-1"></a>QUESTION</span></code></pre></div>
<pre><code>## &lt;regex&gt; \?</code></pre>
<div class="sourceCode" id="cb1764"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1764-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1764-1" tabindex="-1"></a>STAR</span></code></pre></div>
<pre><code>## &lt;regex&gt; \*</code></pre>
<div class="sourceCode" id="cb1766"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1766-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1766-1" tabindex="-1"></a>PLUS</span></code></pre></div>
<pre><code>## &lt;regex&gt; \+</code></pre>
<div class="sourceCode" id="cb1768"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1768-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1768-1" tabindex="-1"></a>OPEN_PAREN</span></code></pre></div>
<pre><code>## &lt;regex&gt; \(</code></pre>
<div class="sourceCode" id="cb1770"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1770-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1770-1" tabindex="-1"></a>CLOSE_PAREN</span></code></pre></div>
<pre><code>## &lt;regex&gt; \)</code></pre>
<div class="sourceCode" id="cb1772"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1772-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1772-1" tabindex="-1"></a>OPEN_BRACKET</span></code></pre></div>
<pre><code>## &lt;regex&gt; \[</code></pre>
<div class="sourceCode" id="cb1774"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1774-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1774-1" tabindex="-1"></a>CLOSE_BRACKET</span></code></pre></div>
<pre><code>## &lt;regex&gt; \]</code></pre>
<div class="sourceCode" id="cb1776"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1776-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1776-1" tabindex="-1"></a>OPEN_BRACE</span></code></pre></div>
<pre><code>## &lt;regex&gt; \{</code></pre>
<p>Example-3:</p>
<div class="sourceCode" id="cb1778"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1778-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1778-1" tabindex="-1"></a><span class="fu">str_view</span>(ex_text, DOT)</span></code></pre></div>
<pre><code>## [1] │ This is an example text&lt;.&gt;</code></pre>
</div>
<div id="metacharacters-1" class="section level2" number="30.3">
<h2><span class="header-section-number">30.3</span> Metacharacters</h2>
<div id="character-classes" class="section level3" number="30.3.1">
<h3><span class="header-section-number">30.3.1</span> Character classes</h3>
<p>To group characters together in a class to match any of them, we may use function <code>char_class()</code> in rebus package. See example-4:</p>
<div class="sourceCode" id="cb1780"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1780-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1780-1" tabindex="-1"></a>ex_vec <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Apple&quot;</span>, <span class="st">&quot;Orange&quot;</span>, <span class="st">&quot;Myrrh&quot;</span>)</span>
<span id="cb1780-2"><a href="regex-in-human-readble-format-using-rebus.html#cb1780-2" tabindex="-1"></a><span class="co"># matches a vowel</span></span>
<span id="cb1780-3"><a href="regex-in-human-readble-format-using-rebus.html#cb1780-3" tabindex="-1"></a><span class="fu">str_view</span>(ex_vec, <span class="fu">char_class</span>(<span class="st">&quot;aeiou&quot;</span>))</span></code></pre></div>
<pre><code>## [1] │ Appl&lt;e&gt;
## [2] │ Or&lt;a&gt;ng&lt;e&gt;</code></pre>
<div class="sourceCode" id="cb1782"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1782-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1782-1" tabindex="-1"></a><span class="co"># matches a vowel irrespective of case</span></span>
<span id="cb1782-2"><a href="regex-in-human-readble-format-using-rebus.html#cb1782-2" tabindex="-1"></a><span class="fu">str_view</span>(ex_vec, <span class="fu">case_insensitive</span>(<span class="fu">char_class</span>(<span class="st">&quot;aeiou&quot;</span>)))</span></code></pre></div>
<pre><code>## [1] │ &lt;A&gt;ppl&lt;e&gt;
## [2] │ &lt;O&gt;r&lt;a&gt;ng&lt;e&gt;</code></pre>
<p>To <strong>match a range of characters/numbers</strong> we separate these by hyphen in square brackets (in normal regex building). So, <code>char_class("a-d")</code> will match a character from range <code>[abcd]</code>.</p>
<p>Example-5:</p>
<div class="sourceCode" id="cb1784"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1784-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1784-1" tabindex="-1"></a>ex_text <span class="ot">&lt;-</span> <span class="st">&quot;The quick brown fox jumps over the lazy dog.&quot;</span></span>
<span id="cb1784-2"><a href="regex-in-human-readble-format-using-rebus.html#cb1784-2" tabindex="-1"></a><span class="co"># Match a, b or c in lower case</span></span>
<span id="cb1784-3"><a href="regex-in-human-readble-format-using-rebus.html#cb1784-3" tabindex="-1"></a><span class="fu">str_view</span>(ex_text, <span class="fu">char_class</span>(<span class="st">&quot;a-d&quot;</span>))</span></code></pre></div>
<pre><code>## [1] │ The qui&lt;c&gt;k &lt;b&gt;rown fox jumps over the l&lt;a&gt;zy &lt;d&gt;og.</code></pre>
<p>For negated character classes we again have an intuitively named function <code>negated_char_class()</code> in R, which we can use as per our requirement.</p>
<p>Example-6:</p>
<div class="sourceCode" id="cb1786"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1786-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1786-1" tabindex="-1"></a>ex_text <span class="ot">&lt;-</span> <span class="st">&quot;The quick brown fox jumps over the lazy dog.&quot;</span></span>
<span id="cb1786-2"><a href="regex-in-human-readble-format-using-rebus.html#cb1786-2" tabindex="-1"></a><span class="co"># Match all text except vowels</span></span>
<span id="cb1786-3"><a href="regex-in-human-readble-format-using-rebus.html#cb1786-3" tabindex="-1"></a><span class="fu">str_view</span>(ex_text, <span class="fu">negated_char_class</span>(<span class="st">&quot;aeiou&quot;</span>))</span></code></pre></div>
<pre><code>## [1] │ &lt;T&gt;&lt;h&gt;e&lt; &gt;&lt;q&gt;ui&lt;c&gt;&lt;k&gt;&lt; &gt;&lt;b&gt;&lt;r&gt;o&lt;w&gt;&lt;n&gt;&lt; &gt;&lt;f&gt;o&lt;x&gt;&lt; &gt;&lt;j&gt;u&lt;m&gt;&lt;p&gt;&lt;s&gt;&lt; &gt;o&lt;v&gt;e&lt;r&gt;&lt; &gt;&lt;t&gt;&lt;h&gt;e&lt; &gt;&lt;l&gt;a&lt;z&gt;&lt;y&gt;&lt; &gt;&lt;d&gt;o&lt;g&gt;&lt;.&gt;</code></pre>
<div class="sourceCode" id="cb1788"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1788-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1788-1" tabindex="-1"></a><span class="co"># Note that upper case and dot character have also been matched.</span></span></code></pre></div>
</div>
<div id="built-in-character-classes" class="section level3" number="30.3.2">
<h3><span class="header-section-number">30.3.2</span> Built-in Character classes</h3>
<p>We can also use <strong>pre-built character classes</strong> available in rebus, as listed below.</p>
<div class="sourceCode" id="cb1789"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1789-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1789-1" tabindex="-1"></a>ALPHA</span></code></pre></div>
<pre><code>## &lt;regex&gt; [:alpha:]</code></pre>
<div class="sourceCode" id="cb1791"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1791-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1791-1" tabindex="-1"></a>ALNUM</span></code></pre></div>
<pre><code>## &lt;regex&gt; [:alnum:]</code></pre>
<div class="sourceCode" id="cb1793"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1793-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1793-1" tabindex="-1"></a>BLANK</span></code></pre></div>
<pre><code>## &lt;regex&gt; [:blank:]</code></pre>
<div class="sourceCode" id="cb1795"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1795-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1795-1" tabindex="-1"></a>DIGIT</span></code></pre></div>
<pre><code>## &lt;regex&gt; [:digit:]</code></pre>
<div class="sourceCode" id="cb1797"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1797-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1797-1" tabindex="-1"></a>LOWER</span></code></pre></div>
<pre><code>## &lt;regex&gt; [:lower:]</code></pre>
<div class="sourceCode" id="cb1799"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1799-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1799-1" tabindex="-1"></a>PRINT</span></code></pre></div>
<pre><code>## &lt;regex&gt; [:print:]</code></pre>
<div class="sourceCode" id="cb1801"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1801-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1801-1" tabindex="-1"></a>PUNCT</span></code></pre></div>
<pre><code>## &lt;regex&gt; [:punct:]</code></pre>
<div class="sourceCode" id="cb1803"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1803-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1803-1" tabindex="-1"></a>SPACE</span></code></pre></div>
<pre><code>## &lt;regex&gt; [:space:]</code></pre>
<div class="sourceCode" id="cb1805"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1805-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1805-1" tabindex="-1"></a>UPPER</span></code></pre></div>
<pre><code>## &lt;regex&gt; [:upper:]</code></pre>
<div class="sourceCode" id="cb1807"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1807-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1807-1" tabindex="-1"></a>HEX_DIGIT</span></code></pre></div>
<pre><code>## &lt;regex&gt; [:xdigit:]</code></pre>
<div class="sourceCode" id="cb1809"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1809-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1809-1" tabindex="-1"></a>ANY_CHAR</span></code></pre></div>
<pre><code>## &lt;regex&gt; .</code></pre>
<div class="sourceCode" id="cb1811"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1811-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1811-1" tabindex="-1"></a>GRAPHEME</span></code></pre></div>
<pre><code>## &lt;regex&gt; \X</code></pre>
<div class="sourceCode" id="cb1813"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1813-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1813-1" tabindex="-1"></a>NEWLINE</span></code></pre></div>
<pre><code>## &lt;regex&gt; \R</code></pre>
<div class="sourceCode" id="cb1815"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1815-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1815-1" tabindex="-1"></a>DGT</span></code></pre></div>
<pre><code>## &lt;regex&gt; \d</code></pre>
<div class="sourceCode" id="cb1817"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1817-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1817-1" tabindex="-1"></a>WRD</span></code></pre></div>
<pre><code>## &lt;regex&gt; \w</code></pre>
<div class="sourceCode" id="cb1819"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1819-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1819-1" tabindex="-1"></a>SPC</span></code></pre></div>
<pre><code>## &lt;regex&gt; \s</code></pre>
<div class="sourceCode" id="cb1821"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1821-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1821-1" tabindex="-1"></a>NOT_DGT</span></code></pre></div>
<pre><code>## &lt;regex&gt; \D</code></pre>
<div class="sourceCode" id="cb1823"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1823-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1823-1" tabindex="-1"></a>NOT_WRD</span></code></pre></div>
<pre><code>## &lt;regex&gt; \W</code></pre>
<div class="sourceCode" id="cb1825"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1825-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1825-1" tabindex="-1"></a>NOT_SPC  <span class="co"># Equivalent to &quot;\\S&quot;</span></span></code></pre></div>
<pre><code>## &lt;regex&gt; \S</code></pre>
<div class="sourceCode" id="cb1827"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1827-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1827-1" tabindex="-1"></a>ASCII_DIGIT</span></code></pre></div>
<pre><code>## &lt;regex&gt; 0-9</code></pre>
<div class="sourceCode" id="cb1829"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1829-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1829-1" tabindex="-1"></a>ASCII_LOWER</span></code></pre></div>
<pre><code>## &lt;regex&gt; a-z</code></pre>
<div class="sourceCode" id="cb1831"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1831-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1831-1" tabindex="-1"></a>ASCII_UPPER</span></code></pre></div>
<pre><code>## &lt;regex&gt; A-Z</code></pre>
<div class="sourceCode" id="cb1833"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1833-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1833-1" tabindex="-1"></a>ASCII_ALPHA</span></code></pre></div>
<pre><code>## &lt;regex&gt; a-zA-Z</code></pre>
<div class="sourceCode" id="cb1835"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1835-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1835-1" tabindex="-1"></a>ASCII_ALNUM</span></code></pre></div>
<pre><code>## &lt;regex&gt; a-zA-Z0-9</code></pre>
<p>See another example.</p>
<p>Example-7:</p>
<div class="sourceCode" id="cb1837"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1837-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1837-1" tabindex="-1"></a>ex_text <span class="ot">&lt;-</span> <span class="st">&quot;The quick brown fox jumps over the lazy dog.&quot;</span></span>
<span id="cb1837-2"><a href="regex-in-human-readble-format-using-rebus.html#cb1837-2" tabindex="-1"></a><span class="co"># Match TAB or SPACE Characters</span></span>
<span id="cb1837-3"><a href="regex-in-human-readble-format-using-rebus.html#cb1837-3" tabindex="-1"></a><span class="fu">str_view</span>(ex_text, BLANK)</span></code></pre></div>
<pre><code>## [1] │ The&lt; &gt;quick&lt; &gt;brown&lt; &gt;fox&lt; &gt;jumps&lt; &gt;over&lt; &gt;the&lt; &gt;lazy&lt; &gt;dog.</code></pre>
<div class="sourceCode" id="cb1839"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1839-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1839-1" tabindex="-1"></a><span class="co"># Match all UPPER CASE characters</span></span>
<span id="cb1839-2"><a href="regex-in-human-readble-format-using-rebus.html#cb1839-2" tabindex="-1"></a><span class="fu">str_view</span>(ex_text, UPPER)</span></code></pre></div>
<pre><code>## [1] │ &lt;T&gt;he quick brown fox jumps over the lazy dog.</code></pre>
<p>Besides the afore-mentioned class constants, we have <code>lower case</code> equivalent functions for these character classes for a more useful regex building.</p>
<pre><code>alnum(lo, hi, char_class = TRUE)
alpha(lo, hi, char_class = TRUE)
blank(lo, hi, char_class = TRUE)
cntrl(lo, hi, char_class = TRUE)
digit(lo, hi, char_class = TRUE)
graph(lo, hi, char_class = TRUE)
lower(lo, hi, char_class = TRUE)
printable(lo, hi, char_class = TRUE)
punct(lo, hi, char_class = TRUE)
space(lo, hi, char_class = TRUE)
upper(lo, hi, char_class = TRUE)
hex_digit(lo, hi, char_class = TRUE)
any_char(lo, hi)
grapheme(lo, hi)
newline(lo, hi)
dgt(lo, hi, char_class = FALSE)
wrd(lo, hi, char_class = FALSE)
spc(lo, hi, char_class = FALSE)
not_dgt(lo, hi, char_class = FALSE)
not_wrd(lo, hi, char_class = FALSE)
not_spc(lo, hi, char_class = FALSE)
ascii_digit(lo, hi, char_class = TRUE)
ascii_lower(lo, hi, char_class = TRUE)
ascii_upper(lo, hi, char_class = TRUE)
ascii_alpha(lo, hi, char_class = TRUE)
ascii_alnum(lo, hi, char_class = TRUE)
char_range(lo, hi, char_class = lo &lt; hi)
number_range(lo, hi, allow_leading_zeroes = FALSE, capture = FALSE)</code></pre>
<p>In the above functions, both <code>lo</code> and <code>hi</code> accept positive integers as quantifiers; and <code>char_class</code> argument a logical value. See these examples.</p>
<p>Example-8:</p>
<div class="sourceCode" id="cb1842"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1842-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1842-1" tabindex="-1"></a>ip_add <span class="ot">&lt;-</span> <span class="st">&quot;My IP address is 255.1.2.50&quot;</span></span>
<span id="cb1842-2"><a href="regex-in-human-readble-format-using-rebus.html#cb1842-2" tabindex="-1"></a><span class="fu">str_view</span>(ip_add, <span class="fu">digit</span>(<span class="dv">1</span>, <span class="dv">3</span>))</span></code></pre></div>
<pre><code>## [1] │ My IP address is &lt;255&gt;.&lt;1&gt;.&lt;2&gt;.&lt;50&gt;</code></pre>
<div class="sourceCode" id="cb1844"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1844-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1844-1" tabindex="-1"></a><span class="fu">str_view</span>(ip_add, <span class="fu">digit</span>(<span class="dv">3</span>))</span></code></pre></div>
<pre><code>## [1] │ My IP address is &lt;255&gt;.1.2.50</code></pre>
<div class="sourceCode" id="cb1846"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1846-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1846-1" tabindex="-1"></a><span class="fu">str_view</span>(ip_add, <span class="fu">not_dgt</span>(<span class="dv">5</span>))</span></code></pre></div>
<pre><code>## [1] │ &lt;My IP&gt;&lt; addr&gt;&lt;ess i&gt;s 255.1.2.50</code></pre>
<div class="sourceCode" id="cb1848"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1848-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1848-1" tabindex="-1"></a><span class="co"># Note this will match none</span></span>
<span id="cb1848-2"><a href="regex-in-human-readble-format-using-rebus.html#cb1848-2" tabindex="-1"></a><span class="fu">str_view</span>(ip_add, <span class="fu">space</span>(<span class="dv">2</span>))</span></code></pre></div>
</div>
<div id="word-boundaries" class="section level3" number="30.3.3">
<h3><span class="header-section-number">30.3.3</span> Word Boundaries</h3>
<p>To match a word boundary (or its negation) we have <code>BOUNDARY</code> (and <code>NOT_BOUNDARY</code>) in rebus. Function <code>whole_word(x)</code>, on the other hand, wraps the regex in word boundary tokens to match a whole word. See following example.</p>
<p>Example-9:</p>
<div class="sourceCode" id="cb1849"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1849-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1849-1" tabindex="-1"></a>ex_text <span class="ot">&lt;-</span> <span class="st">&quot;The thermometer, they were searching is placed in a leather box.&quot;</span></span>
<span id="cb1849-2"><a href="regex-in-human-readble-format-using-rebus.html#cb1849-2" tabindex="-1"></a><span class="co"># Note three matches</span></span>
<span id="cb1849-3"><a href="regex-in-human-readble-format-using-rebus.html#cb1849-3" tabindex="-1"></a><span class="fu">str_view</span>(ex_text, <span class="st">&quot;the&quot;</span>)</span></code></pre></div>
<pre><code>## [1] │ The &lt;the&gt;rmometer, &lt;the&gt;y were searching is placed in a lea&lt;the&gt;r box.</code></pre>
<div class="sourceCode" id="cb1851"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1851-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1851-1" tabindex="-1"></a><span class="co"># There is no match</span></span>
<span id="cb1851-2"><a href="regex-in-human-readble-format-using-rebus.html#cb1851-2" tabindex="-1"></a><span class="fu">str_view</span>(ex_text, <span class="fu">whole_word</span>(<span class="st">&quot;the&quot;</span>), <span class="at">match =</span> <span class="cn">NA</span>)</span></code></pre></div>
<pre><code>## [1] │ The thermometer, they were searching is placed in a leather box.</code></pre>
<div class="sourceCode" id="cb1853"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1853-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1853-1" tabindex="-1"></a><span class="fu">str_view</span>(ex_text, <span class="fu">case_insensitive</span>(<span class="fu">whole_word</span>(<span class="st">&quot;the&quot;</span>)), <span class="at">match =</span> <span class="cn">NA</span>)</span></code></pre></div>
<pre><code>## [1] │ &lt;The&gt; thermometer, they were searching is placed in a leather box.</code></pre>
<div class="sourceCode" id="cb1855"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1855-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1855-1" tabindex="-1"></a><span class="fu">str_view</span>(ex_text, BOUNDARY <span class="sc">%R%</span> <span class="fu">case_insensitive</span>(<span class="st">&quot;the&quot;</span>))</span></code></pre></div>
<pre><code>## [1] │ &lt;The&gt; &lt;the&gt;rmometer, &lt;the&gt;y were searching is placed in a leather box.</code></pre>
<div class="sourceCode" id="cb1857"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1857-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1857-1" tabindex="-1"></a><span class="fu">str_view</span>(ex_text, NOT_BOUNDARY <span class="sc">%R%</span> <span class="st">&quot;the&quot;</span>)</span></code></pre></div>
<pre><code>## [1] │ The thermometer, they were searching is placed in a lea&lt;the&gt;r box.</code></pre>
</div>
</div>
<div id="quantifiers-1" class="section level2" number="30.4">
<h2><span class="header-section-number">30.4</span> Quantifiers</h2>
<p>We learnt following quantifiers in regular expressions.</p>
<ul>
<li><code>+</code> <strong>1 or more</strong> occurrences</li>
<li><code>*</code> <strong>0 or more</strong></li>
<li><code>?</code> <strong>0 or 1</strong></li>
<li><code>{}</code> specified numbers
<ul>
<li><code>{n}</code> exactly n</li>
<li><code>{n,}</code> n or more</li>
<li><code>{n,m}</code> between n and m</li>
</ul></li>
</ul>
<p>We have meaningfully named functions for each of the above quantifiers in rebus.</p>
<ul>
<li><code>one_or_more(x, char_class = NA)</code></li>
<li><code>zero_or_more(x, char_class = NA)</code></li>
<li><code>optional(x, char_class = NA)</code></li>
<li><code>repeated(x, lo, hi, lazy = FALSE, char_class = NA)</code>
<ul>
<li>where <code>lo</code> and <code>hi</code> represent <code>n</code> and <code>m</code> equivalently.</li>
</ul></li>
</ul>
<p>Additionally, we may notice an argument <code>char_class = NA</code> which accepts a logical value for case when <code>x</code> is required to be wrapped in a character class.</p>
<p>We may match two consecutive vowels using <code>repeated("aeiou", 2, char_class = TRUE)</code>. See this example.</p>
<p>Example-10:</p>
<div class="sourceCode" id="cb1859"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1859-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1859-1" tabindex="-1"></a>ex_vec <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;1 apple&quot;</span>, <span class="st">&quot;2 bananas&quot;</span>, <span class="st">&quot;3 pineapples&quot;</span>)</span>
<span id="cb1859-2"><a href="regex-in-human-readble-format-using-rebus.html#cb1859-2" tabindex="-1"></a><span class="co"># match two consecutive vowels</span></span>
<span id="cb1859-3"><a href="regex-in-human-readble-format-using-rebus.html#cb1859-3" tabindex="-1"></a><span class="fu">str_view</span>(ex_vec, <span class="fu">repeated</span>(<span class="st">&quot;aeiou&quot;</span>, <span class="dv">2</span>, <span class="at">char_class =</span> <span class="cn">TRUE</span>))</span></code></pre></div>
<pre><code>## [3] │ 3 pin&lt;ea&gt;pples</code></pre>
<div class="sourceCode" id="cb1861"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1861-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1861-1" tabindex="-1"></a><span class="co"># match a number followed by apple with an optional space</span></span>
<span id="cb1861-2"><a href="regex-in-human-readble-format-using-rebus.html#cb1861-2" tabindex="-1"></a><span class="fu">str_view</span>(ex_vec, <span class="fu">one_or_more</span>(DIGIT) <span class="sc">%R%</span> <span class="fu">optional</span>(BLANK) <span class="sc">%R%</span> <span class="st">&quot;apple&quot;</span>)</span></code></pre></div>
<pre><code>## [1] │ &lt;1 apple&gt;</code></pre>
</div>
<div id="anchors-1" class="section level2" number="30.5">
<h2><span class="header-section-number">30.5</span> Anchors</h2>
<p>Anchors in regular expressions allow us to match patterns at specific positions within the input string. In rebus, we have constants <code>START</code> and <code>END</code> to match the beginning or end positions within the input text, respectively.</p>
<p>Example-11:</p>
<div class="sourceCode" id="cb1863"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1863-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1863-1" tabindex="-1"></a>string <span class="ot">&lt;-</span> <span class="st">&quot;The quick brown fox jumps over the lazy dog. The fox is brown.&quot;</span></span>
<span id="cb1863-2"><a href="regex-in-human-readble-format-using-rebus.html#cb1863-2" tabindex="-1"></a><span class="fu">str_view</span>(string, START <span class="sc">%R%</span> <span class="fu">case_insensitive</span>(<span class="st">&quot;the&quot;</span>))</span></code></pre></div>
<pre><code>## [1] │ &lt;The&gt; quick brown fox jumps over the lazy dog. The fox is brown.</code></pre>
<p>In the above example, we are matching word <code>the</code> which is at the beginning of a sentence only. There is one more function <code>exactly(x)</code> in rebus which makes the regular expression match the whole string, from start to end, in fact a shortcut of <code>START %R% x %R% END</code>.</p>
<p>Example-12:</p>
<div class="sourceCode" id="cb1865"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1865-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1865-1" tabindex="-1"></a>ex_vec <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;apple&quot;</span>, <span class="st">&quot;banana&quot;</span>, <span class="st">&quot;cherry&quot;</span>, <span class="st">&quot;pineapple&quot;</span>)</span>
<span id="cb1865-2"><a href="regex-in-human-readble-format-using-rebus.html#cb1865-2" tabindex="-1"></a><span class="fu">str_view</span>(ex_vec, <span class="fu">exactly</span>(<span class="st">&quot;apple&quot;</span>))</span></code></pre></div>
<pre><code>## [1] │ &lt;apple&gt;</code></pre>
</div>
<div id="capture-groups-1" class="section level2" number="30.6">
<h2><span class="header-section-number">30.6</span> Capture Groups</h2>
<p>We have seen that a capture group is a way to group a part of a regular expression and capture it as a separate substring. This is useful when we want to extract or replace a specific part of a string. In R, capture groups are denoted by parentheses <code>()</code>. Anything inside the parentheses is captured and can be referenced later in the regular expression or in the replacement string. We also learnt that capturing groups are useful to refer back to it within a match with back reference: <code>\1</code> refers to the match contained in the first parenthesis, <code>\2</code> in the second parenthesis, and so on.</p>
<p>In rebus, there are two functions <code>capture(x)</code> and <code>group(x)</code> for capturing regex. Former is good with match functions while latter is mostly used with alternations.</p>
<p>Example-13:</p>
<div class="sourceCode" id="cb1867"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1867-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1867-1" tabindex="-1"></a><span class="do">## capture(x)</span></span>
<span id="cb1867-2"><a href="regex-in-human-readble-format-using-rebus.html#cb1867-2" tabindex="-1"></a>my_fruits <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;apple&#39;</span>, <span class="st">&#39;banana&#39;</span>, <span class="st">&#39;coconut&#39;</span>, <span class="st">&#39;berry&#39;</span>, <span class="st">&#39;cucumber&#39;</span>, <span class="st">&#39;date&#39;</span>)</span>
<span id="cb1867-3"><a href="regex-in-human-readble-format-using-rebus.html#cb1867-3" tabindex="-1"></a><span class="fu">str_remove_all</span>(my_fruits, <span class="fu">capture</span>(<span class="fu">char_class</span>(<span class="st">&quot;aeiou&quot;</span>)))</span></code></pre></div>
<pre><code>## [1] &quot;ppl&quot;   &quot;bnn&quot;   &quot;ccnt&quot;  &quot;brry&quot;  &quot;ccmbr&quot; &quot;dt&quot;</code></pre>
<div class="sourceCode" id="cb1869"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1869-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1869-1" tabindex="-1"></a><span class="do">## group()</span></span>
<span id="cb1869-2"><a href="regex-in-human-readble-format-using-rebus.html#cb1869-2" tabindex="-1"></a>my_toppings <span class="ot">&lt;-</span> <span class="fu">group</span>(<span class="st">&quot;olive&quot;</span> <span class="sc">%|%</span> <span class="st">&quot;mushroom&quot;</span> <span class="sc">%|%</span> <span class="st">&quot;tomato&quot;</span>)</span>
<span id="cb1869-3"><a href="regex-in-human-readble-format-using-rebus.html#cb1869-3" tabindex="-1"></a>pizza <span class="ot">&lt;-</span> <span class="st">&quot;We have olive, mushroom, chicken and capsicum pizza in our menu.&quot;</span></span>
<span id="cb1869-4"><a href="regex-in-human-readble-format-using-rebus.html#cb1869-4" tabindex="-1"></a><span class="co"># Extract my favourite topping from available pizza menu.</span></span>
<span id="cb1869-5"><a href="regex-in-human-readble-format-using-rebus.html#cb1869-5" tabindex="-1"></a><span class="fu">str_extract_all</span>(pizza, <span class="at">pattern =</span> my_toppings)</span></code></pre></div>
<pre><code>## [[1]]
## [1] &quot;olive&quot;    &quot;mushroom&quot;</code></pre>
<p>Backreferences for replacement operations, are denoted by constants <code>REF#</code> where <code>#</code> is actually a digit from 1 to 9.</p>
<p>Example-14:</p>
<div class="sourceCode" id="cb1871"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1871-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1871-1" tabindex="-1"></a>my_fruits <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;apple&#39;</span>, <span class="st">&#39;banana&#39;</span>, <span class="st">&#39;coconut&#39;</span>, <span class="st">&#39;berry&#39;</span>, <span class="st">&#39;cucumber&#39;</span>, <span class="st">&#39;date&#39;</span>)</span>
<span id="cb1871-2"><a href="regex-in-human-readble-format-using-rebus.html#cb1871-2" tabindex="-1"></a><span class="co"># search for repeated alphabet</span></span>
<span id="cb1871-3"><a href="regex-in-human-readble-format-using-rebus.html#cb1871-3" tabindex="-1"></a><span class="fu">str_view</span>(my_fruits, <span class="fu">capture</span>(ANY_CHAR) <span class="sc">%R%</span> REF1 , <span class="at">match =</span> <span class="cn">NA</span>)</span></code></pre></div>
<pre><code>## [1] │ a&lt;pp&gt;le
## [2] │ banana
## [3] │ coconut
## [4] │ be&lt;rr&gt;y
## [5] │ cucumber
## [6] │ date</code></pre>
<p>Similar to previous chapter, we can use capturing group to replace the pattern with something else.</p>
<p>Example-15:</p>
<div class="sourceCode" id="cb1873"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1873-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1873-1" tabindex="-1"></a><span class="co"># We have names in last_name, first_name format</span></span>
<span id="cb1873-2"><a href="regex-in-human-readble-format-using-rebus.html#cb1873-2" tabindex="-1"></a>names <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;Hanks, Tom&#39;</span>, <span class="st">&#39;Affleck, Ben&#39;</span>, <span class="st">&#39;Damon, Matt&#39;</span>)</span>
<span id="cb1873-3"><a href="regex-in-human-readble-format-using-rebus.html#cb1873-3" tabindex="-1"></a><span class="fu">str_view</span>(names)</span></code></pre></div>
<pre><code>## [1] │ Hanks, Tom
## [2] │ Affleck, Ben
## [3] │ Damon, Matt</code></pre>
<div class="sourceCode" id="cb1875"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1875-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1875-1" tabindex="-1"></a><span class="co"># Pattern to capture first name and last name</span></span>
<span id="cb1875-2"><a href="regex-in-human-readble-format-using-rebus.html#cb1875-2" tabindex="-1"></a>pat <span class="ot">&lt;-</span> <span class="fu">capture</span>(<span class="fu">whole_word</span>(<span class="fu">one_or_more</span>(ALPHA))) <span class="sc">%R%</span> <span class="st">&quot;,&quot;</span> <span class="sc">%R%</span> <span class="fu">optional</span>(SPACE) <span class="sc">%R%</span> <span class="fu">capture</span>(<span class="fu">whole_word</span>(<span class="fu">one_or_more</span>(ALPHA)))</span>
<span id="cb1875-3"><a href="regex-in-human-readble-format-using-rebus.html#cb1875-3" tabindex="-1"></a>repl <span class="ot">&lt;-</span> REF2 <span class="sc">%R%</span> <span class="st">&quot; &quot;</span> <span class="sc">%R%</span> REF1</span>
<span id="cb1875-4"><a href="regex-in-human-readble-format-using-rebus.html#cb1875-4" tabindex="-1"></a><span class="co"># Using this regex, we can convert these to first_name last_name format</span></span>
<span id="cb1875-5"><a href="regex-in-human-readble-format-using-rebus.html#cb1875-5" tabindex="-1"></a><span class="fu">str_replace_all</span>(names, pat, repl)</span></code></pre></div>
<pre><code>## [1] &quot;Tom Hanks&quot;   &quot;Ben Affleck&quot; &quot;Matt Damon&quot;</code></pre>
</div>
<div id="lookarounds-1" class="section level2" number="30.7">
<h2><span class="header-section-number">30.7</span> Lookarounds</h2>
<p>As we had learnt, <strong>lookaheads</strong> and <strong>lookbehinds</strong> are zero-width assertions in regex. They are used to match a pattern only if it is followed or preceded by another pattern, respectively. The pattern in the <code>lookahead</code> or <code>lookbehind</code> is not included in the match.</p>
<p>We have intuitively named functions to deal with all four lookarounds-</p>
<pre><code>lookahead(x)
negative_lookahead(x)
lookbehind(x)
negative_lookbehind(x)</code></pre>
<p>Example-16: Find character <code>q</code> not followed by <code>u</code></p>
<div class="sourceCode" id="cb1878"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1878-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1878-1" tabindex="-1"></a>countries <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;mozambique&quot;</span>, <span class="st">&quot;qatar&quot;</span>, <span class="st">&quot;iraq&quot;</span>)</span>
<span id="cb1878-2"><a href="regex-in-human-readble-format-using-rebus.html#cb1878-2" tabindex="-1"></a><span class="co"># With lookahead</span></span>
<span id="cb1878-3"><a href="regex-in-human-readble-format-using-rebus.html#cb1878-3" tabindex="-1"></a><span class="fu">str_view</span>(countries, <span class="st">&quot;q&quot;</span> <span class="sc">%R%</span> <span class="fu">negative_lookahead</span>(<span class="st">&quot;u&quot;</span>))</span></code></pre></div>
<pre><code>## [2] │ &lt;q&gt;atar
## [3] │ ira&lt;q&gt;</code></pre>
<div class="sourceCode" id="cb1880"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1880-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1880-1" tabindex="-1"></a><span class="co"># Without Lookahaed - Notice the difference</span></span>
<span id="cb1880-2"><a href="regex-in-human-readble-format-using-rebus.html#cb1880-2" tabindex="-1"></a><span class="fu">str_view</span>(countries, <span class="st">&quot;q&quot;</span> <span class="sc">%R%</span> <span class="fu">negated_char_class</span>(<span class="st">&quot;u&quot;</span>))</span></code></pre></div>
<pre><code>## [2] │ &lt;qa&gt;tar</code></pre>
<p>Example-17:</p>
<div class="sourceCode" id="cb1882"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1882-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1882-1" tabindex="-1"></a><span class="co"># Lookahead</span></span>
<span id="cb1882-2"><a href="regex-in-human-readble-format-using-rebus.html#cb1882-2" tabindex="-1"></a>string <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;hello world&quot;</span>, <span class="st">&quot;hello there world&quot;</span>, <span class="st">&quot;hello&quot;</span>)</span>
<span id="cb1882-3"><a href="regex-in-human-readble-format-using-rebus.html#cb1882-3" tabindex="-1"></a><span class="fu">str_view</span>(string, <span class="st">&quot;hello&quot;</span> <span class="sc">%R%</span> <span class="fu">lookahead</span>(<span class="fu">optional</span>(SPACE) <span class="sc">%R%</span> <span class="st">&quot;world&quot;</span>), <span class="at">match =</span> <span class="cn">NA</span>)</span></code></pre></div>
<pre><code>## [1] │ &lt;hello&gt; world
## [2] │ hello there world
## [3] │ hello</code></pre>
<div class="sourceCode" id="cb1884"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1884-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1884-1" tabindex="-1"></a><span class="co"># Note that &quot;world&quot; is not included in the match</span></span>
<span id="cb1884-2"><a href="regex-in-human-readble-format-using-rebus.html#cb1884-2" tabindex="-1"></a></span>
<span id="cb1884-3"><a href="regex-in-human-readble-format-using-rebus.html#cb1884-3" tabindex="-1"></a><span class="co"># Lookbehind</span></span>
<span id="cb1884-4"><a href="regex-in-human-readble-format-using-rebus.html#cb1884-4" tabindex="-1"></a><span class="fu">str_view</span>(string, <span class="fu">lookbehind</span>(<span class="st">&quot;hello&quot;</span> <span class="sc">%R%</span> <span class="fu">optional</span>(SPACE)) <span class="sc">%R%</span> <span class="st">&quot;world&quot;</span>, <span class="at">match =</span> <span class="cn">NA</span>)</span></code></pre></div>
<pre><code>## [1] │ hello &lt;world&gt;
## [2] │ hello there world
## [3] │ hello</code></pre>
<div class="sourceCode" id="cb1886"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1886-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1886-1" tabindex="-1"></a><span class="co"># Negative lookahead</span></span>
<span id="cb1886-2"><a href="regex-in-human-readble-format-using-rebus.html#cb1886-2" tabindex="-1"></a><span class="fu">str_view</span>(string, <span class="st">&quot;hello&quot;</span> <span class="sc">%R%</span> <span class="fu">negative_lookahead</span>(<span class="fu">optional</span>(SPACE) <span class="sc">%R%</span> <span class="st">&quot;world&quot;</span>), <span class="at">match =</span> <span class="cn">NA</span>)</span></code></pre></div>
<pre><code>## [1] │ hello world
## [2] │ &lt;hello&gt; there world
## [3] │ &lt;hello&gt;</code></pre>
<div class="sourceCode" id="cb1888"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1888-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1888-1" tabindex="-1"></a><span class="co"># Negative lookbehind</span></span>
<span id="cb1888-2"><a href="regex-in-human-readble-format-using-rebus.html#cb1888-2" tabindex="-1"></a><span class="fu">str_view</span>(string, <span class="fu">negative_lookbehind</span>(<span class="st">&quot;hello&quot;</span> <span class="sc">%R%</span> <span class="fu">optional</span>(SPACE)) <span class="sc">%R%</span> <span class="st">&quot;world&quot;</span>, <span class="at">match =</span> <span class="cn">NA</span>)</span></code></pre></div>
<pre><code>## [1] │ hello world
## [2] │ hello there &lt;world&gt;
## [3] │ hello</code></pre>
<p>More examples.</p>
<p>Example-18:</p>
<div class="sourceCode" id="cb1890"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1890-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1890-1" tabindex="-1"></a>string <span class="ot">&lt;-</span> <span class="st">&quot;I have 10 apples, 6 pineapples and 5 bananas&quot;</span></span>
<span id="cb1890-2"><a href="regex-in-human-readble-format-using-rebus.html#cb1890-2" tabindex="-1"></a></span>
<span id="cb1890-3"><a href="regex-in-human-readble-format-using-rebus.html#cb1890-3" tabindex="-1"></a><span class="co"># lookahead to match count of apples</span></span>
<span id="cb1890-4"><a href="regex-in-human-readble-format-using-rebus.html#cb1890-4" tabindex="-1"></a>pattern1 <span class="ot">&lt;-</span> <span class="fu">one_or_more</span>(DIGIT) <span class="sc">%R%</span> <span class="fu">lookahead</span>(<span class="fu">optional</span>(SPACE) <span class="sc">%R%</span> <span class="st">&quot;apple&quot;</span>) </span>
<span id="cb1890-5"><a href="regex-in-human-readble-format-using-rebus.html#cb1890-5" tabindex="-1"></a><span class="co"># How many apples?</span></span>
<span id="cb1890-6"><a href="regex-in-human-readble-format-using-rebus.html#cb1890-6" tabindex="-1"></a><span class="fu">str_view</span>(<span class="at">string =</span> string, <span class="at">pattern =</span> pattern1, <span class="at">match =</span> <span class="cn">NA</span>)</span></code></pre></div>
<pre><code>## [1] │ I have &lt;10&gt; apples, 6 pineapples and 5 bananas</code></pre>
</div>
<div id="some-useful-regex-functions" class="section level2" number="30.8">
<h2><span class="header-section-number">30.8</span> Some useful regex functions</h2>
<div id="matching-valid-dates" class="section level3" number="30.8.1">
<h3><span class="header-section-number">30.8.1</span> Matching valid dates</h3>
<div class="sourceCode" id="cb1892"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1892-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1892-1" tabindex="-1"></a><span class="co"># Individual date-time components</span></span>
<span id="cb1892-2"><a href="regex-in-human-readble-format-using-rebus.html#cb1892-2" tabindex="-1"></a>DTSEP             <span class="co"># optional selected punctuation or space</span></span></code></pre></div>
<pre><code>## &lt;regex&gt; [-/.:,\ ]?</code></pre>
<div class="sourceCode" id="cb1894"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1894-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1894-1" tabindex="-1"></a>CENTURY           <span class="co"># exactly two digits</span></span></code></pre></div>
<pre><code>## &lt;regex&gt; [0-9]{2}</code></pre>
<div class="sourceCode" id="cb1896"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1896-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1896-1" tabindex="-1"></a>YEAR              <span class="co"># one to four digits</span></span></code></pre></div>
<pre><code>## &lt;regex&gt; [0-9]{1,4}</code></pre>
<div class="sourceCode" id="cb1898"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1898-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1898-1" tabindex="-1"></a>YEAR2             <span class="co"># exactly two digits</span></span></code></pre></div>
<pre><code>## &lt;regex&gt; [0-9]{2}</code></pre>
<div class="sourceCode" id="cb1900"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1900-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1900-1" tabindex="-1"></a>YEAR4             <span class="co"># exactly four digits</span></span></code></pre></div>
<pre><code>## &lt;regex&gt; [0-9]{4}</code></pre>
<div class="sourceCode" id="cb1902"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1902-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1902-1" tabindex="-1"></a>MONTH             <span class="co"># number from 1 to 12, leading zero</span></span></code></pre></div>
<pre><code>## &lt;regex&gt; (?:0[1-9]|1[0-2])</code></pre>
<div class="sourceCode" id="cb1904"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1904-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1904-1" tabindex="-1"></a>WEEK_OF_YEAR      <span class="co"># number from 0 to 53, leading zero</span></span></code></pre></div>
<pre><code>## &lt;regex&gt; (?:[0-4][0-9]|5[0-3])</code></pre>
<div class="sourceCode" id="cb1906"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1906-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1906-1" tabindex="-1"></a>DAY               <span class="co"># number from 1 to 31, leading zero</span></span></code></pre></div>
<pre><code>## &lt;regex&gt; (?:0[1-9]|[12][0-9]|3[01])</code></pre>
<div class="sourceCode" id="cb1908"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1908-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1908-1" tabindex="-1"></a>DAY_SINGLE        <span class="co"># leading space</span></span></code></pre></div>
<pre><code>## &lt;regex&gt; (?: [1-9]|[12][0-9]|3[01])</code></pre>
<div class="sourceCode" id="cb1910"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1910-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1910-1" tabindex="-1"></a>HOUR24            <span class="co"># 24 hour clock, leading zero</span></span></code></pre></div>
<pre><code>## &lt;regex&gt; (?:[01][0-9]|2[0-3])</code></pre>
<div class="sourceCode" id="cb1912"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1912-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1912-1" tabindex="-1"></a>HOUR12            <span class="co"># 12 hour clock, leading zero</span></span></code></pre></div>
<pre><code>## &lt;regex&gt; (?:0[1-9]|1[0-2])</code></pre>
<div class="sourceCode" id="cb1914"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1914-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1914-1" tabindex="-1"></a>HOUR24_SINGLE     <span class="co"># 24 hour clock, leading space</span></span></code></pre></div>
<pre><code>## &lt;regex&gt; (?:[ 1][0-9]|2[0-3])</code></pre>
<div class="sourceCode" id="cb1916"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1916-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1916-1" tabindex="-1"></a>HOUR12_SINGLE     <span class="co"># 12 hour clock, leading space</span></span></code></pre></div>
<pre><code>## &lt;regex&gt; (?: [1-9]|1[0-2])</code></pre>
<div class="sourceCode" id="cb1918"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1918-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1918-1" tabindex="-1"></a>MINUTE            <span class="co"># number from 0 to 59, leading zero</span></span></code></pre></div>
<pre><code>## &lt;regex&gt; [0-5][0-9]</code></pre>
<div class="sourceCode" id="cb1920"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1920-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1920-1" tabindex="-1"></a>SECOND            <span class="co"># number from 0 to 61 (leap seconds), leading zero</span></span></code></pre></div>
<pre><code>## &lt;regex&gt; (?:[0-5][0-9]|6[01])</code></pre>
<div class="sourceCode" id="cb1922"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1922-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1922-1" tabindex="-1"></a>FRACTIONAL_SECOND <span class="co"># a second optional decimal point and up to 6 digits</span></span></code></pre></div>
<pre><code>## &lt;regex&gt; (?:[0-5][0-9]|6[01])(?:[.,][0-9]{1,6})?</code></pre>
<div class="sourceCode" id="cb1924"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1924-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1924-1" tabindex="-1"></a>AM_PM             <span class="co"># AM or PM, any case</span></span></code></pre></div>
<pre><code>## &lt;regex&gt; (?:am|AM|pm|PM)</code></pre>
<div class="sourceCode" id="cb1926"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1926-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1926-1" tabindex="-1"></a>TIMEZONE_OFFSET   <span class="co"># optional plus or minus, then four digits</span></span></code></pre></div>
<pre><code>## &lt;regex&gt; [-+]?[0-9]{4}</code></pre>
<div class="sourceCode" id="cb1928"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1928-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1928-1" tabindex="-1"></a>TIMEZONE          <span class="co"># Any value returned by OlsonNames()</span></span></code></pre></div>
<pre><code>## &lt;regex&gt; (?:Africa/Abidjan|Africa/Accra|Africa/Addis_Ababa|Africa/Algiers|Africa/Asmara|Africa/Asmera|Africa/Bamako|Africa/Bangui|Africa/Banjul|Africa/Bissau|Africa/Blantyre|Africa/Brazzaville|Africa/Bujumbura|Africa/Cairo|Africa/Casablanca|Africa/Ceuta|Africa/Conakry|Africa/Dakar|Africa/Dar_es_Salaam|Africa/Djibouti|Africa/Douala|Africa/El_Aaiun|Africa/Freetown|Africa/Gaborone|Africa/Harare|Africa/Johannesburg|Africa/Juba|Africa/Kampala|Africa/Khartoum|Africa/Kigali|Africa/Kinshasa|Africa/Lagos|Africa/Libreville|Africa/Lome|Africa/Luanda|Africa/Lubumbashi|Africa/Lusaka|Africa/Malabo|Africa/Maputo|Africa/Maseru|Africa/Mbabane|Africa/Mogadishu|Africa/Monrovia|Africa/Nairobi|Africa/Ndjamena|Africa/Niamey|Africa/Nouakchott|Africa/Ouagadougou|Africa/Porto-Novo|Africa/Sao_Tome|Africa/Timbuktu|Africa/Tripoli|Africa/Tunis|Africa/Windhoek|America/Adak|America/Anchorage|America/Anguilla|America/Antigua|America/Araguaina|America/Argentina/Buenos_Aires|America/Argentina/Catamarca|America/Argentina/ComodRivadavia|America/Argentina/Cordoba|America/Argentina/Jujuy|America/Argentina/La_Rioja|America/Argentina/Mendoza|America/Argentina/Rio_Gallegos|America/Argentina/Salta|America/Argentina/San_Juan|America/Argentina/San_Luis|America/Argentina/Tucuman|America/Argentina/Ushuaia|America/Aruba|America/Asuncion|America/Atikokan|America/Atka|America/Bahia|America/Bahia_Banderas|America/Barbados|America/Belem|America/Belize|America/Blanc-Sablon|America/Boa_Vista|America/Bogota|America/Boise|America/Buenos_Aires|America/Cambridge_Bay|America/Campo_Grande|America/Cancun|America/Caracas|America/Catamarca|America/Cayenne|America/Cayman|America/Chicago|America/Chihuahua|America/Ciudad_Juarez|America/Coral_Harbour|America/Cordoba|America/Costa_Rica|America/Creston|America/Cuiaba|America/Curacao|America/Danmarkshavn|America/Dawson|America/Dawson_Creek|America/Denver|America/Detroit|America/Dominica|America/Edmonton|America/Eirunepe|America/El_Salvador|America/Ensenada|America/Fort_Nelson|America/Fort_Wayne|America/Fortaleza|America/Glace_Bay|America/Godthab|America/Goose_Bay|America/Grand_Turk|America/Grenada|America/Guadeloupe|America/Guatemala|America/Guayaquil|America/Guyana|America/Halifax|America/Havana|America/Hermosillo|America/Indiana/Indianapolis|America/Indiana/Knox|America/Indiana/Marengo|America/Indiana/Petersburg|America/Indiana/Tell_City|America/Indiana/Vevay|America/Indiana/Vincennes|America/Indiana/Winamac|America/Indianapolis|America/Inuvik|America/Iqaluit|America/Jamaica|America/Jujuy|America/Juneau|America/Kentucky/Louisville|America/Kentucky/Monticello|America/Knox_IN|America/Kralendijk|America/La_Paz|America/Lima|America/Los_Angeles|America/Louisville|America/Lower_Princes|America/Maceio|America/Managua|America/Manaus|America/Marigot|America/Martinique|America/Matamoros|America/Mazatlan|America/Mendoza|America/Menominee|America/Merida|America/Metlakatla|America/Mexico_City|America/Miquelon|America/Moncton|America/Monterrey|America/Montevideo|America/Montreal|America/Montserrat|America/Nassau|America/New_York|America/Nipigon|America/Nome|America/Noronha|America/North_Dakota/Beulah|America/North_Dakota/Center|America/North_Dakota/New_Salem|America/Nuuk|America/Ojinaga|America/Panama|America/Pangnirtung|America/Paramaribo|America/Phoenix|America/Port-au-Prince|America/Port_of_Spain|America/Porto_Acre|America/Porto_Velho|America/Puerto_Rico|America/Punta_Arenas|America/Rainy_River|America/Rankin_Inlet|America/Recife|America/Regina|America/Resolute|America/Rio_Branco|America/Rosario|America/Santa_Isabel|America/Santarem|America/Santiago|America/Santo_Domingo|America/Sao_Paulo|America/Scoresbysund|America/Shiprock|America/Sitka|America/St_Barthelemy|America/St_Johns|America/St_Kitts|America/St_Lucia|America/St_Thomas|America/St_Vincent|America/Swift_Current|America/Tegucigalpa|America/Thule|America/Thunder_Bay|America/Tijuana|America/Toronto|America/Tortola|America/Vancouver|America/Virgin|America/Whitehorse|America/Winnipeg|America/Yakutat|America/Yellowknife|Antarctica/Casey|Antarctica/Davis|Antarctica/DumontDUrville|Antarctica/Macquarie|Antarctica/Mawson|Antarctica/McMurdo|Antarctica/Palmer|Antarctica/Rothera|Antarctica/South_Pole|Antarctica/Syowa|Antarctica/Troll|Antarctica/Vostok|Arctic/Longyearbyen|Asia/Aden|Asia/Almaty|Asia/Amman|Asia/Anadyr|Asia/Aqtau|Asia/Aqtobe|Asia/Ashgabat|Asia/Ashkhabad|Asia/Atyrau|Asia/Baghdad|Asia/Bahrain|Asia/Baku|Asia/Bangkok|Asia/Barnaul|Asia/Beirut|Asia/Bishkek|Asia/Brunei|Asia/Calcutta|Asia/Chita|Asia/Choibalsan|Asia/Chongqing|Asia/Chungking|Asia/Colombo|Asia/Dacca|Asia/Damascus|Asia/Dhaka|Asia/Dili|Asia/Dubai|Asia/Dushanbe|Asia/Famagusta|Asia/Gaza|Asia/Harbin|Asia/Hebron|Asia/Ho_Chi_Minh|Asia/Hong_Kong|Asia/Hovd|Asia/Irkutsk|Asia/Istanbul|Asia/Jakarta|Asia/Jayapura|Asia/Jerusalem|Asia/Kabul|Asia/Kamchatka|Asia/Karachi|Asia/Kashgar|Asia/Kathmandu|Asia/Katmandu|Asia/Khandyga|Asia/Kolkata|Asia/Krasnoyarsk|Asia/Kuala_Lumpur|Asia/Kuching|Asia/Kuwait|Asia/Macao|Asia/Macau|Asia/Magadan|Asia/Makassar|Asia/Manila|Asia/Muscat|Asia/Nicosia|Asia/Novokuznetsk|Asia/Novosibirsk|Asia/Omsk|Asia/Oral|Asia/Phnom_Penh|Asia/Pontianak|Asia/Pyongyang|Asia/Qatar|Asia/Qostanay|Asia/Qyzylorda|Asia/Rangoon|Asia/Riyadh|Asia/Saigon|Asia/Sakhalin|Asia/Samarkand|Asia/Seoul|Asia/Shanghai|Asia/Singapore|Asia/Srednekolymsk|Asia/Taipei|Asia/Tashkent|Asia/Tbilisi|Asia/Tehran|Asia/Tel_Aviv|Asia/Thimbu|Asia/Thimphu|Asia/Tokyo|Asia/Tomsk|Asia/Ujung_Pandang|Asia/Ulaanbaatar|Asia/Ulan_Bator|Asia/Urumqi|Asia/Ust-Nera|Asia/Vientiane|Asia/Vladivostok|Asia/Yakutsk|Asia/Yangon|Asia/Yekaterinburg|Asia/Yerevan|Atlantic/Azores|Atlantic/Bermuda|Atlantic/Canary|Atlantic/Cape_Verde|Atlantic/Faeroe|Atlantic/Faroe|Atlantic/Jan_Mayen|Atlantic/Madeira|Atlantic/Reykjavik|Atlantic/South_Georgia|Atlantic/St_Helena|Atlantic/Stanley|Australia/ACT|Australia/Adelaide|Australia/Brisbane|Australia/Broken_Hill|Australia/Canberra|Australia/Currie|Australia/Darwin|Australia/Eucla|Australia/Hobart|Australia/LHI|Australia/Lindeman|Australia/Lord_Howe|Australia/Melbourne|Australia/NSW|Australia/North|Australia/Perth|Australia/Queensland|Australia/South|Australia/Sydney|Australia/Tasmania|Australia/Victoria|Australia/West|Australia/Yancowinna|Brazil/Acre|Brazil/DeNoronha|Brazil/East|Brazil/West|CET|CST6CDT|Canada/Atlantic|Canada/Central|Canada/Eastern|Canada/Mountain|Canada/Newfoundland|Canada/Pacific|Canada/Saskatchewan|Canada/Yukon|Chile/Continental|Chile/EasterIsland|Cuba|EET|EST|EST5EDT|Egypt|Eire|Etc/GMT|Etc/GMT\+0|Etc/GMT\+1|Etc/GMT\+10|Etc/GMT\+11|Etc/GMT\+12|Etc/GMT\+2|Etc/GMT\+3|Etc/GMT\+4|Etc/GMT\+5|Etc/GMT\+6|Etc/GMT\+7|Etc/GMT\+8|Etc/GMT\+9|Etc/GMT-0|Etc/GMT-1|Etc/GMT-10|Etc/GMT-11|Etc/GMT-12|Etc/GMT-13|Etc/GMT-14|Etc/GMT-2|Etc/GMT-3|Etc/GMT-4|Etc/GMT-5|Etc/GMT-6|Etc/GMT-7|Etc/GMT-8|Etc/GMT-9|Etc/GMT0|Etc/Greenwich|Etc/UCT|Etc/UTC|Etc/Universal|Etc/Zulu|Europe/Amsterdam|Europe/Andorra|Europe/Astrakhan|Europe/Athens|Europe/Belfast|Europe/Belgrade|Europe/Berlin|Europe/Bratislava|Europe/Brussels|Europe/Bucharest|Europe/Budapest|Europe/Busingen|Europe/Chisinau|Europe/Copenhagen|Europe/Dublin|Europe/Gibraltar|Europe/Guernsey|Europe/Helsinki|Europe/Isle_of_Man|Europe/Istanbul|Europe/Jersey|Europe/Kaliningrad|Europe/Kiev|Europe/Kirov|Europe/Kyiv|Europe/Lisbon|Europe/Ljubljana|Europe/London|Europe/Luxembourg|Europe/Madrid|Europe/Malta|Europe/Mariehamn|Europe/Minsk|Europe/Monaco|Europe/Moscow|Europe/Nicosia|Europe/Oslo|Europe/Paris|Europe/Podgorica|Europe/Prague|Europe/Riga|Europe/Rome|Europe/Samara|Europe/San_Marino|Europe/Sarajevo|Europe/Saratov|Europe/Simferopol|Europe/Skopje|Europe/Sofia|Europe/Stockholm|Europe/Tallinn|Europe/Tirane|Europe/Tiraspol|Europe/Ulyanovsk|Europe/Uzhgorod|Europe/Vaduz|Europe/Vatican|Europe/Vienna|Europe/Vilnius|Europe/Volgograd|Europe/Warsaw|Europe/Zagreb|Europe/Zaporozhye|Europe/Zurich|GB|GB-Eire|GMT|GMT\+0|GMT-0|GMT0|Greenwich|HST|Hongkong|Iceland|Indian/Antananarivo|Indian/Chagos|Indian/Christmas|Indian/Cocos|Indian/Comoro|Indian/Kerguelen|Indian/Mahe|Indian/Maldives|Indian/Mauritius|Indian/Mayotte|Indian/Reunion|Iran|Israel|Jamaica|Japan|Kwajalein|Libya|MET|MST|MST7MDT|Mexico/BajaNorte|Mexico/BajaSur|Mexico/General|NZ|NZ-CHAT|Navajo|PRC|PST8PDT|Pacific/Apia|Pacific/Auckland|Pacific/Bougainville|Pacific/Chatham|Pacific/Chuuk|Pacific/Easter|Pacific/Efate|Pacific/Enderbury|Pacific/Fakaofo|Pacific/Fiji|Pacific/Funafuti|Pacific/Galapagos|Pacific/Gambier|Pacific/Guadalcanal|Pacific/Guam|Pacific/Honolulu|Pacific/Johnston|Pacific/Kanton|Pacific/Kiritimati|Pacific/Kosrae|Pacific/Kwajalein|Pacific/Majuro|Pacific/Marquesas|Pacific/Midway|Pacific/Nauru|Pacific/Niue|Pacific/Norfolk|Pacific/Noumea|Pacific/Pago_Pago|Pacific/Palau|Pacific/Pitcairn|Pacific/Pohnpei|Pacific/Ponape|Pacific/Port_Moresby|Pacific/Rarotonga|Pacific/Saipan|Pacific/Samoa|Pacific/Tahiti|Pacific/Tarawa|Pacific/Tongatapu|Pacific/Truk|Pacific/Wake|Pacific/Wallis|Pacific/Yap|Poland|Portugal|ROC|ROK|Singapore|Turkey|UCT|US/Alaska|US/Aleutian|US/Arizona|US/Central|US/East-Indiana|US/Eastern|US/Hawaii|US/Indiana-Starke|US/Michigan|US/Mountain|US/Pacific|US/Samoa|UTC|Universal|W-SU|WET|Zulu)</code></pre>
<div class="sourceCode" id="cb1930"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1930-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1930-1" tabindex="-1"></a><span class="co"># ISO 8601 formats</span></span>
<span id="cb1930-2"><a href="regex-in-human-readble-format-using-rebus.html#cb1930-2" tabindex="-1"></a>ISO_DATE          <span class="co"># %Y-%m-%d</span></span></code></pre></div>
<pre><code>## &lt;regex&gt; [0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[12][0-9]|3[01])</code></pre>
<div class="sourceCode" id="cb1932"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1932-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1932-1" tabindex="-1"></a>ISO_TIME          <span class="co"># %H:%M:%S</span></span></code></pre></div>
<pre><code>## &lt;regex&gt; (?:[01][0-9]|2[0-3]):[0-5][0-9]:(?:[0-5][0-9]|6[01])</code></pre>
<div class="sourceCode" id="cb1934"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1934-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1934-1" tabindex="-1"></a>ISO_DATETIME      <span class="co"># ISO_DATE followed by ISO_TIME, separated by space or &quot;T&quot;.</span></span></code></pre></div>
<pre><code>## &lt;regex&gt; [0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[12][0-9]|3[01])(?:[ T](?:[01][0-9]|2[0-3]):[0-5][0-9]:(?:[0-5][0-9]|6[01]))?</code></pre>
<div class="sourceCode" id="cb1936"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1936-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1936-1" tabindex="-1"></a><span class="co"># Compound forms, separated by DTSEP</span></span>
<span id="cb1936-2"><a href="regex-in-human-readble-format-using-rebus.html#cb1936-2" tabindex="-1"></a>YMD</span></code></pre></div>
<pre><code>## &lt;regex&gt; [0-9]{1,4}[-/.:,\ ]?(?:0[1-9]|1[0-2])[-/.:,\ ]?(?:0[1-9]|[12][0-9]|3[01])</code></pre>
<div class="sourceCode" id="cb1938"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1938-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1938-1" tabindex="-1"></a>YDM</span></code></pre></div>
<pre><code>## &lt;regex&gt; [0-9]{1,4}[-/.:,\ ]?(?:0[1-9]|[12][0-9]|3[01])[-/.:,\ ]?(?:0[1-9]|1[0-2])</code></pre>
<div class="sourceCode" id="cb1940"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1940-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1940-1" tabindex="-1"></a>MYD</span></code></pre></div>
<pre><code>## &lt;regex&gt; (?:0[1-9]|1[0-2])[-/.:,\ ]?[0-9]{1,4}[-/.:,\ ]?(?:0[1-9]|[12][0-9]|3[01])</code></pre>
<div class="sourceCode" id="cb1942"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1942-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1942-1" tabindex="-1"></a>MDY</span></code></pre></div>
<pre><code>## &lt;regex&gt; (?:0[1-9]|1[0-2])[-/.:,\ ]?(?:0[1-9]|[12][0-9]|3[01])[-/.:,\ ]?[0-9]{1,4}</code></pre>
<div class="sourceCode" id="cb1944"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1944-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1944-1" tabindex="-1"></a>DYM</span></code></pre></div>
<pre><code>## &lt;regex&gt; (?:0[1-9]|[12][0-9]|3[01])[-/.:,\ ]?[0-9]{1,4}[-/.:,\ ]?(?:0[1-9]|1[0-2])</code></pre>
<div class="sourceCode" id="cb1946"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1946-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1946-1" tabindex="-1"></a>DMY</span></code></pre></div>
<pre><code>## &lt;regex&gt; (?:0[1-9]|[12][0-9]|3[01])[-/.:,\ ]?(?:0[1-9]|1[0-2])[-/.:,\ ]?[0-9]{1,4}</code></pre>
<div class="sourceCode" id="cb1948"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1948-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1948-1" tabindex="-1"></a>HMS</span></code></pre></div>
<pre><code>## &lt;regex&gt; (?:[01][0-9]|2[0-3])[-/.:,\ ]?[0-5][0-9][-/.:,\ ]?(?:[0-5][0-9]|6[01])</code></pre>
<div class="sourceCode" id="cb1950"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1950-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1950-1" tabindex="-1"></a>HM</span></code></pre></div>
<pre><code>## &lt;regex&gt; (?:[01][0-9]|2[0-3])[-/.:,\ ]?[0-5][0-9]</code></pre>
<div class="sourceCode" id="cb1952"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1952-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1952-1" tabindex="-1"></a>MS</span></code></pre></div>
<pre><code>## &lt;regex&gt; [0-5][0-9][-/.:,\ ]?(?:[0-5][0-9]|6[01])</code></pre>
<p>Example-19:</p>
<div class="sourceCode" id="cb1954"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1954-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1954-1" tabindex="-1"></a><span class="co"># We have some dates - both valid and invalid</span></span>
<span id="cb1954-2"><a href="regex-in-human-readble-format-using-rebus.html#cb1954-2" tabindex="-1"></a>some_dates <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;2000-13-01&quot;</span>, <span class="st">&quot;2025-08-09&quot;</span>,<span class="st">&quot;2000-01-32&quot;</span>, <span class="st">&quot;2000-00-01&quot;</span>, <span class="st">&quot;2000-01-00&quot;</span>, <span class="st">&quot;2020-05-20&quot;</span>)</span>
<span id="cb1954-3"><a href="regex-in-human-readble-format-using-rebus.html#cb1954-3" tabindex="-1"></a></span>
<span id="cb1954-4"><a href="regex-in-human-readble-format-using-rebus.html#cb1954-4" tabindex="-1"></a><span class="fu">str_view</span>(some_dates, ISO_DATE)</span></code></pre></div>
<pre><code>## [2] │ &lt;2025-08-09&gt;
## [6] │ &lt;2020-05-20&gt;</code></pre>
<div class="sourceCode" id="cb1956"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1956-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1956-1" tabindex="-1"></a><span class="co"># Similarly some time formats</span></span>
<span id="cb1956-2"><a href="regex-in-human-readble-format-using-rebus.html#cb1956-2" tabindex="-1"></a>some_times <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;24:00:00&quot;</span>, <span class="st">&quot;23:60:59&quot;</span>, <span class="st">&quot;23:59:62&quot;</span>, <span class="st">&quot;23 59 59&quot;</span>, <span class="st">&quot;23:55:55&quot;</span>, <span class="st">&quot;00:00:00&quot;</span>)</span>
<span id="cb1956-3"><a href="regex-in-human-readble-format-using-rebus.html#cb1956-3" tabindex="-1"></a><span class="fu">str_view</span>(some_times, ISO_TIME)</span></code></pre></div>
<pre><code>## [5] │ &lt;23:55:55&gt;
## [6] │ &lt;00:00:00&gt;</code></pre>
</div>
</div>
<div id="roman-numerals" class="section level2" number="30.9">
<h2><span class="header-section-number">30.9</span> Roman numerals</h2>
<p>To match Roman numerals we have a constant <code>ROMAN</code> as well as a function <code>roman(lo, hi)</code> in rebus.</p>
<p>Example-20:</p>
<div class="sourceCode" id="cb1958"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1958-1"><a href="regex-in-human-readble-format-using-rebus.html#cb1958-1" tabindex="-1"></a><span class="co"># Some Roman numerals, both valid and invalid</span></span>
<span id="cb1958-2"><a href="regex-in-human-readble-format-using-rebus.html#cb1958-2" tabindex="-1"></a>some_numbers <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;MMMDCCCXLVIII&quot;</span>, <span class="st">&quot;MMMCMDCCCXLVIIV&quot;</span>, <span class="st">&quot;MCD&quot;</span>, <span class="st">&quot;XIL&quot;</span>, <span class="st">&quot;LIX&quot;</span>, <span class="st">&quot;XL&quot;</span>)</span>
<span id="cb1958-3"><a href="regex-in-human-readble-format-using-rebus.html#cb1958-3" tabindex="-1"></a><span class="co"># Find valid roam numerals</span></span>
<span id="cb1958-4"><a href="regex-in-human-readble-format-using-rebus.html#cb1958-4" tabindex="-1"></a><span class="fu">str_view</span>(some_numbers, <span class="fu">exactly</span>(<span class="fu">roman</span>()))</span></code></pre></div>
<pre><code>## [1] │ &lt;MMMDCCCXLVIII&gt;
## [3] │ &lt;MCD&gt;
## [5] │ &lt;LIX&gt;
## [6] │ &lt;XL&gt;</code></pre>

</div>
</div>
  </main>

  <div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page">
      <h2>On this page</h2>
      <div id="book-on-this-page"></div>

      <div class="book-extra">
        <ul class="list-unstyled">
          <li><a id="book-source" href="#">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="#">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
      </div>
    </nav>
  </div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5">
  <div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>R for Audit Analytics</strong>" was written by Anil Goyal. It was last built on 2024-11-29.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer>


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
<script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>

</html>
