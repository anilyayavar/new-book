<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 37 Reverse geo-coding | R for Audit Analytics</title>
<meta name="author" content="Anil Goyal">
<meta name="description" content="37.1 Introduction Geo-coding is the process of converting a human-readable address into geographic coordinates, such as latitude and longitude. Geocoding is the process of determining the location...">
<meta name="generator" content="bookdown 0.40 with bs4_book()">
<meta property="og:title" content="Chapter 37 Reverse geo-coding | R for Audit Analytics">
<meta property="og:type" content="book">
<meta property="og:description" content="37.1 Introduction Geo-coding is the process of converting a human-readable address into geographic coordinates, such as latitude and longitude. Geocoding is the process of determining the location...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 37 Reverse geo-coding | R for Audit Analytics">
<meta name="twitter:description" content="37.1 Introduction Geo-coding is the process of converting a human-readable address into geographic coordinates, such as latitude and longitude. Geocoding is the process of determining the location...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.7.0/transition.js"></script><script src="libs/bs3compat-0.7.0/tabs.js"></script><script src="libs/bs3compat-0.7.0/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/kePrint-0.0.1/kePrint.js"></script><link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<style type="text/css">
    /* Used with Pandoc 2.11+ new --citeproc when CSL is used */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
        }
    .hanging div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }
  </style>
<link rel="stylesheet" href="style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">R for Audit Analytics</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Welcome to R for Audit Analytics</a></li>
<li><a class="" href="preface.html">Preface</a></li>
<li><a class="" href="about-author.html">About author</a></li>
<li><a class="" href="gearing-up.html">Gearing up</a></li>
<li><a class="" href="part-i-basic-r-programming-concepts.html">Part-I: Basic R Programming Concepts</a></li>
<li><a class="" href="r-programming-language.html"><span class="header-section-number">1</span> R Programming Language</a></li>
<li><a class="" href="subset.html"><span class="header-section-number">2</span> Subsetting R objects or accesing specific elements</a></li>
<li><a class="" href="func.html"><span class="header-section-number">3</span> Functions and operations in R</a></li>
<li><a class="" href="existing-and-useful-functions-in-base-r.html"><span class="header-section-number">4</span> Existing and useful functions in base R</a></li>
<li><a class="" href="pipes-in-r.html"><span class="header-section-number">5</span> Pipes in R</a></li>
<li><a class="" href="control-statements.html"><span class="header-section-number">6</span> Control statements</a></li>
<li><a class="" href="functional-programming.html"><span class="header-section-number">7</span> Functional Programming</a></li>
<li><a class="" href="file.html"><span class="header-section-number">8</span> File handling operations in R</a></li>
<li><a class="" href="read.html"><span class="header-section-number">9</span> Getting data in and out of R</a></li>
<li><a class="" href="data-cleaning-in-r.html"><span class="header-section-number">10</span> Data Cleaning in R</a></li>
<li><a class="" href="merging-large-number-of-similar-datasets-into-one.html"><span class="header-section-number">11</span> Merging large number of similar datasets into one</a></li>
<li><a class="" href="part-ii-exploratory-data-analysis.html">Part-II: Exploratory Data Analysis</a></li>
<li><a class="" href="visualisations-in-base-r.html"><span class="header-section-number">12</span> Visualisations in Base R</a></li>
<li><a class="" href="visualising-data-with-ggplot2.html"><span class="header-section-number">13</span> Visualising data with ggplot2</a></li>
<li><a class="" href="data-transformation-in-dplyr.html"><span class="header-section-number">14</span> Data Transformation in dplyr</a></li>
<li><a class="" href="combining-tablestabular-data.html"><span class="header-section-number">15</span> Combining Tables/tabular data</a></li>
<li><a class="" href="data-wrangling-in-tidyr.html"><span class="header-section-number">16</span> Data Wrangling in tidyr</a></li>
<li><a class="" href="generating-descriptive-statistics.html"><span class="header-section-number">17</span> Generating Descriptive statistics</a></li>
<li><a class="" href="part-iii-probability-and-sampling-in-r.html">Part-III: Probability and Sampling in R</a></li>
<li><a class="" href="probability-in-r.html"><span class="header-section-number">18</span> Probability in R</a></li>
<li><a class="" href="random-sampling-in-r.html"><span class="header-section-number">19</span> Random sampling in R</a></li>
<li><a class="" href="part-iv-machine-learning-in-r.html">Part-IV: Machine Learning in R</a></li>
<li><a class="" href="linear-regression.html"><span class="header-section-number">20</span> Linear Regression</a></li>
<li><a class="" href="principal-component-analysis-in-r.html"><span class="header-section-number">21</span> Principal Component Analysis in R</a></li>
<li><a class="" href="clustering-in-r-using-kmeans-algorithm.html"><span class="header-section-number">22</span> Clustering in R (Using Kmeans algorithm)</a></li>
<li><a class="" href="association-rule-mining-in-r-apriori.html"><span class="header-section-number">23</span> Association Rule Mining in R (Apriori)</a></li>
<li><a class="" href="part-v-time-series-analysis.html">Part-V: Time Series Analysis</a></li>
<li><a class="" href="manipulating-datedate-time-objects-using-lubridate.html"><span class="header-section-number">24</span> Manipulating Date/Date-time objects using lubridate</a></li>
<li><a class="" href="time-series-analysis.html"><span class="header-section-number">25</span> Time Series Analysis</a></li>
<li><a class="" href="part-vi-network-analytics.html">Part VI: Network Analytics</a></li>
<li><a class="" href="network-analyticsgraph-theory-in-r.html"><span class="header-section-number">26</span> Network Analytics/Graph theory in R</a></li>
<li><a class="" href="applying-network-analysis-in-auditfraud-detection.html"><span class="header-section-number">27</span> Applying network analysis in audit/fraud detection</a></li>
<li><a class="" href="part-vii-text-analytics-in-r.html">Part-VII: Text Analytics in R</a></li>
<li><a class="" href="string-manipulation-in-stringr.html"><span class="header-section-number">28</span> String manipulation in stringr</a></li>
<li><a class="" href="regex---a-quick-introduction.html"><span class="header-section-number">29</span> Regex - A quick introduction</a></li>
<li><a class="" href="regex-in-human-readble-format-using-rebus.html"><span class="header-section-number">30</span> Regex in human readble format using rebus</a></li>
<li><a class="" href="text-analytics-in-r.html"><span class="header-section-number">31</span> Text Analytics in R</a></li>
<li><a class="" href="sentiment-analysis.html"><span class="header-section-number">32</span> Sentiment Analysis</a></li>
<li><a class="" href="visualising-text-analytics-through-wordcloud-etc..html"><span class="header-section-number">33</span> Visualising Text analytics through Wordcloud, etc.</a></li>
<li><a class="" href="finding-string-similarity.html"><span class="header-section-number">34</span> Finding string similarity</a></li>
<li><a class="" href="part-viii-geo-computation-in-r.html">Part-VIII: Geo computation in R</a></li>
<li><a class="" href="maps-in-r.html"><span class="header-section-number">35</span> Maps in R</a></li>
<li><a class="" href="geo-coding-in-r.html"><span class="header-section-number">36</span> Geo-Coding in R</a></li>
<li><a class="active" href="reverse-geo-coding.html"><span class="header-section-number">37</span> Reverse geo-coding</a></li>
<li><a class="" href="part-ix-identifying-anamolous-observations-for-audit.html">Part-IX: Identifying anamolous observations for audit</a></li>
<li><a class="" href="benford-testsanalysis.html"><span class="header-section-number">38</span> Benford Tests/Analysis</a></li>
<li><a class="" href="anomaly-detection.html"><span class="header-section-number">39</span> Anomaly Detection</a></li>
<li><a class="" href="finding-anamolous-outliers.html"><span class="header-section-number">40</span> Finding Anamolous Outliers</a></li>
<li><a class="" href="dup.html"><span class="header-section-number">41</span> Duplicate Detection</a></li>
<li><a class="" href="detecting-gaps-in-sequences.html"><span class="header-section-number">42</span> Detecting gaps in sequences</a></li>
<li><a class="" href="data-envelopment-analysis.html"><span class="header-section-number">43</span> Data Envelopment Analysis</a></li>
<li class="book-part">Appendix</li>
<li><a class="" href="colors-in-r.html"><span class="header-section-number">A</span> Colors in R</a></li>
<li><a class="" href="various-datasets-in-base-r-used-in-this-book.html"><span class="header-section-number">B</span> Various Datasets, in base R, used in this book</a></li>
<li><a class="" href="references.html">References</a></li>
</ul>

        <div class="book-extra">
          
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="reverse-geo-coding" class="section level1" number="37">
<h1>
<span class="header-section-number">37</span> Reverse geo-coding<a class="anchor" aria-label="anchor" href="#reverse-geo-coding"><i class="fas fa-link"></i></a>
</h1>
<div id="introduction" class="section level2" number="37.1">
<h2>
<span class="header-section-number">37.1</span> Introduction<a class="anchor" aria-label="anchor" href="#introduction"><i class="fas fa-link"></i></a>
</h2>
<p><strong>Geo-coding</strong> is the process of converting a human-readable address into geographic coordinates, such as latitude and longitude. Geocoding is the process of determining the location of an address on a map. So, plotting the places on geographical map layers require extraction of latitudes and longitudes from master databases.</p>
<p><strong>Reverse geo-coding</strong>, on the other hand, is the process of converting geographic coordinates (latitude and longitude) into a human-readable address, such as a street address, city, state/province, and country. In other words, it’s the process of determining a location’s address based on its geographic coordinates.</p>
<p>Both geo-coding and reverse geo-coding are important in geospatial data analysis, as they allow us to link spatial information with non-spatial information, such as demographic data, land use data, or other forms of spatial data. This information can then be used to gain insights into patterns and relationships in the data, and to make informed decisions based on location information.</p>
<p>Reverse geo-coding can be used in forensic data analysis to help identify the location of transactions or events. For example, it can be used to determine the location of an ATM or point of sale device where a fraudulent transaction occurred. It can also be used to analyze patterns of activity in a particular geographic area, such as the frequency and timing of certain types of transactions. As another example, we may think of an application data, where mobile or hand held devices are used to capture data at the time and place of intended service delivery. Auditors may use the geo-spatial data captured by these devices to cross check/verify the actual points of service delivery.</p>
</div>
<div id="widely-used-databases" class="section level2" number="37.2">
<h2>
<span class="header-section-number">37.2</span> Widely used databases<a class="anchor" aria-label="anchor" href="#widely-used-databases"><i class="fas fa-link"></i></a>
</h2>
<p><strong>OpenStreetMap</strong> (OSM) is one of the most popular and widely used master databases for geo-coding and reverse geo-coding. OSM is a free and open-source map of the world, created and maintained by a community of volunteers. It provides a rich and detailed set of spatial data, including street names, addresses, and other points of interest.</p>
<p>Other popular master databases for geo-coding and reverse geo-coding include <strong>Google Maps</strong>. Google Maps provides a rich set of geo-coding and reverse geo-coding APIs that are widely used in web and mobile applications. Google Maps provides a comprehensive set of spatial data, including street names, addresses, and other points of interest.</p>
</div>
<div id="example-in-r" class="section level2" number="37.3">
<h2>
<span class="header-section-number">37.3</span> Example in R<a class="anchor" aria-label="anchor" href="#example-in-r"><i class="fas fa-link"></i></a>
</h2>
<div id="prerequisites" class="section level3" number="37.3.1">
<h3>
<span class="header-section-number">37.3.1</span> Prerequisites<a class="anchor" aria-label="anchor" href="#prerequisites"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb1717"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://jessecambon.github.io/tidygeocoder/">tidygeocoder</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div id="function-to-be-used" class="section level3" number="37.3.2">
<h3>
<span class="header-section-number">37.3.2</span> Function to be used<a class="anchor" aria-label="anchor" href="#function-to-be-used"><i class="fas fa-link"></i></a>
</h3>
<p>We will use <code><a href="https://jessecambon.github.io/tidygeocoder/reference/reverse_geo.html">reverse_geo()</a></code> function from this library. Syntax is</p>
<pre><code>reverse_geo(
  lat,
  long,
  method = "osm",
  address = "address",
  full_results = FALSE
  ...
)</code></pre>
<p>Here -</p>
<ul>
<li>
<code>lat</code> and <code>long</code> are, as the names suggest, latitude and longitudes for the place, of which address is to be extracted.</li>
<li>
<code>method</code> argument provides for geo service to be used. Default is <code>osm</code>. Other services available are - <code>arcgis</code>, <code>geocodio</code>, <code>google</code>, etc.</li>
<li>
<code>address</code> provides the column name to be used.</li>
<li>
<code>full_results</code> by default is <code>FALSE</code>. But if set to <code>TRUE</code> returns all available data from the geocoding service.</li>
<li>for other arguments, please check help of the function.</li>
</ul>
</div>
<div id="practical-data-set" class="section level3" number="37.3.3">
<h3>
<span class="header-section-number">37.3.3</span> Practical data-set<a class="anchor" aria-label="anchor" href="#practical-data-set"><i class="fas fa-link"></i></a>
</h3>
<p><strong>Remember one thing, the function is not vectorised.</strong> So we will have to use <code>apply</code> family or <code><a href="https://purrr.tidyverse.org/reference/map.html">purrr::map</a></code> family of functions to get reverse geo-coding information.</p>
<div class="sourceCode" id="cb1719"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Coordinates of tajmahal</span></span>
<span><span class="fu"><a href="https://jessecambon.github.io/tidygeocoder/reference/reverse_geo.html">reverse_geo</a></span><span class="op">(</span>lat <span class="op">=</span> <span class="fl">27.1751</span>, </span>
<span>            long <span class="op">=</span> <span class="fl">78.421</span>, </span>
<span>            full_results <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>            method <span class="op">=</span> <span class="st">'osm'</span><span class="op">)</span></span></code></pre></div>
<pre><code>## Passing 1 coordinate to the Nominatim single coordinate geocoder</code></pre>
<pre><code>## Query completed in: 1.5 seconds</code></pre>
<pre><code>## # A tibble: 1 × 25
##     lat  long address     place_id licence osm_type osm_id osm_lat osm_lon class
##   &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;          &lt;int&gt; &lt;chr&gt;   &lt;chr&gt;     &lt;int&gt; &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;
## 1  27.2  78.4 Sailai, Fi…   2.14e8 Data ©… way      4.56e8 27.175… 78.421… high…
## # ℹ 15 more variables: type &lt;chr&gt;, place_rank &lt;int&gt;, importance &lt;dbl&gt;,
## #   addresstype &lt;chr&gt;, name &lt;chr&gt;, suburb &lt;chr&gt;, town &lt;chr&gt;, county &lt;chr&gt;,
## #   state_district &lt;chr&gt;, state &lt;chr&gt;, `ISO3166-2-lvl4` &lt;chr&gt;, postcode &lt;chr&gt;,
## #   country &lt;chr&gt;, country_code &lt;chr&gt;, boundingbox &lt;list&gt;</code></pre>
</div>
<div id="using-it-in-a-dataset" class="section level3" number="37.3.4">
<h3>
<span class="header-section-number">37.3.4</span> Using it in a dataset<a class="anchor" aria-label="anchor" href="#using-it-in-a-dataset"><i class="fas fa-link"></i></a>
</h3>
<p>Let’s build a sample dataset of say 4 values/places of interest in India</p>
<div class="inline-table"><table class="table table-sm">
<thead><tr class="header">
<th align="right">lat</th>
<th align="right">long</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">27.1751</td>
<td align="right">78.0421</td>
</tr>
<tr class="even">
<td align="right">24.8318</td>
<td align="right">79.9199</td>
</tr>
<tr class="odd">
<td align="right">27.1795</td>
<td align="right">78.0211</td>
</tr>
<tr class="even">
<td align="right">28.5245</td>
<td align="right">77.1855</td>
</tr>
</tbody>
</table></div>
<p>Now extracting information for these using <code><a href="https://purrr.tidyverse.org/reference/map.html">purrr::map</a></code> family</p>
<div class="sourceCode" id="cb1723"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span>, warn.conflicts <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://purrr.tidyverse.org/">purrr</a></span>, warn.conflicts <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://purrr.tidyverse.org/reference/map_dfr.html">pmap_dfr</a></span><span class="op">(</span><span class="va">sample</span>,</span>
<span>     <span class="op">~</span> <span class="fu"><a href="https://jessecambon.github.io/tidygeocoder/reference/reverse_geo.html">reverse_geo</a></span><span class="op">(</span><span class="va">..1</span>, <span class="co"># first column in sample</span></span>
<span>                   <span class="va">..2</span>, <span class="co"># second column in sample</span></span>
<span>                   full_results <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">lat</span>, <span class="va">long</span>, <span class="va">country</span>, <span class="va">state</span>, <span class="va">city</span>, <span class="va">village</span>, <span class="va">address</span>, <span class="va">postcode</span><span class="op">)</span></span></code></pre></div>
<pre><code>## Passing 1 coordinate to the Nominatim single coordinate geocoder</code></pre>
<pre><code>## Query completed in: 1 seconds</code></pre>
<pre><code>## Passing 1 coordinate to the Nominatim single coordinate geocoder</code></pre>
<pre><code>## Query completed in: 1 seconds</code></pre>
<pre><code>## Passing 1 coordinate to the Nominatim single coordinate geocoder</code></pre>
<pre><code>## Query completed in: 1 seconds</code></pre>
<pre><code>## Passing 1 coordinate to the Nominatim single coordinate geocoder</code></pre>
<pre><code>## Query completed in: 1 seconds</code></pre>
</div>
<div id="view-above-results" class="section level3" number="37.3.5">
<h3>
<span class="header-section-number">37.3.5</span> View above results<a class="anchor" aria-label="anchor" href="#view-above-results"><i class="fas fa-link"></i></a>
</h3>
<div class="inline-table"><table class="table table-sm">
<colgroup>
<col width="5%">
<col width="5%">
<col width="5%">
<col width="9%">
<col width="3%">
<col width="5%">
<col width="61%">
<col width="5%">
</colgroup>
<thead><tr class="header">
<th align="right">lat</th>
<th align="right">long</th>
<th align="left">country</th>
<th align="left">state</th>
<th align="left">city</th>
<th align="left">village</th>
<th align="left">address</th>
<th align="left">postcode</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">27.1751</td>
<td align="right">78.0421</td>
<td align="left">India</td>
<td align="left">Uttar Pradesh</td>
<td align="left">Agra</td>
<td align="left">NA</td>
<td align="left">Taj Mahal, Taj East Gate Road, Taj Ganj, Agra, Uttar Pradesh, 282004, India</td>
<td align="left">282004</td>
</tr>
<tr class="even">
<td align="right">24.8318</td>
<td align="right">79.9199</td>
<td align="left">India</td>
<td align="left">Madhya Pradesh</td>
<td align="left">NA</td>
<td align="left">Jatkra</td>
<td align="left">Khajuraho, Jatkra, Rajnagar Tahsil, Chhatarpur, Madhya Pradesh, 471006, India</td>
<td align="left">471006</td>
</tr>
<tr class="odd">
<td align="right">27.1795</td>
<td align="right">78.0211</td>
<td align="left">India</td>
<td align="left">Uttar Pradesh</td>
<td align="left">Agra</td>
<td align="left">NA</td>
<td align="left">Agra Fort, SH62, Agra, Uttar Pradesh, 282004, India</td>
<td align="left">282004</td>
</tr>
<tr class="even">
<td align="right">28.5245</td>
<td align="right">77.1855</td>
<td align="left">India</td>
<td align="left">Delhi</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">Qutub Minar Complex, Kalka Das Marg, Mehrauli, Mehrauli Tehsil, South Delhi, Delhi, 110030, India</td>
<td align="left">110030</td>
</tr>
</tbody>
</table></div>
</div>
<div id="alternate-syntax-for-those-who-do-not-want-to-use-purrrpmap_dfr" class="section level3" number="37.3.6">
<h3>
<span class="header-section-number">37.3.6</span> Alternate syntax (for those who do not want to use <code>purrr::pmap_dfr</code>)<a class="anchor" aria-label="anchor" href="#alternate-syntax-for-those-who-do-not-want-to-use-purrrpmap_dfr"><i class="fas fa-link"></i></a>
</h3>
<pre><code>sapply(seq(nrow(sample)),
       function(x) reverse_geo(sample$lat[x], sample$long[x], full_results = TRUE)) %&gt;% 
  map_dfr(rbind)</code></pre>

</div>
</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="geo-coding-in-r.html"><span class="header-section-number">36</span> Geo-Coding in R</a></div>
<div class="next"><a href="part-ix-identifying-anamolous-observations-for-audit.html">Part-IX: Identifying anamolous observations for audit</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#reverse-geo-coding"><span class="header-section-number">37</span> Reverse geo-coding</a></li>
<li><a class="nav-link" href="#introduction"><span class="header-section-number">37.1</span> Introduction</a></li>
<li><a class="nav-link" href="#widely-used-databases"><span class="header-section-number">37.2</span> Widely used databases</a></li>
<li>
<a class="nav-link" href="#example-in-r"><span class="header-section-number">37.3</span> Example in R</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#prerequisites"><span class="header-section-number">37.3.1</span> Prerequisites</a></li>
<li><a class="nav-link" href="#function-to-be-used"><span class="header-section-number">37.3.2</span> Function to be used</a></li>
<li><a class="nav-link" href="#practical-data-set"><span class="header-section-number">37.3.3</span> Practical data-set</a></li>
<li><a class="nav-link" href="#using-it-in-a-dataset"><span class="header-section-number">37.3.4</span> Using it in a dataset</a></li>
<li><a class="nav-link" href="#view-above-results"><span class="header-section-number">37.3.5</span> View above results</a></li>
<li><a class="nav-link" href="#alternate-syntax-for-those-who-do-not-want-to-use-purrrpmap_dfr"><span class="header-section-number">37.3.6</span> Alternate syntax (for those who do not want to use purrr::pmap_dfr)</a></li>
</ul>
</li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
          
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>R for Audit Analytics</strong>" was written by Anil Goyal. It was last built on 2024-07-12.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
