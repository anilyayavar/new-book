<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 26 Network Analytics/Graph theory in R | Data Analytics in Audit, using R</title>
<meta name="author" content="Anil Goyal">
<meta name="description" content="The content is under development/Finalisation. Network analysis has emerged as a pivotal tool in the realm of audit analytics, offering auditors a powerful method to uncover intricate...">
<meta name="generator" content="bookdown 0.40 with bs4_book()">
<meta property="og:title" content="Chapter 26 Network Analytics/Graph theory in R | Data Analytics in Audit, using R">
<meta property="og:type" content="book">
<meta property="og:description" content="The content is under development/Finalisation. Network analysis has emerged as a pivotal tool in the realm of audit analytics, offering auditors a powerful method to uncover intricate...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 26 Network Analytics/Graph theory in R | Data Analytics in Audit, using R">
<meta name="twitter:description" content="The content is under development/Finalisation. Network analysis has emerged as a pivotal tool in the realm of audit analytics, offering auditors a powerful method to uncover intricate...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.7.0/transition.js"></script><script src="libs/bs3compat-0.7.0/tabs.js"></script><script src="libs/bs3compat-0.7.0/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/kePrint-0.0.1/kePrint.js"></script><link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<style type="text/css">
    /* Used with Pandoc 2.11+ new --citeproc when CSL is used */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
        }
    .hanging div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }
  </style>
<link rel="stylesheet" href="style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Data Analytics in Audit, using R</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Preface</a></li>
<li><a class="" href="about-author.html">About author</a></li>
<li><a class="" href="gearing-up.html">Gearing up</a></li>
<li><a class="" href="part-i-basic-r-programming-concepts.html">Part-I: Basic R Programming Concepts</a></li>
<li><a class="" href="r-programming-language.html"><span class="header-section-number">1</span> R Programming Language</a></li>
<li><a class="" href="subset.html"><span class="header-section-number">2</span> Subsetting R objects or accesing specific elements</a></li>
<li><a class="" href="func.html"><span class="header-section-number">3</span> Functions and operations in R</a></li>
<li><a class="" href="existing-and-useful-functions-in-base-r.html"><span class="header-section-number">4</span> Existing and useful functions in base R</a></li>
<li><a class="" href="pipes-in-r.html"><span class="header-section-number">5</span> Pipes in R</a></li>
<li><a class="" href="control-statements.html"><span class="header-section-number">6</span> Control statements</a></li>
<li><a class="" href="functional-programming.html"><span class="header-section-number">7</span> Functional Programming</a></li>
<li><a class="" href="file.html"><span class="header-section-number">8</span> File handling operations in R</a></li>
<li><a class="" href="read.html"><span class="header-section-number">9</span> Getting data in and out of R</a></li>
<li><a class="" href="data-cleaning-in-r.html"><span class="header-section-number">10</span> Data Cleaning in R</a></li>
<li><a class="" href="merging-large-number-of-similar-datasets-into-one.html"><span class="header-section-number">11</span> Merging large number of similar datasets into one</a></li>
<li><a class="" href="part-ii-exploratory-data-analysis.html">Part-II: Exploratory Data Analysis</a></li>
<li><a class="" href="visualisations-in-base-r.html"><span class="header-section-number">12</span> Visualisations in Base R</a></li>
<li><a class="" href="visualising-data-with-ggplot2.html"><span class="header-section-number">13</span> Visualising data with ggplot2</a></li>
<li><a class="" href="data-transformation-in-dplyr.html"><span class="header-section-number">14</span> Data Transformation in dplyr</a></li>
<li><a class="" href="combining-tablestabular-data.html"><span class="header-section-number">15</span> Combining Tables/tabular data</a></li>
<li><a class="" href="data-wrangling-in-tidyr.html"><span class="header-section-number">16</span> Data Wrangling in tidyr</a></li>
<li><a class="" href="generating-descriptive-statistics.html"><span class="header-section-number">17</span> Generating Descriptive statistics</a></li>
<li><a class="" href="part-iii-probability-and-sampling-in-r.html">Part-III: Probability and Sampling in R</a></li>
<li><a class="" href="probability-in-r.html"><span class="header-section-number">18</span> Probability in R</a></li>
<li><a class="" href="random-sampling-in-r.html"><span class="header-section-number">19</span> Random sampling in R</a></li>
<li><a class="" href="part-iv-machine-learning-in-r.html">Part-IV: Machine Learning in R</a></li>
<li><a class="" href="linear-regression.html"><span class="header-section-number">20</span> Linear Regression</a></li>
<li><a class="" href="principal-component-analysis-in-r.html"><span class="header-section-number">21</span> Principal Component Analysis in R</a></li>
<li><a class="" href="clustering-in-r-using-kmeans-algorithm.html"><span class="header-section-number">22</span> Clustering in R (Using Kmeans algorithm)</a></li>
<li><a class="" href="association-rule-mining-in-r-apriori.html"><span class="header-section-number">23</span> Association Rule Mining in R (Apriori)</a></li>
<li><a class="" href="part-v-time-series-analysis.html">Part-V: Time Series Analysis</a></li>
<li><a class="" href="manipulating-datedate-time-objects-using-lubridate.html"><span class="header-section-number">24</span> Manipulating Date/Date-time objects using lubridate</a></li>
<li><a class="" href="time-series-analysis.html"><span class="header-section-number">25</span> Time Series Analysis</a></li>
<li><a class="" href="part-vi-network-analytics.html">Part VI: Network Analytics</a></li>
<li><a class="active" href="network-analyticsgraph-theory-in-r.html"><span class="header-section-number">26</span> Network Analytics/Graph theory in R</a></li>
<li><a class="" href="applying-network-analysis-in-auditfraud-detection.html"><span class="header-section-number">27</span> Applying network analysis in audit/fraud detection</a></li>
<li><a class="" href="part-vii-text-analytics-in-r.html">Part-VII: Text Analytics in R</a></li>
<li><a class="" href="string-manipulation-in-stringr.html"><span class="header-section-number">28</span> String manipulation in stringr</a></li>
<li><a class="" href="regex---a-quick-introduction.html"><span class="header-section-number">29</span> Regex - A quick introduction</a></li>
<li><a class="" href="regex-in-human-readble-format-using-rebus.html"><span class="header-section-number">30</span> Regex in human readble format using rebus</a></li>
<li><a class="" href="text-analytics-in-r.html"><span class="header-section-number">31</span> Text Analytics in R</a></li>
<li><a class="" href="sentiment-analysis.html"><span class="header-section-number">32</span> Sentiment Analysis</a></li>
<li><a class="" href="visualising-text-analytics-through-wordcloud-etc..html"><span class="header-section-number">33</span> Visualising Text analytics through Wordcloud, etc.</a></li>
<li><a class="" href="finding-string-similarity.html"><span class="header-section-number">34</span> Finding string similarity</a></li>
<li><a class="" href="part-viii-geo-computation-in-r.html">Part-VIII: Geo computation in R</a></li>
<li><a class="" href="maps-in-r.html"><span class="header-section-number">35</span> Maps in R</a></li>
<li><a class="" href="geo-coding-in-r.html"><span class="header-section-number">36</span> Geo-Coding in R</a></li>
<li><a class="" href="reverse-geo-coding.html"><span class="header-section-number">37</span> Reverse geo-coding</a></li>
<li><a class="" href="part-ix-identifying-anamolous-observations-for-audit.html">Part-IX: Identifying anamolous observations for audit</a></li>
<li><a class="" href="benford-testsanalysis.html"><span class="header-section-number">38</span> Benford Tests/Analysis</a></li>
<li><a class="" href="anomaly-detection.html"><span class="header-section-number">39</span> Anomaly Detection</a></li>
<li><a class="" href="finding-anamolous-outliers.html"><span class="header-section-number">40</span> Finding Anamolous Outliers</a></li>
<li><a class="" href="dup.html"><span class="header-section-number">41</span> Duplicate Detection</a></li>
<li><a class="" href="detecting-gaps-in-sequences.html"><span class="header-section-number">42</span> Detecting gaps in sequences</a></li>
<li><a class="" href="data-envelopment-analysis.html"><span class="header-section-number">43</span> Data Envelopment Analysis</a></li>
<li class="book-part">Appendix</li>
<li><a class="" href="colors-in-r.html"><span class="header-section-number">A</span> Colors in R</a></li>
<li><a class="" href="various-datasets-in-base-r-used-in-this-book.html"><span class="header-section-number">B</span> Various Datasets, in base R, used in this book</a></li>
<li><a class="" href="references.html">References</a></li>
</ul>

        <div class="book-extra">
          
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="network-analyticsgraph-theory-in-r" class="section level1" number="26">
<h1>
<span class="header-section-number">26</span> Network Analytics/Graph theory in R<a class="anchor" aria-label="anchor" href="#network-analyticsgraph-theory-in-r"><i class="fas fa-link"></i></a>
</h1>
<p><strong>The content is under development/Finalisation.</strong></p>
<p>Network analysis has emerged as a pivotal tool in the realm of audit analytics, offering auditors a powerful method to uncover intricate relationships and patterns within vast datasets. Leveraging the rich ecosystem of packages in R, auditors can construct, visualize, and analyze networks with ease, enabling them to detect anomalies, identify key players, and assess the robustness of interconnected systems. From detecting fraud to optimizing supply chains, the application of network analysis in auditing not only enhances risk assessment but also empowers auditors to make data-driven decisions with greater precision and confidence. So let’s dive in.</p>
<div id="an-introduction-to-graph-theory" class="section level2" number="26.1">
<h2>
<span class="header-section-number">26.1</span> An introduction to Graph theory<a class="anchor" aria-label="anchor" href="#an-introduction-to-graph-theory"><i class="fas fa-link"></i></a>
</h2>
<p>Network analysis applies concepts of graph theory, which is branch of mathematics, to analyze and interpret complex systems, such as social networks, transportation networks, and biological networks, to uncover patterns, structures, and dynamics within these systems. Graph theory focuses on the properties and characteristics of graphs, such as paths, cycles, connectivity, and graph coloring.</p>
<div id="definition-of-a-graph" class="section level3" number="26.1.1">
<h3>
<span class="header-section-number">26.1.1</span> Definition of a graph<a class="anchor" aria-label="anchor" href="#definition-of-a-graph"><i class="fas fa-link"></i></a>
</h3>
By definition, a graph is a mathematical structure consisting of a set of vertices (or nodes or actors) and a set of edges (or connections or links) that establish relationships between these vertices. Mathematically a graph <span class="math inline">\(G = (V, E)\)</span> consists of a set <span class="math inline">\(V\)</span> of vertices/nodes and a set <span class="math inline">\(E\)</span> of edges/links, as illustrated in <a href="network-analyticsgraph-theory-in-r.html#fig:gra1">26.1</a>. A vertex <span class="math inline">\(V\)</span> may represent real-world objects such as persons, computers, products, etc. An edge <span class="math inline">\(E\)</span>, on the other hand may represent the <em>relationship</em> between the nodes, it connects, such as friendship between those persons, or physical connection between the computers, etc.
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:gra1"></span>
<img src="DauR_files/figure-html/gra1-1.png" alt="An Example Graph" width="100%"><p class="caption">
Figure 26.1: An Example Graph
</p>
</div>
</div>
<div id="types-of-graph" class="section level3 unnumbered">
<h3>Types of graph<a class="anchor" aria-label="anchor" href="#types-of-graph"><i class="fas fa-link"></i></a>
</h3>
<p>Example graph shown in figure <a href="network-analyticsgraph-theory-in-r.html#fig:gra1">26.1</a> is basically an <strong>Undirected Graph</strong>, where the edges between the nodes aren’t directed. E.g. A connection between two computers. On the other hand, if the edge(s) between the nodes is following a direction or specific order, then the graph is known as <strong>Directed Graph</strong>. Example on twitter (now X) an user may follow other users without being followed by them in turn, as shown in figure <a href="network-analyticsgraph-theory-in-r.html#fig:gra2">26.2</a>.</p>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:gra2"></span>
<img src="DauR_files/figure-html/gra2-1.png" alt="An Example Directed Graph" width="100%" height="33%"><p class="caption">
Figure 26.2: An Example Directed Graph
</p>
</div>
<p>Moreover, sometimes an edge may be connected with itself. In this case, the edge is called as <strong>self-edge</strong> and such graphs (allowing vertices to join themselves) are called as <strong>Pseudographs</strong>. As real-world example of pseudographs think of transactions between different firms. A firm should usually transact with other firms but sometimes it may transact within its own account maintained separately for a specific purpose. Example in figure <a href="network-analyticsgraph-theory-in-r.html#fig:gra3">26.3</a> (left) node <code>E</code> is connected with itself.</p>
<p>Further sometimes there may be more than one edge connecting same pair of nodes (in same order). Such edges are called as <strong>multi-edges</strong>; e.g. in figure <a href="network-analyticsgraph-theory-in-r.html#fig:gra3">26.3</a> (right) there are two edges connecting from <code>B</code> to <code>E</code>. In real-world example we can think of multiple flights operating between same pair of airports by different carriers.</p>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:gra3"></span>
<img src="DauR_files/figure-html/gra3-1.png" alt="Examples of Self Edge and Multi Edge" width="48%" height="33%"><img src="DauR_files/figure-html/gra3-2.png" alt="Examples of Self Edge and Multi Edge" width="48%" height="33%"><p class="caption">
Figure 26.3: Examples of Self Edge and Multi Edge
</p>
</div>
<p><strong>Complete Graphs</strong> are graphs where all pairs of vertices are connected by an edge. Example complete graphs are shown in the figure <a href="network-analyticsgraph-theory-in-r.html#fig:gra4">26.4</a>. While in real-world instances of complete graphs may be rare, it maybe possible that a few of the nodes/vertices in a bigger graph show complete mutual relationship. In other words, the graph of those vertices if taken as a sub-graph is complete, then that complete subgraph is called as <strong>clique</strong>. As an example think of a subgraph consisting of nodes <code>B, D, E and G</code> in graph shown in <a href="network-analyticsgraph-theory-in-r.html#fig:gra1">26.1</a> is a clique.</p>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:gra4"></span>
<img src="DauR_files/figure-html/gra4-1.png" alt="Examples of Complete Graphs" width="49%" height="31%"><img src="DauR_files/figure-html/gra4-2.png" alt="Examples of Complete Graphs" width="49%" height="31%"><p class="caption">
Figure 26.4: Examples of Complete Graphs
</p>
</div>
<p>Before moving on, let us learn about two more specific types of graph. One is known as <strong>Bipartite Graphs</strong>. These are actually graphs having two mutually disjoint set of vertices with condition that no pair within the same set is connected. E.g. graph in figure <a href="network-analyticsgraph-theory-in-r.html#fig:gra5">26.5</a> (Left) is a bipartite graph. We can think of two departments where edges represent correspondence between officials between the two departments. Actually the idea can be extended to form k-partite graphs having <code>k</code> such disjoint sets.</p>
<p>Another category is <strong>Trees</strong>, representing hierarchical relationships among entities/individuals. In a tree, vertices are connected through edges or links, making it a type of graph. For a graph to qualify as a tree, there must be precisely one path between any pair of vertices when considered undirected. The bipartite graph illustrated in the example figure <a href="network-analyticsgraph-theory-in-r.html#fig:gra5">26.5</a> (on the left) can also be interpreted as a tree because it meets this criterion. Refer figure <a href="network-analyticsgraph-theory-in-r.html#fig:gra5">26.5</a> (Right) wherein the same graph has been redrawn as a tree.</p>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:gra5"></span>
<img src="DauR_files/figure-html/gra5-1.png" alt="Bipartite and Tree Graph example" width="49%" height="40%"><img src="DauR_files/figure-html/gra5-2.png" alt="Bipartite and Tree Graph example" width="49%" height="40%"><p class="caption">
Figure 26.5: Bipartite and Tree Graph example
</p>
</div>
</div>
<div id="vertex-and-edge-attributes" class="section level3" number="26.1.2">
<h3>
<span class="header-section-number">26.1.2</span> Vertex and Edge attributes<a class="anchor" aria-label="anchor" href="#vertex-and-edge-attributes"><i class="fas fa-link"></i></a>
</h3>
<p>Recall that a Graph basically consists of two sets <span class="math inline">\((V, E)\)</span> wherein <span class="math inline">\(V\)</span> is a set of <code>vertices</code> and <span class="math inline">\(E\)</span> is set of <code>edges</code>. In their simplest form, these sets can be conceived as lists, but both can be enriched by incorporating additional attributes. E.g. if a graph consists of airports and flights operating between them, the set <span class="math inline">\(V\)</span> representing airports could include attributes such as, (i) names, (ii) types whether domestic or international, (iii) geographical coordinates, (iv) State/Country in which located, etc. and so on. Similarly, the set of edges <span class="math inline">\(E\)</span> could encompass additional details like (i) the count of flights operating between two airports, (ii) the airlines servicing those flights, (iii) the aerial distance between airports, and so on. An example may be seen in figure <a href="network-analyticsgraph-theory-in-r.html#fig:gra6">26.6</a>.</p>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:gra6"></span>
<img src="DauR_files/figure-html/gra6-1.png" alt="Examples of Vertex and Edge properties" width="98%" height="32%"><p class="caption">
Figure 26.6: Examples of Vertex and Edge properties
</p>
</div>
</div>
</div>
<div id="practical-approach-for-creating-graphs-in-r" class="section level2" number="26.2">
<h2>
<span class="header-section-number">26.2</span> Practical approach for creating graphs in R<a class="anchor" aria-label="anchor" href="#practical-approach-for-creating-graphs-in-r"><i class="fas fa-link"></i></a>
</h2>
<div id="packages-to-use" class="section level3" number="26.2.1">
<h3>
<span class="header-section-number">26.2.1</span> Packages to use<a class="anchor" aria-label="anchor" href="#packages-to-use"><i class="fas fa-link"></i></a>
</h3>
<p>One of the best packages for creating and analysing graphs in R is <code>igraph</code>. Package <code>igraph</code> was originally developed by <strong>Gábor Csárdi</strong> and <strong>Tamás Nepusz</strong>, and is written in the C programming language in order to achieve good performance.
Let’s load it.</p>
<pre><code><a href="https://r.igraph.org/">library(igraph)</a></code></pre>
<p>Apart from <code>igraph</code> which in itself is a complete package for network analysis, we will also be using <code>visNetwork</code> and <code>ggraph</code> packages. Former is used to create interactive network charts and latter is used to create <code>ggplot2</code> compatible plots so that these can be customised further in familiar environment.</p>
<p>Let’s now proceed to learn creating graph objects in R. Actually graph objects can be created in many ways, out of which we will learn three methods. These methods will serve our purpose most of the time.</p>
</div>
<div id="creating-a-graph-from-data-frame" class="section level3" number="26.2.2">
<h3>
<span class="header-section-number">26.2.2</span> Creating a graph from data frame<a class="anchor" aria-label="anchor" href="#creating-a-graph-from-data-frame"><i class="fas fa-link"></i></a>
</h3>
<p>When working with data analysis, data frames are often our primary tool. Consequently, the most common and practical approach to creating graphs in igraph involves utilizing data.frame objects. Essentially, the <code>data.frame</code> objects we use to generate graphs should consist of at least two columns, where each row represents an edge within the intended graph. The first column is interpreted as the <code>'from'</code> node, while the second column is considered the <code>'to'</code> node, regardless of their respective column names. To achieve this, we employ the <code><a href="https://r.igraph.org/reference/graph_from_data_frame.html">graph_from_data_frame()</a></code> function from the <code>igraph</code> library. Its syntax is as follows:</p>
<pre><code>graph_from_data_frame(
  d =         ,  # data.frame
  directed = TRUE,
  vertices = NULL # optional data.frame of vertices
)</code></pre>
<p>Example-1: Let’s construct a graph object from a data frame containing four edges.</p>
<div class="sourceCode" id="cb1182"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Example data frame of edges</span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span></span>
<span>  from <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">3</span>, <span class="fl">3</span><span class="op">)</span>,</span>
<span>  to <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">5</span>, <span class="fl">4</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co"># Creating graph object</span></span>
<span><span class="va">gr1</span> <span class="op">&lt;-</span> <span class="fu">graph_from_data_frame</span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span>
<span><span class="co"># Let's print it</span></span>
<span><span class="va">gr1</span></span></code></pre></div>
<pre><code>## IGRAPH 74dba8f DN-- 5 4 -- 
## + attr: name (v/c)
## + edges from 74dba8f (vertex names):
## [1] 1-&gt;2 1-&gt;3 3-&gt;5 3-&gt;4</code></pre>
<p>Here, we observe that a graph object named <code>gr1</code> has been successfully generated and printed in the console, providing us with pertinent information about it.</p>
<ul>
<li>The first line always begins with <code>IGRAPH</code>, followed by seven characters, which represent the initial characters of a unique graph ID. Interested users can employ the <code><a href="https://r.igraph.org/reference/graph_id.html">graph_id()</a></code> function to retrieve the full ID if needed.</li>
<li>Subsequently, a four-letter character string is displayed. In this example, two are <code>UN</code>, followed by two blanks or <code>--</code>. These characters signify the following:
<ul>
<li>The first letter distinguishes between directed (<code>D</code>) and undirected (<code>U</code>) graphs.</li>
<li>The second letter, <code>N</code>, denotes named graphs, i.e., graphs with the name vertex attribute set.</li>
<li>The third letter, <code>W</code>, indicates weighted graphs, i.e., graphs with the weight edge attribute set.</li>
<li>The fourth letter, <code>B</code>, signifies bipartite graphs, i.e., graphs with the type vertex attribute set.</li>
</ul>
</li>
<li>Following this is the count of vertices and edges, separated by two dashes.</li>
<li>Starting from the second line, the graph’s attributes are listed, separated by commas. Each attribute’s type – graph (<code>g</code>), vertex (<code>v</code>), or edge (<code>e</code>) – and data type – character (<code>c</code>), numeric (<code>n</code>), logical (<code>l</code>), or other (<code>x</code>) – are specified.</li>
<li>In the last line a few of the edges are printed.</li>
</ul>
<p>Readers may notice that all four edges from our df have been imported into the gr1 graph and are displayed accordingly.</p>
<p>Now <code>directed</code> argument by default is <code>TRUE</code> so by default the graph created is <code>directed</code> as also confirmed by first alphabet <code>D</code> in the four character string. So let’s check how an undirected graph is created and printed.</p>
<div class="sourceCode" id="cb1184"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Creating graph object</span></span>
<span><span class="va">gr2</span> <span class="op">&lt;-</span> <span class="fu">graph_from_data_frame</span><span class="op">(</span><span class="va">df</span>, directed <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co"># Let's print it</span></span>
<span><span class="va">gr2</span></span></code></pre></div>
<pre><code>## IGRAPH 74dfb63 UN-- 5 4 -- 
## + attr: name (v/c)
## + edges from 74dfb63 (vertex names):
## [1] 1--2 1--3 3--5 3--4</code></pre>
<p>All good. First letter is now <code>U</code> representing undirected graph. Readers may also notice another change while printing the edges that these are now printed without any arrow mark. Here we created another graph object just to show how the <code>directed</code> argument is used. However, any existing <strong><code>directed</code> graph can be converted to an <code>undirected</code> graph</strong> using function <code><a href="https://r.igraph.org/reference/as.directed.html">as.directed()</a></code>. Check-</p>
<div class="sourceCode" id="cb1186"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">as.undirected</span><span class="op">(</span><span class="va">gr1</span><span class="op">)</span></span></code></pre></div>
<pre><code>## IGRAPH 74e35b0 UN-- 5 4 -- 
## + attr: name (v/c)
## + edges from 74e35b0 (vertex names):
## [1] 1--3 1--2 3--5 3--4</code></pre>
<p>Now what about the last argument <code>vertices =</code> in the function <code>graph_from_data_frame</code>? In most of the cases, the <code>d</code> argument having data of edges may be sufficient, yet sometimes a graph may contain isolates (isolated nodes not connected with any other edge). So to include those vertices, we may use <code>vertices</code> argument. Additionally to include any of the vertex property in the graph being created, we may use that as an additional columns in the data frame. Similar to this analogy, all additional columns in our edges dataset (after first two columns) will be used to set edge properties.</p>
<p>Example-2: Let’s add an isolated edge <code>"6"</code> in our graph.</p>
<div class="sourceCode" id="cb1188"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df_v</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span></span>
<span>  id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">4</span>, <span class="fl">5</span>, <span class="fl">6</span><span class="op">)</span>,</span>
<span>  name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Ram"</span>, <span class="st">"Shyam"</span>, <span class="st">"Alex"</span>, <span class="st">"Bob"</span>, <span class="st">"Charlie"</span>, <span class="st">"Kumar"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co"># Creating graph object</span></span>
<span><span class="va">gr3</span> <span class="op">&lt;-</span> <span class="fu">graph_from_data_frame</span><span class="op">(</span><span class="va">df</span>, directed <span class="op">=</span> <span class="cn">FALSE</span>, vertices <span class="op">=</span> <span class="va">df_v</span><span class="op">)</span></span>
<span><span class="co"># Let's print it</span></span>
<span><span class="va">gr3</span></span></code></pre></div>
<pre><code>## IGRAPH 74e71a3 UN-- 6 4 -- 
## + attr: name (v/c)
## + edges from 74e71a3 (vertex names):
## [1] Ram --Shyam   Ram --Alex    Alex--Charlie Alex--Bob</code></pre>
<p>Notice the change in number of edges now. Also notice that the edges printed with different names due to presence of column named <code>name</code> in vertices data frame.</p>
<p>Readers may try to add additional columns in edge dataset/data frame and create respective graph objects.</p>
</div>
<div id="creating-a-graph-from-edge-list" class="section level3" number="26.2.3">
<h3>
<span class="header-section-number">26.2.3</span> Creating a graph from Edge list<a class="anchor" aria-label="anchor" href="#creating-a-graph-from-edge-list"><i class="fas fa-link"></i></a>
</h3>
<p>Creating graphs from edge-lists is nearly the same approach as creating graphs from data frames. Only difference is absence of <code>vertices</code> argument here. The syntax is</p>
<pre><code>graph_from_edgelist(el, directed = TRUE)</code></pre>
<p>Here <code>el</code> should be a two column matrix, character or numeric, representing edges; and thus that’s another difference here.</p>
<div class="sourceCode" id="cb1191"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">edges</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span></span>
<span>  origin <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Ram"</span>, <span class="st">"Ram"</span>, <span class="st">"Alex"</span>, <span class="st">"Alex"</span><span class="op">)</span>, </span>
<span>  dest <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Shyam"</span>, <span class="st">"Alex"</span>, <span class="st">"Charlie"</span>, <span class="st">"Bob"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">edges</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">as.matrix</a></span><span class="op">(</span><span class="va">edges</span><span class="op">)</span></span>
<span><span class="co"># Now let's create a graph</span></span>
<span><span class="va">gr4</span> <span class="op">&lt;-</span> <span class="fu">graph_from_edgelist</span><span class="op">(</span><span class="va">edges</span>, directed <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co"># And print it</span></span>
<span><span class="va">gr4</span></span></code></pre></div>
<pre><code>## IGRAPH 74ebbf5 UN-- 5 4 -- 
## + attr: name (v/c)
## + edges from 74ebbf5 (vertex names):
## [1] Ram --Shyam   Ram --Alex    Alex--Charlie Alex--Bob</code></pre>
<p>Fine enough. We have successfully created an undirected graph with <code>5</code> nodes and <code>4</code> edges.</p>
</div>
<div id="creating-a-graph-from-adjacency-matrix" class="section level3" number="26.2.4">
<h3>
<span class="header-section-number">26.2.4</span> Creating a graph from adjacency matrix<a class="anchor" aria-label="anchor" href="#creating-a-graph-from-adjacency-matrix"><i class="fas fa-link"></i></a>
</h3>
<p>But what exactly is an adjacency matrix? It’s a square matrix sized <span class="math inline">\(n \times n\)</span>, where both the rows and columns are indexed by <span class="math inline">\(n\)</span> vertices. The <span class="math inline">\((i, j)\)</span>-th entry of this matrix holds significance:</p>
<ul>
<li>In a graph devoid of any edge attribute such as <code>weight</code>, a value of <code>1</code> signifies the existence of an edge from vertex <span class="math inline">\(v_{i}\)</span> to <span class="math inline">\(v_j\)</span>. Conversely, a value of <code>0</code> indicates the absence of an edge between those two vertices.</li>
<li>However, in graphs equipped with edge attributes like <code>weight</code>, the corresponding numerical value represents the weight of the edge from vertex <span class="math inline">\(v_{i}\)</span> to <span class="math inline">\(v_j\)</span>.</li>
</ul>
<p>Example: Let’s try to create graph as shown in <a href="network-analyticsgraph-theory-in-r.html#fig:gra6">26.6</a> through corresponding adjacency matrix. First, without weights.</p>
<div class="sourceCode" id="cb1193"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Let's create the matrix</span></span>
<span><span class="va">adj_mat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/structure.html">structure</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">0</span><span class="op">)</span>, dim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">4L</span>, </span>
<span><span class="fl">4L</span><span class="op">)</span>, dimnames <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"DEL"</span>, <span class="st">"BNG"</span>, <span class="st">"BOM"</span>, <span class="st">"PNQ"</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"DEL"</span>, </span>
<span><span class="st">"BNG"</span>, <span class="st">"BOM"</span>, <span class="st">"PNQ"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">adj_mat</span></span></code></pre></div>
<pre><code>##     DEL BNG BOM PNQ
## DEL   0   1   1   1
## BNG   1   0   1   0
## BOM   1   1   0   1
## PNQ   1   0   1   0</code></pre>
<div class="sourceCode" id="cb1195"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Let's create the graph</span></span>
<span><span class="va">gr5</span> <span class="op">&lt;-</span> <span class="fu">graph_from_adjacency_matrix</span><span class="op">(</span><span class="va">adj_mat</span><span class="op">)</span></span>
<span><span class="co"># Let's print it</span></span>
<span><span class="va">gr5</span></span></code></pre></div>
<pre><code>## IGRAPH 74efee3 DN-- 4 10 -- 
## + attr: name (v/c)
## + edges from 74efee3 (vertex names):
##  [1] DEL-&gt;BNG DEL-&gt;BOM DEL-&gt;PNQ BNG-&gt;DEL BNG-&gt;BOM BOM-&gt;DEL BOM-&gt;BNG BOM-&gt;PNQ
##  [9] PNQ-&gt;DEL PNQ-&gt;BOM</code></pre>
<p>So far so good. Directed graph (default) has been created with edges between airports both to and from separately. Now let us try to create weighted graph for the same data where weights will now be the distance between those airports.</p>
<div class="sourceCode" id="cb1197"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Let's create the matrix</span></span>
<span><span class="va">adj_mat2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/structure.html">structure</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1750</span>, <span class="fl">1150</span>, <span class="fl">1200</span>, <span class="fl">1750</span>, <span class="fl">0</span>, <span class="fl">850</span>, <span class="fl">0</span>, <span class="fl">1150</span>, <span class="fl">850</span>, </span>
<span><span class="fl">0</span>, <span class="fl">120</span>, <span class="fl">1200</span>, <span class="fl">0</span>, <span class="fl">120</span>, <span class="fl">0</span><span class="op">)</span>, dim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">4L</span>, <span class="fl">4L</span><span class="op">)</span>, dimnames <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"DEL"</span>, </span>
<span><span class="st">"BNG"</span>, <span class="st">"BOM"</span>, <span class="st">"PNQ"</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"DEL"</span>, <span class="st">"BNG"</span>, <span class="st">"BOM"</span>, <span class="st">"PNQ"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">adj_mat2</span></span></code></pre></div>
<pre><code>##      DEL  BNG  BOM  PNQ
## DEL    0 1750 1150 1200
## BNG 1750    0  850    0
## BOM 1150  850    0  120
## PNQ 1200    0  120    0</code></pre>
<div class="sourceCode" id="cb1199"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Let's create the graph</span></span>
<span><span class="va">gr6</span> <span class="op">&lt;-</span> <span class="fu">graph_from_adjacency_matrix</span><span class="op">(</span><span class="va">adj_mat2</span>, weighted <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co"># Let's print it</span></span>
<span><span class="va">gr6</span></span></code></pre></div>
<pre><code>## IGRAPH 74f40d8 DNW- 4 10 -- 
## + attr: name (v/c), weight (e/n)
## + edges from 74f40d8 (vertex names):
##  [1] DEL-&gt;BNG DEL-&gt;BOM DEL-&gt;PNQ BNG-&gt;DEL BNG-&gt;BOM BOM-&gt;DEL BOM-&gt;BNG BOM-&gt;PNQ
##  [9] PNQ-&gt;DEL PNQ-&gt;BOM</code></pre>
<p>This time notice that edge property named <code>weight</code> with <code>numeric</code> type has been added to the graph.</p>
</div>
<div id="getting-data-back-from-graph-objects" class="section level3" number="26.2.5">
<h3>
<span class="header-section-number">26.2.5</span> Getting data back from graph objects<a class="anchor" aria-label="anchor" href="#getting-data-back-from-graph-objects"><i class="fas fa-link"></i></a>
</h3>
<p>Once the graph objects have been created getting the data back both in <code>data.frame</code> or adjacency <code>matrix</code> is pretty easy. For this we can use either of <code>igraph</code> functions <code><a href="https://r.igraph.org/reference/graph_from_data_frame.html">as_data_frame()</a></code> or <code><a href="https://r.igraph.org/reference/as_adjacency_matrix.html">as_adjacency_matrix()</a></code>. Let check both these functions.</p>
<ol style="list-style-type: decimal">
<li>
<code><a href="https://r.igraph.org/reference/graph_from_data_frame.html">as_data_frame()</a></code> : Since package <code>tibble</code>’s earlier versions also had a same named function, it is safe to use <code><a href="https://r.igraph.org/reference/graph_from_data_frame.html">igraph::as_data_frame()</a></code> to avoid conflict and bug in the code. It takes a igraph object and outputs a <code>data.frame</code>. For example let’s get the data back from <code>gr6</code> object created in above code. Since the <code>gr6</code> was created from an adjacency matrix it will be amusing to see if the function is working correctly.</li>
</ol>
<div class="sourceCode" id="cb1201"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">igraph</span><span class="fu">::</span><span class="fu"><a href="https://r.igraph.org/reference/graph_from_data_frame.html">as_data_frame</a></span><span class="op">(</span><span class="va">gr6</span><span class="op">)</span></span></code></pre></div>
<pre><code>##    from  to weight
## 1   DEL BNG   1750
## 2   DEL BOM   1150
## 3   DEL PNQ   1200
## 4   BNG DEL   1750
## 5   BNG BOM    850
## 6   BOM DEL   1150
## 7   BOM BNG    850
## 8   BOM PNQ    120
## 9   PNQ DEL   1200
## 10  PNQ BOM    120</code></pre>
<p>From the output above, it is clear that the function worked correctly. Since the graph was <code>directed</code> the edges have been created from both sides. So let’s also check the function’s output in case of undirected graph.</p>
<div class="sourceCode" id="cb1203"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">igraph</span><span class="fu">::</span><span class="fu"><a href="https://r.igraph.org/reference/graph_from_data_frame.html">as_data_frame</a></span><span class="op">(</span><span class="fu">as.undirected</span><span class="op">(</span><span class="va">gr6</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>##   from  to weight
## 1  DEL BNG   3500
## 2  DEL BOM   2300
## 3  BNG BOM   1700
## 4  DEL PNQ   2400
## 5  BOM PNQ    240</code></pre>
<p>Absolutely fine. But notice that weights of the edges has been combined while converting directed graph to an undirected graph. That also can be tackled of while using <code><a href="https://r.igraph.org/reference/as.directed.html">as.undirected()</a></code> by tweaking the argument <code>edge.attr.comb</code> which basically takes a function to combine the separate edge attributes. So,</p>
<div class="sourceCode" id="cb1205"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">as.undirected</span><span class="op">(</span><span class="va">gr6</span>, edge.attr.comb <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>weight <span class="op">=</span> <span class="va">mean</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">igraph</span><span class="fu">::</span><span class="fu"><a href="https://r.igraph.org/reference/graph_from_data_frame.html">as_data_frame</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code>##   from  to weight
## 1  DEL BNG   1750
## 2  DEL BOM   1150
## 3  BNG BOM    850
## 4  DEL PNQ   1200
## 5  BOM PNQ    120</code></pre>
<p>It will not be out of place to mention here that this function has an additional argument <code>what</code>, in case requirement is to export <code>"vertex"</code> and/or <code>"edges"</code> data. If the argument is set to <code>"both"</code> the two data-sets will be returned in a list.</p>
<div class="sourceCode" id="cb1207"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Vertices data only</span></span>
<span><span class="fu">igraph</span><span class="fu">::</span><span class="fu"><a href="https://r.igraph.org/reference/graph_from_data_frame.html">as_data_frame</a></span><span class="op">(</span><span class="va">gr6</span>, what <span class="op">=</span> <span class="st">"vertices"</span><span class="op">)</span></span></code></pre></div>
<pre><code>##     name
## DEL  DEL
## BNG  BNG
## BOM  BOM
## PNQ  PNQ</code></pre>
<ol start="2" style="list-style-type: decimal">
<li>
<code><a href="https://r.igraph.org/reference/as_adjacency_matrix.html">as_adjacency_matrix()</a></code> : Similar to above function, her this function will take an igraph object and returns adjacency <code>matrix</code> here instead. So let’s check it also.</li>
</ol>
<div class="sourceCode" id="cb1209"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">as.undirected</span><span class="op">(</span><span class="va">gr6</span>, edge.attr.comb <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>weight <span class="op">=</span> <span class="va">mean</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">igraph</span><span class="fu">::</span><span class="fu"><a href="https://r.igraph.org/reference/as_adjacency_matrix.html">as_adjacency_matrix</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code>## 4 x 4 sparse Matrix of class "dgCMatrix"
##     DEL BNG BOM PNQ
## DEL   .   1   1   1
## BNG   1   .   1   .
## BOM   1   1   .   1
## PNQ   1   .   1   .</code></pre>
<p>We may notice that adjacency matrix has been returned but without weights. So to map <code>weights</code> we may use its <code>attr</code> argument which by default is <code>NULL</code>.</p>
<div class="sourceCode" id="cb1211"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">as.undirected</span><span class="op">(</span><span class="va">gr6</span>, edge.attr.comb <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>weight <span class="op">=</span> <span class="va">mean</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">igraph</span><span class="fu">::</span><span class="fu"><a href="https://r.igraph.org/reference/as_adjacency_matrix.html">as_adjacency_matrix</a></span><span class="op">(</span>attr <span class="op">=</span> <span class="st">"weight"</span><span class="op">)</span></span></code></pre></div>
<pre><code>## 4 x 4 sparse Matrix of class "dgCMatrix"
##      DEL  BNG  BOM  PNQ
## DEL    . 1750 1150 1200
## BNG 1750    .  850    .
## BOM 1150  850    .  120
## PNQ 1200    .  120    .</code></pre>
</div>
</div>
<div id="adding-vertex-andor-edge-attributes-to-an-existing-igraph-object" class="section level2" number="26.3">
<h2>
<span class="header-section-number">26.3</span> Adding vertex and/or edge attributes to an existing <code>igraph</code> object<a class="anchor" aria-label="anchor" href="#adding-vertex-andor-edge-attributes-to-an-existing-igraph-object"><i class="fas fa-link"></i></a>
</h2>
<p>We’ve previously explored how vertex and edge properties can be incorporated into an <code>igraph</code> during its creation. However, there may be instances where the need arises to add vertex and/or edge properties to an <code>igraph</code> object after its creation or to an existing igraph object. Before delving into that, let’s first understand how we can retrieve existing edges, nodes, or their attributes from an existing <code>igraph</code>.</p>
<ol style="list-style-type: decimal">
<li>Getting vertices of an <code>igraph</code> using <code><a href="https://r.igraph.org/reference/V.html">V()</a></code>
</li>
</ol>
<div class="sourceCode" id="cb1213"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">V</span><span class="op">(</span><span class="va">gr6</span><span class="op">)</span></span></code></pre></div>
<pre><code>## + 4/4 vertices, named, from 74f40d8:
## [1] DEL BNG BOM PNQ</code></pre>
<ol start="2" style="list-style-type: decimal">
<li>Getting edges of an <code>igraph</code> using <code><a href="https://r.igraph.org/reference/E.html">E()</a></code>
</li>
</ol>
<div class="sourceCode" id="cb1215"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">E</span><span class="op">(</span><span class="va">gr6</span><span class="op">)</span></span></code></pre></div>
<pre><code>## + 10/10 edges from 74f40d8 (vertex names):
##  [1] DEL-&gt;BNG DEL-&gt;BOM DEL-&gt;PNQ BNG-&gt;DEL BNG-&gt;BOM BOM-&gt;DEL BOM-&gt;BNG BOM-&gt;PNQ
##  [9] PNQ-&gt;DEL PNQ-&gt;BOM</code></pre>
<ol start="3" style="list-style-type: decimal">
<li>Extracting edge or vertex attribute using <code>$</code>
</li>
</ol>
<div class="sourceCode" id="cb1217"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Vertex Property "name"</span></span>
<span><span class="fu">V</span><span class="op">(</span><span class="va">gr6</span><span class="op">)</span><span class="op">$</span><span class="va">name</span></span></code></pre></div>
<pre><code>## [1] "DEL" "BNG" "BOM" "PNQ"</code></pre>
<div class="sourceCode" id="cb1219"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Edge property "weight"</span></span>
<span><span class="fu">E</span><span class="op">(</span><span class="va">gr6</span><span class="op">)</span><span class="op">$</span><span class="va">weight</span></span></code></pre></div>
<pre><code>##  [1] 1750 1150 1200 1750  850 1150  850  120 1200  120</code></pre>
<ol start="4" style="list-style-type: decimal">
<li>Adding vertex or edge property similarly using <code>$</code>
</li>
</ol>
<div class="sourceCode" id="cb1221"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># adding vertex property say "airport_name"</span></span>
<span><span class="fu">V</span><span class="op">(</span><span class="va">gr6</span><span class="op">)</span><span class="op">$</span><span class="va">airport_name</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"New Delhi"</span>, <span class="st">"Bengaluru"</span>, <span class="st">"Mumbai"</span>, <span class="st">"Pune"</span><span class="op">)</span></span>
<span><span class="co"># Single value will be replicated across all values</span></span>
<span><span class="fu">V</span><span class="op">(</span><span class="va">gr6</span><span class="op">)</span><span class="op">$</span><span class="va">country</span> <span class="op">&lt;-</span> <span class="st">"India"</span></span>
<span></span>
<span><span class="co">## Let's check it</span></span>
<span><span class="fu">igraph</span><span class="fu">::</span><span class="fu"><a href="https://r.igraph.org/reference/graph_from_data_frame.html">as_data_frame</a></span><span class="op">(</span><span class="va">gr6</span>, what <span class="op">=</span> <span class="st">"vertices"</span><span class="op">)</span></span></code></pre></div>
<pre><code>##     name airport_name country
## DEL  DEL    New Delhi   India
## BNG  BNG    Bengaluru   India
## BOM  BOM       Mumbai   India
## PNQ  PNQ         Pune   India</code></pre>
<p>Let’s also add some edge property too.</p>
<div class="sourceCode" id="cb1223"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Adding edge property "carrier"</span></span>
<span><span class="fu">E</span><span class="op">(</span><span class="va">gr6</span><span class="op">)</span><span class="op">$</span><span class="va">carrier</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="st">"Vistara"</span>,<span class="fl">6</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="st">"Indigo"</span>, <span class="fl">2</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="st">"Air India"</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co"># Adding another edge property on the basis of condition</span></span>
<span><span class="fu">E</span><span class="op">(</span><span class="va">gr6</span><span class="op">)</span><span class="op">$</span><span class="va">route</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html">case_when</a></span><span class="op">(</span></span>
<span>  <span class="fu">E</span><span class="op">(</span><span class="va">gr6</span><span class="op">)</span><span class="op">$</span><span class="va">weight</span> <span class="op">&lt;=</span> <span class="fl">400</span> <span class="op">~</span> <span class="st">"Short"</span>,</span>
<span>  <span class="fu">E</span><span class="op">(</span><span class="va">gr6</span><span class="op">)</span><span class="op">$</span><span class="va">weight</span> <span class="op">&lt;=</span> <span class="fl">1000</span> <span class="op">~</span> <span class="st">"Medium"</span>,</span>
<span>  <span class="cn">TRUE</span> <span class="op">~</span> <span class="st">"Long"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co">## Let's check it</span></span>
<span><span class="fu">igraph</span><span class="fu">::</span><span class="fu"><a href="https://r.igraph.org/reference/graph_from_data_frame.html">as_data_frame</a></span><span class="op">(</span><span class="va">gr6</span><span class="op">)</span></span></code></pre></div>
<pre><code>##    from  to weight   carrier  route
## 1   DEL BNG   1750   Vistara   Long
## 2   DEL BOM   1150   Vistara   Long
## 3   DEL PNQ   1200   Vistara   Long
## 4   BNG DEL   1750   Vistara   Long
## 5   BNG BOM    850   Vistara Medium
## 6   BOM DEL   1150   Vistara   Long
## 7   BOM BNG    850    Indigo Medium
## 8   BOM PNQ    120    Indigo  Short
## 9   PNQ DEL   1200 Air India   Long
## 10  PNQ BOM    120 Air India  Short</code></pre>
</div>
<div id="visualising-graphs" class="section level2" number="26.4">
<h2>
<span class="header-section-number">26.4</span> Visualising graphs<a class="anchor" aria-label="anchor" href="#visualising-graphs"><i class="fas fa-link"></i></a>
</h2>
<p>After covering graph definition and storage methods, let’s explore techniques for visualizing them. Visualization is crucial for conveying the essence of graphs and networks, with the arrangement and style playing significant roles in communication. Apart from factors related to visual appeal, layout becomes crucial. The relative positioning of vertices greatly impacts visualization effectiveness. This is evident from the comparison of two graphs in Figure <a href="network-analyticsgraph-theory-in-r.html#fig:gra25">26.7</a>, both representing the same graph depicted earlier in Figure <a href="network-analyticsgraph-theory-in-r.html#fig:gra2">26.2</a>.</p>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:gra25"></span>
<img src="DauR_files/figure-html/gra25-1.png" alt="Two layouts of a same graph" width="48%" height="34%"><img src="DauR_files/figure-html/gra25-2.png" alt="Two layouts of a same graph" width="48%" height="34%"><p class="caption">
Figure 26.7: Two layouts of a same graph
</p>
</div>
<p>Nowadays, there are many packages available in R to plot or visualise graph objects while analysing network data. Of these, we will learn two here, (i) one plotting with <code>igraph</code> only though the plots created will be static; and (ii) <code>visNetwork</code> which will be used to create interactive visualizations. Visualizing geographical networks have been discussed separately in an another Chapter.</p>
</div>
<div id="plotting-using-plot-in-igraph" class="section level2" number="26.5">
<h2>
<span class="header-section-number">26.5</span> Plotting using <code>plot()</code> in <code>igraph</code><a class="anchor" aria-label="anchor" href="#plotting-using-plot-in-igraph"><i class="fas fa-link"></i></a>
</h2>
<p>Plotting <code>igraph</code> objects in R is very simple. Just use <code>plot</code> command which basically uses <code>plot.igraph</code> method, and will plot any igraph object using default values to its other arguments. As we have already seen that layouts are important while plotting graph objects, we can set layout using argument <code>layout</code> in <code>plot</code>.</p>
<p>In the following example (Figure <a href="network-analyticsgraph-theory-in-r.html#fig:gra26">26.8</a>), we can see two random layouts of same graph as we have seen in Figure <a href="network-analyticsgraph-theory-in-r.html#fig:gra25">26.7</a>.</p>
<div class="sourceCode" id="cb1225"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_gr</span> <span class="op">&lt;-</span> <span class="fu">igraph</span><span class="fu">::</span><span class="fu"><a href="https://r.igraph.org/reference/graph_from_data_frame.html">as_data_frame</a></span><span class="op">(</span><span class="va">kite</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html">slice</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">9</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">graph_from_data_frame</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">12345</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">my_gr</span>, vertex.size <span class="op">=</span> <span class="fl">25</span>, layout <span class="op">=</span> <span class="va">layout_randomly</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">54321</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">my_gr</span>, vertex.size <span class="op">=</span> <span class="fl">25</span>, layout <span class="op">=</span> <span class="va">layout_randomly</span><span class="op">)</span></span></code></pre></div>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:gra26"></span>
<img src="DauR_files/figure-html/gra26-1.png" alt="Two Other layouts of a same graph" width="48%" height="34%"><img src="DauR_files/figure-html/gra26-2.png" alt="Two Other layouts of a same graph" width="48%" height="34%"><p class="caption">
Figure 26.8: Two Other layouts of a same graph
</p>
</div>
<p>In the above example, we have seen that same layout may generate different coordinates for plotting at each iteration. However, using specific random number seed, we can fix the random layout of graph for purpose of reproducibility.</p>
<p>Before moving on let’s create a famous network/graph of <code>Zachary karate club</code> and learn how to plot network graph effectively. The description available on Wikipedia for this network, I am reproducing here. <em>A social network of a karate club was studied by Wayne W. Zachary for a period of three years from 1970 to 1972.[2] The network captures 34 members of a karate club, documenting links between pairs of members who interacted outside the club. During the study a conflict arose between the administrator “John A” and instructor “Mr. Hi” (pseudonyms), which led to the split of the club into two. Half of the members formed a new club around Mr. Hi; members from the other part found a new instructor or gave up karate. Based on collected data Zachary correctly assigned all but one member of the club to the groups they actually joined after the split.</em></p>
<p>This graph object is available in package <code>igraphdata</code> from which we can load it.</p>
<div class="sourceCode" id="cb1226"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://r.igraph.org/">igraph</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://igraph.org">igraphdata</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="st">"karate"</span><span class="op">)</span></span>
<span><span class="va">karate</span></span></code></pre></div>
<pre><code>## This graph was created by an old(er) igraph version.
##   Call upgrade_graph() on it to use with the current igraph version
##   For now we convert it on the fly...</code></pre>
<pre><code>## IGRAPH 4b458a1 UNW- 34 78 -- Zachary's karate club network
## + attr: name (g/c), Citation (g/c), Author (g/c), Faction (v/n), name
## | (v/c), label (v/c), color (v/n), weight (e/n)
## + edges from 4b458a1 (vertex names):
##  [1] Mr Hi  --Actor 2  Mr Hi  --Actor 3  Mr Hi  --Actor 4  Mr Hi  --Actor 5 
##  [5] Mr Hi  --Actor 6  Mr Hi  --Actor 7  Mr Hi  --Actor 8  Mr Hi  --Actor 9 
##  [9] Mr Hi  --Actor 11 Mr Hi  --Actor 12 Mr Hi  --Actor 13 Mr Hi  --Actor 14
## [13] Mr Hi  --Actor 18 Mr Hi  --Actor 20 Mr Hi  --Actor 22 Mr Hi  --Actor 32
## [17] Actor 2--Actor 3  Actor 2--Actor 4  Actor 2--Actor 8  Actor 2--Actor 14
## [21] Actor 2--Actor 18 Actor 2--Actor 20 Actor 2--Actor 22 Actor 2--Actor 31
## [25] Actor 3--Actor 4  Actor 3--Actor 8  Actor 3--Actor 9  Actor 3--Actor 10
## + ... omitted several edges</code></pre>
<div class="sourceCode" id="cb1229"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">karate_data</span> <span class="op">&lt;-</span> <span class="fu">igraph</span><span class="fu">::</span><span class="fu"><a href="https://r.igraph.org/reference/graph_from_data_frame.html">as_data_frame</a></span><span class="op">(</span><span class="va">karate</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">karate_data</span><span class="op">)</span></span></code></pre></div>
<pre><code>##    from      to weight
## 1 Mr Hi Actor 2      4
## 2 Mr Hi Actor 3      5
## 3 Mr Hi Actor 4      3
## 4 Mr Hi Actor 5      3
## 5 Mr Hi Actor 6      3
## 6 Mr Hi Actor 7      3</code></pre>
<div class="sourceCode" id="cb1231"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">karate</span>, layout <span class="op">=</span> <span class="va">layout_nicely</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="DauR_files/figure-html/gra27-1.png" width="672"></div>
<div id="layouts" class="section level3" number="26.5.1">
<h3>
<span class="header-section-number">26.5.1</span> Layouts<a class="anchor" aria-label="anchor" href="#layouts"><i class="fas fa-link"></i></a>
</h3>
<p>Network layouts are algorithms that return coordinates for each node in a network. The igraph library offers several built-in layouts. Learning the algorithm behind these layouts is outside the scope of the chapter.</p>
<ul>
<li>
<code><a href="https://r.igraph.org/reference/layout_as_bipartite.html">layout_as_bipartite()</a></code> Minimize edge-crossings in a simple two-row (or column) layout for bipartite graphs.</li>
<li>
<code><a href="https://r.igraph.org/reference/layout_as_star.html">layout_as_star()</a></code> A simple layout generator, that places one vertex in the center of a circle and the rest of the vertices equidistantly on the perimeter.</li>
<li>
<code><a href="https://r.igraph.org/reference/layout_as_tree.html">layout_as_tree()</a></code> The <strong>Reingold-Tilford</strong> graph layout algorithm having a tree-like layout, perfect for trees, acceptable for graphs with not too many cycles.</li>
<li>
<code><a href="https://r.igraph.org/reference/layout_in_circle.html">layout_in_circle()</a></code> Places vertices on a circle, in the order of their vertex ids.</li>
<li>
<code><a href="https://r.igraph.org/reference/layout_nicely.html">layout_nicely()</a></code> This function tries to choose an appropriate graph layout algorithm for the graph, automatically, based on a simple algorithm.</li>
<li>
<code><a href="https://r.igraph.org/reference/layout_on_grid.html">layout_on_grid()</a></code> places vertices on a rectangular grid, in two or three dimensions</li>
<li>
<code><a href="https://r.igraph.org/reference/layout_on_sphere.html">layout_on_sphere()</a></code> Places vertices on a sphere, approximately uniformly, in the order of their vertex ids.</li>
<li>
<code><a href="https://r.igraph.org/reference/layout_randomly.html">layout_randomly()</a></code> This function uniformly randomly places the vertices of the graph in two or three dimensions.</li>
<li>
<code><a href="https://r.igraph.org/reference/layout_with_dh.html">layout_with_dh()</a></code> Places vertices of a graph on the plane, according to the simulated annealing algorithm by <strong>Davidson and Harel</strong>.</li>
<li>
<code><a href="https://r.igraph.org/reference/layout_with_fr.html">layout_with_fr()</a></code> Places vertices on the plane using the force-directed layout algorithm by <strong>Fruchterman and Reingold</strong>.</li>
<li>
<code><a href="https://r.igraph.org/reference/layout_with_gem.html">layout_with_gem()</a></code> Places vertices on the plane using the GEM force-directed layout algorithm.</li>
<li>
<code><a href="https://r.igraph.org/reference/layout_with_kk.html">layout_with_kk()</a></code> <strong>Kamada-Kawai</strong> layout algorithm which places the vertices on the plane, or in 3D space, based on a physical model of springs.</li>
<li>
<code><a href="https://r.igraph.org/reference/layout_with_sugiyama.html">layout_with_sugiyama()</a></code> <strong>Sugiyama</strong> layout algorithm for layered directed acyclic graphs. The algorithm minimized edge crossings.</li>
</ul>
<p>Discussing each and every layout here will be out of the scope. Readers are advised to play with these different layouts to get a fair understanding of these layouts. However, we may see a few useful layouts as example on <code>karate</code> data.</p>
<ul>
<li>Circular layout: Figure <a href="network-analyticsgraph-theory-in-r.html#fig:gra28">26.9</a> Left.</li>
<li>Fruchterman Reingold: Figure <a href="network-analyticsgraph-theory-in-r.html#fig:gra28">26.9</a> Right.</li>
<li>Kamada Kawai: Figure <a href="network-analyticsgraph-theory-in-r.html#fig:gra29">26.10</a> Left.</li>
<li>Sugiyama: Figure <a href="network-analyticsgraph-theory-in-r.html#fig:gra29">26.10</a> Right.</li>
<li>Tree layouts (two representations): Figure <a href="network-analyticsgraph-theory-in-r.html#fig:gra30">26.11</a>.</li>
</ul>
<div class="sourceCode" id="cb1232"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://r.igraph.org/reference/igraph_options.html">igraph_options</a></span><span class="op">(</span>vertex.size <span class="op">=</span> <span class="fl">18</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html">par</a></span><span class="op">(</span>mfrow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">karate</span>, layout <span class="op">=</span> <span class="va">layout_in_circle</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/title.html">title</a></span><span class="op">(</span><span class="st">"Circular layout"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">karate</span>, layout <span class="op">=</span> <span class="va">layout_with_fr</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/title.html">title</a></span><span class="op">(</span><span class="st">"Fruchterman - Reingold"</span><span class="op">)</span></span></code></pre></div>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:gra28"></span>
<img src="DauR_files/figure-html/gra28-1.png" alt="Two layouts of Zachary Karate Club Network" width="48%" height="34%"><p class="caption">
Figure 26.9: Two layouts of Zachary Karate Club Network
</p>
</div>
<div class="sourceCode" id="cb1233"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html">par</a></span><span class="op">(</span>mfrow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">karate</span>, layout <span class="op">=</span> <span class="va">layout_with_kk</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/title.html">title</a></span><span class="op">(</span><span class="st">"Kamada Kawai"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">karate</span>, layout <span class="op">=</span> <span class="va">layout_with_sugiyama</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/title.html">title</a></span><span class="op">(</span><span class="st">"Sugiyama"</span><span class="op">)</span></span></code></pre></div>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:gra29"></span>
<img src="DauR_files/figure-html/gra29-1.png" alt="Two Other layouts of Zachary Karate Club Network" width="48%" height="34%"><p class="caption">
Figure 26.10: Two Other layouts of Zachary Karate Club Network
</p>
</div>
<div class="sourceCode" id="cb1234"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html">par</a></span><span class="op">(</span>mfrow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">karate</span>, layout <span class="op">=</span> <span class="va">layout_as_tree</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/title.html">title</a></span><span class="op">(</span><span class="st">"Default Tree layout"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">karate</span>, layout <span class="op">=</span> <span class="fu"><a href="https://r.igraph.org/reference/layout_as_tree.html">layout_as_tree</a></span><span class="op">(</span><span class="va">karate</span>, circular <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/title.html">title</a></span><span class="op">(</span><span class="st">"circular Tree"</span><span class="op">)</span></span></code></pre></div>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:gra30"></span>
<img src="DauR_files/figure-html/gra30-1.png" alt="Two Tree layouts of Zachary Karate Club Network" width="48%" height="34%"><p class="caption">
Figure 26.11: Two Tree layouts of Zachary Karate Club Network
</p>
</div>
</div>
<div id="displaying-vertexedge-properties" class="section level3" number="26.5.2">
<h3>
<span class="header-section-number">26.5.2</span> Displaying Vertex/Edge properties<a class="anchor" aria-label="anchor" href="#displaying-vertexedge-properties"><i class="fas fa-link"></i></a>
</h3>
<p>While the layouts may be important when displaying networks, additional information such as displaying vertex or edge properties such as their categories, etc. may also play an important role. Edge/Vertex properties can both be continuous and/or discrete and visualising those properties in a network shall be through usual properties like color, size, width, shape, etc. Out <code>karate</code> graph object is already colored, so readers may be wondering how the vertices are colored in the representation.</p>
<p>Actually vertices, in an igraph object can be colored using its property attribute <code>color</code>. Let’s retrieve it to understand.</p>
<div class="sourceCode" id="cb1235"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://r.igraph.org/reference/V.html">V</a></span><span class="op">(</span><span class="va">karate</span><span class="op">)</span><span class="op">$</span><span class="va">color</span></span></code></pre></div>
<pre><code>##  [1] 1 1 1 1 1 1 1 1 2 2 1 1 1 1 2 2 1 1 2 1 2 1 2 2 2 2 2 2 2 2 2 2 2 2</code></pre>
<p>We may see some discrete integer values are stored therein. Let’s reallocate these to specific colors as we want.</p>
<div class="sourceCode" id="cb1237"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://r.igraph.org/reference/V.html">V</a></span><span class="op">(</span><span class="va">karate</span><span class="op">)</span><span class="op">$</span><span class="va">color</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"red"</span>, <span class="st">"dodgerblue"</span><span class="op">)</span><span class="op">[</span><span class="fu"><a href="https://r.igraph.org/reference/V.html">V</a></span><span class="op">(</span><span class="va">karate</span><span class="op">)</span><span class="op">$</span><span class="va">color</span><span class="op">]</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="fu"><a href="https://r.igraph.org/reference/V.html">V</a></span><span class="op">(</span><span class="va">karate</span><span class="op">)</span><span class="op">$</span><span class="va">color</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "red" "red" "red" "red" "red" "red"</code></pre>
<div class="sourceCode" id="cb1239"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">karate</span>, layout <span class="op">=</span> <span class="va">layout_nicely</span><span class="op">)</span></span></code></pre></div>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:gra32"></span>
<img src="DauR_files/figure-html/gra32-1.png" alt="Vertex coloring in Network" width="98%" height="34%"><p class="caption">
Figure 26.12: Vertex coloring in Network
</p>
</div>
<p>Similarly, we can use following attributes to display certain properties of vertices/edges in an igraph plot.</p>
<ul>
<li>
<strong>Vertex Properties</strong>
<ul>
<li>
<code>size</code> - Size of the vertex. Default is 15</li>
<li>
<code>color</code> - Fill color of the vertex</li>
<li>
<code>frame.color</code> - Border color of vertex</li>
<li>
<code>shape</code> - shape of vertex. Can allocate one of the following <code>c("circle", "square", "rectangle", "none")</code>.</li>
<li>
<code>label</code> - a character vector used to label the nodes</li>
<li>
<code>label.family</code> Font family of label. Default is <code>serif</code>
</li>
<li>
<code>label.font</code> Font of label. <code>1</code> means plain (default), <code>2</code>: bold, <code>3</code> italic, <code>4</code> bold italic <code>5</code> symbol</li>
<li>
<code>label.cex</code> font size of label</li>
</ul>
</li>
<li>
<strong>Edge properties</strong>
<ul>
<li>
<code>color</code> color of edge</li>
<li>
<code>width</code> edge width</li>
<li>
<code>lty</code> line type for edges (<code>0</code> or <code>"blank"</code>; <code>1</code> or <code>"solid"</code>; <code>2</code> or <code>"dashed"</code>; <code>3</code> or <code>"dotted"</code>; <code>4</code> or <code>"dotdash"</code>, <code>6</code> or <code>"twodash"</code>)</li>
<li>
<code>label</code> label of edges (<code>label.family</code>, <code>lable.font</code> and <code>label.cex</code> similarly for font family, font type and font size respectively)</li>
<li>
<code>curved</code>: Edge curvature; range is <code>0-1</code>
</li>
<li>
<code>arrow.size</code> Arrow size (default is 1) (for directed graphs)</li>
<li>
<code>arrow.width</code> arrow width, default is <code>1</code>.</li>
<li>
<code>arrow.mode</code>: arrow mode (<code>0</code> means no arrow; <code>1</code> back, <code>2</code> forward arrow, <code>3</code> both)</li>
</ul>
</li>
</ul>
<p>Apart from adding these properties to igraph object we can set these properties as arguments in the plot function, just by adding <code>edge.</code> or <code>vertex.</code> before the property/attribute name.</p>
<p>Let’s see some of these through the following example.</p>
<div class="sourceCode" id="cb1240"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># set reproducible layout</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">123</span><span class="op">)</span></span>
<span><span class="va">l_s</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r.igraph.org/reference/layout_nicely.html">layout_nicely</a></span><span class="op">(</span><span class="va">karate</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Add vertex labels</span></span>
<span><span class="fu"><a href="https://r.igraph.org/reference/V.html">V</a></span><span class="op">(</span><span class="va">karate</span><span class="op">)</span><span class="op">$</span><span class="va">label</span> <span class="op">&lt;-</span> <span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_remove.html">str_remove</a></span><span class="op">(</span><span class="fu"><a href="https://r.igraph.org/reference/V.html">V</a></span><span class="op">(</span><span class="va">karate</span><span class="op">)</span><span class="op">$</span><span class="va">name</span>, <span class="st">"Actor "</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Change shapes of two prominent actors</span></span>
<span><span class="fu"><a href="https://r.igraph.org/reference/V.html">V</a></span><span class="op">(</span><span class="va">karate</span><span class="op">)</span><span class="op">$</span><span class="va">shape</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://r.igraph.org/reference/V.html">V</a></span><span class="op">(</span><span class="va">karate</span><span class="op">)</span><span class="op">$</span><span class="va">name</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Mr Hi"</span>, <span class="st">"John A"</span><span class="op">)</span>, <span class="st">"rectangle"</span>, <span class="st">"circle"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Change Edge width as per "weight"</span></span>
<span><span class="fu"><a href="https://r.igraph.org/reference/E.html">E</a></span><span class="op">(</span><span class="va">karate</span><span class="op">)</span><span class="op">$</span><span class="va">width</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r.igraph.org/reference/E.html">E</a></span><span class="op">(</span><span class="va">karate</span><span class="op">)</span><span class="op">$</span><span class="va">weight</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">karate</span>, layout <span class="op">=</span> <span class="va">l_s</span>, edge.label.cex <span class="op">=</span> <span class="fl">0.7</span><span class="op">)</span></span></code></pre></div>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:gra33"></span>
<img src="DauR_files/figure-html/gra33-1.png" alt="Edge and Vertex properties in Network" width="98%"><p class="caption">
Figure 26.13: Edge and Vertex properties in Network
</p>
</div>
</div>
</div>
<div id="using-visnetwork-for-interactive-visualizations" class="section level2" number="26.6">
<h2>
<span class="header-section-number">26.6</span> Using <code>visNetwork</code> for interactive visualizations<a class="anchor" aria-label="anchor" href="#using-visnetwork-for-interactive-visualizations"><i class="fas fa-link"></i></a>
</h2>
</div>
<div id="subgraphs-adding-or-deleting-edgesvertices" class="section level2" number="26.7">
<h2>
<span class="header-section-number">26.7</span> Subgraphs, adding or deleting edges/vertices<a class="anchor" aria-label="anchor" href="#subgraphs-adding-or-deleting-edgesvertices"><i class="fas fa-link"></i></a>
</h2>
</div>
<div id="describing-networkgraph-for-edges-and-nodes-therein" class="section level2" number="26.8">
<h2>
<span class="header-section-number">26.8</span> Describing network/graph for edges and nodes therein<a class="anchor" aria-label="anchor" href="#describing-networkgraph-for-edges-and-nodes-therein"><i class="fas fa-link"></i></a>
</h2>
</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="part-vi-network-analytics.html">Part VI: Network Analytics</a></div>
<div class="next"><a href="applying-network-analysis-in-auditfraud-detection.html"><span class="header-section-number">27</span> Applying network analysis in audit/fraud detection</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#network-analyticsgraph-theory-in-r"><span class="header-section-number">26</span> Network Analytics/Graph theory in R</a></li>
<li>
<a class="nav-link" href="#an-introduction-to-graph-theory"><span class="header-section-number">26.1</span> An introduction to Graph theory</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#definition-of-a-graph"><span class="header-section-number">26.1.1</span> Definition of a graph</a></li>
<li><a class="nav-link" href="#types-of-graph">Types of graph</a></li>
<li><a class="nav-link" href="#vertex-and-edge-attributes"><span class="header-section-number">26.1.2</span> Vertex and Edge attributes</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#practical-approach-for-creating-graphs-in-r"><span class="header-section-number">26.2</span> Practical approach for creating graphs in R</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#packages-to-use"><span class="header-section-number">26.2.1</span> Packages to use</a></li>
<li><a class="nav-link" href="#creating-a-graph-from-data-frame"><span class="header-section-number">26.2.2</span> Creating a graph from data frame</a></li>
<li><a class="nav-link" href="#creating-a-graph-from-edge-list"><span class="header-section-number">26.2.3</span> Creating a graph from Edge list</a></li>
<li><a class="nav-link" href="#creating-a-graph-from-adjacency-matrix"><span class="header-section-number">26.2.4</span> Creating a graph from adjacency matrix</a></li>
<li><a class="nav-link" href="#getting-data-back-from-graph-objects"><span class="header-section-number">26.2.5</span> Getting data back from graph objects</a></li>
</ul>
</li>
<li><a class="nav-link" href="#adding-vertex-andor-edge-attributes-to-an-existing-igraph-object"><span class="header-section-number">26.3</span> Adding vertex and/or edge attributes to an existing igraph object</a></li>
<li><a class="nav-link" href="#visualising-graphs"><span class="header-section-number">26.4</span> Visualising graphs</a></li>
<li>
<a class="nav-link" href="#plotting-using-plot-in-igraph"><span class="header-section-number">26.5</span> Plotting using plot() in igraph</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#layouts"><span class="header-section-number">26.5.1</span> Layouts</a></li>
<li><a class="nav-link" href="#displaying-vertexedge-properties"><span class="header-section-number">26.5.2</span> Displaying Vertex/Edge properties</a></li>
</ul>
</li>
<li><a class="nav-link" href="#using-visnetwork-for-interactive-visualizations"><span class="header-section-number">26.6</span> Using visNetwork for interactive visualizations</a></li>
<li><a class="nav-link" href="#subgraphs-adding-or-deleting-edgesvertices"><span class="header-section-number">26.7</span> Subgraphs, adding or deleting edges/vertices</a></li>
<li><a class="nav-link" href="#describing-networkgraph-for-edges-and-nodes-therein"><span class="header-section-number">26.8</span> Describing network/graph for edges and nodes therein</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
          
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Data Analytics in Audit, using R</strong>" was written by Anil Goyal. It was last built on 2024-07-12.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
