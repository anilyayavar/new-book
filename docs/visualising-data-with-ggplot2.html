<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 13 Visualising data with ggplot2 | R for Audit Analytics</title>
<meta name="author" content="Anil Goyal">
<meta name="description" content="13.1 Core concepts of grammar of graphics ggplot21516 is the package developed by Hadley Wickham, which is based on concepts laid (2005) down by Leland Wilkinson in his The Grammar of Graphics.17...">
<meta name="generator" content="bookdown 0.40 with bs4_book()">
<meta property="og:title" content="Chapter 13 Visualising data with ggplot2 | R for Audit Analytics">
<meta property="og:type" content="book">
<meta property="og:url" content="https://anilyayavar.github.io/new-book/visualising-data-with-ggplot2.html">
<meta property="og:image" content="https://anilyayavar.github.io/new-book/images/cover.jpg">
<meta property="og:description" content="13.1 Core concepts of grammar of graphics ggplot21516 is the package developed by Hadley Wickham, which is based on concepts laid (2005) down by Leland Wilkinson in his The Grammar of Graphics.17...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 13 Visualising data with ggplot2 | R for Audit Analytics">
<meta name="twitter:description" content="13.1 Core concepts of grammar of graphics ggplot21516 is the package developed by Hadley Wickham, which is based on concepts laid (2005) down by Leland Wilkinson in his The Grammar of Graphics.17...">
<meta name="twitter:image" content="https://anilyayavar.github.io/new-book/images/cover.jpg">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.7.0/transition.js"></script><script src="libs/bs3compat-0.7.0/tabs.js"></script><script src="libs/bs3compat-0.7.0/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/kePrint-0.0.1/kePrint.js"></script><link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<style type="text/css">
    /* Used with Pandoc 2.11+ new --citeproc when CSL is used */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
        }
    .hanging div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }
  </style>
<link rel="stylesheet" href="style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">R for Audit Analytics</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Welcome to R for Audit Analytics</a></li>
<li><a class="" href="preface.html">Preface</a></li>
<li><a class="" href="about-author.html">About author</a></li>
<li><a class="" href="gearing-up.html">Gearing up</a></li>
<li><a class="" href="part-i-basic-r-programming-concepts.html">Part-I: Basic R Programming Concepts</a></li>
<li><a class="" href="r-programming-language.html"><span class="header-section-number">1</span> R Programming Language</a></li>
<li><a class="" href="subset.html"><span class="header-section-number">2</span> Subsetting R objects or accesing specific elements</a></li>
<li><a class="" href="func.html"><span class="header-section-number">3</span> Functions and operations in R</a></li>
<li><a class="" href="existing-and-useful-functions-in-base-r.html"><span class="header-section-number">4</span> Existing and useful functions in base R</a></li>
<li><a class="" href="pipes-in-r.html"><span class="header-section-number">5</span> Pipes in R</a></li>
<li><a class="" href="control-statements.html"><span class="header-section-number">6</span> Control statements</a></li>
<li><a class="" href="functional-programming.html"><span class="header-section-number">7</span> Functional Programming</a></li>
<li><a class="" href="file.html"><span class="header-section-number">8</span> File handling operations in R</a></li>
<li><a class="" href="read.html"><span class="header-section-number">9</span> Getting data in and out of R</a></li>
<li><a class="" href="data-cleaning-in-r.html"><span class="header-section-number">10</span> Data Cleaning in R</a></li>
<li><a class="" href="merging-large-number-of-similar-datasets-into-one.html"><span class="header-section-number">11</span> Merging large number of similar datasets into one</a></li>
<li><a class="" href="part-ii-exploratory-data-analysis.html">Part-II: Exploratory Data Analysis</a></li>
<li><a class="" href="visualisations-in-base-r.html"><span class="header-section-number">12</span> Visualisations in Base R</a></li>
<li><a class="active" href="visualising-data-with-ggplot2.html"><span class="header-section-number">13</span> Visualising data with ggplot2</a></li>
<li><a class="" href="data-transformation-in-dplyr.html"><span class="header-section-number">14</span> Data Transformation in dplyr</a></li>
<li><a class="" href="combining-tablestabular-data.html"><span class="header-section-number">15</span> Combining Tables/tabular data</a></li>
<li><a class="" href="data-wrangling-in-tidyr.html"><span class="header-section-number">16</span> Data Wrangling in tidyr</a></li>
<li><a class="" href="generating-descriptive-statistics.html"><span class="header-section-number">17</span> Generating Descriptive statistics</a></li>
<li><a class="" href="part-iii-probability-and-sampling-in-r.html">Part-III: Probability and Sampling in R</a></li>
<li><a class="" href="probability-in-r.html"><span class="header-section-number">18</span> Probability in R</a></li>
<li><a class="" href="random-sampling-in-r.html"><span class="header-section-number">19</span> Random sampling in R</a></li>
<li><a class="" href="part-iv-machine-learning-in-r.html">Part-IV: Machine Learning in R</a></li>
<li><a class="" href="linear-regression.html"><span class="header-section-number">20</span> Linear Regression</a></li>
<li><a class="" href="principal-component-analysis-in-r.html"><span class="header-section-number">21</span> Principal Component Analysis in R</a></li>
<li><a class="" href="clustering-in-r-using-kmeans-algorithm.html"><span class="header-section-number">22</span> Clustering in R (Using Kmeans algorithm)</a></li>
<li><a class="" href="association-rule-mining-in-r-apriori.html"><span class="header-section-number">23</span> Association Rule Mining in R (Apriori)</a></li>
<li><a class="" href="part-v-time-series-analysis.html">Part-V: Time Series Analysis</a></li>
<li><a class="" href="dates-and-times.html"><span class="header-section-number">24</span> Dates and Times</a></li>
<li><a class="" href="time-series-analysis.html"><span class="header-section-number">25</span> Time Series Analysis</a></li>
<li><a class="" href="part-vi-network-analytics.html">Part VI: Network Analytics</a></li>
<li><a class="" href="network-analyticsgraph-theory-in-r.html"><span class="header-section-number">26</span> Network Analytics/Graph theory in R</a></li>
<li><a class="" href="applying-network-analysis-in-auditfraud-detection.html"><span class="header-section-number">27</span> Applying network analysis in audit/fraud detection</a></li>
<li><a class="" href="part-vii-text-analytics-in-r.html">Part-VII: Text Analytics in R</a></li>
<li><a class="" href="string-manipulation-in-stringr.html"><span class="header-section-number">28</span> String manipulation in stringr</a></li>
<li><a class="" href="regex---a-quick-introduction.html"><span class="header-section-number">29</span> Regex - A quick introduction</a></li>
<li><a class="" href="regex-in-human-readble-format-using-rebus.html"><span class="header-section-number">30</span> Regex in human readble format using rebus</a></li>
<li><a class="" href="text-analytics-in-r.html"><span class="header-section-number">31</span> Text Analytics in R</a></li>
<li><a class="" href="sentiment-analysis.html"><span class="header-section-number">32</span> Sentiment Analysis</a></li>
<li><a class="" href="visualising-text-analytics-through-wordcloud-etc..html"><span class="header-section-number">33</span> Visualising Text analytics through Wordcloud, etc.</a></li>
<li><a class="" href="finding-string-similarity.html"><span class="header-section-number">34</span> Finding string similarity</a></li>
<li><a class="" href="part-viii-geo-computation-in-r.html">Part-VIII: Geo computation in R</a></li>
<li><a class="" href="maps-in-r.html"><span class="header-section-number">35</span> Maps in R</a></li>
<li><a class="" href="geo-coding-in-r.html"><span class="header-section-number">36</span> Geo-Coding in R</a></li>
<li><a class="" href="reverse-geo-coding.html"><span class="header-section-number">37</span> Reverse geo-coding</a></li>
<li><a class="" href="part-ix-identifying-anamolous-observations-for-audit.html">Part-IX: Identifying anamolous observations for audit</a></li>
<li><a class="" href="benford-testsanalysis.html"><span class="header-section-number">38</span> Benford Tests/Analysis</a></li>
<li><a class="" href="anomaly-detection.html"><span class="header-section-number">39</span> Anomaly Detection</a></li>
<li><a class="" href="finding-anamolous-outliers.html"><span class="header-section-number">40</span> Finding Anamolous Outliers</a></li>
<li><a class="" href="dup.html"><span class="header-section-number">41</span> Duplicate Detection</a></li>
<li><a class="" href="detecting-gaps-in-sequences.html"><span class="header-section-number">42</span> Detecting gaps in sequences</a></li>
<li><a class="" href="data-envelopment-analysis.html"><span class="header-section-number">43</span> Data Envelopment Analysis</a></li>
<li class="book-part">Appendix</li>
<li><a class="" href="colors-in-r.html"><span class="header-section-number">A</span> Colors in R</a></li>
<li><a class="" href="various-datasets-in-base-r-used-in-this-book.html"><span class="header-section-number">B</span> Various Datasets, in base R, used in this book</a></li>
<li><a class="" href="references.html">References</a></li>
</ul>

        <div class="book-extra">
          
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="visualising-data-with-ggplot2" class="section level1" number="13">
<h1>
<span class="header-section-number">13</span> Visualising data with <code>ggplot2</code><a class="anchor" aria-label="anchor" href="#visualising-data-with-ggplot2"><i class="fas fa-link"></i></a>
</h1>
<div id="core-concepts-of-grammar-of-graphics" class="section level2" number="13.1">
<h2>
<span class="header-section-number">13.1</span> Core concepts of <strong>grammar of graphics</strong><a class="anchor" aria-label="anchor" href="#core-concepts-of-grammar-of-graphics"><i class="fas fa-link"></i></a>
</h2>
<p><strong>ggplot2</strong><a class="footnote-ref" tabindex="0" data-toggle="popover" data-content='&lt;p&gt;&lt;a href="https://ggplot2.tidyverse.org/"&gt;https://ggplot2.tidyverse.org/&lt;/a&gt;&lt;/p&gt;'><sup>15</sup></a><span class="citation"><a class="footnote-ref" tabindex="0" data-toggle="popover" data-content='&lt;p&gt;Hadley Wickham et al., &lt;em&gt;Ggplot2: Create Elegant Data Visualisations Using the Grammar of Graphics&lt;/em&gt;, 2024, &lt;a href="https://ggplot2.tidyverse.org"&gt;https://ggplot2.tidyverse.org&lt;/a&gt;.&lt;/p&gt;'><sup>16</sup></a></span> is the package developed by Hadley Wickham, which is based on concepts laid (2005) down by Leland Wilkinson in his <em>The Grammar of Graphics</em>.<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content='&lt;p&gt;&lt;a href="https://link.springer.com/book/10.1007/0-387-28695-0"&gt;https://link.springer.com/book/10.1007/0-387-28695-0&lt;/a&gt;&lt;/p&gt;'><sup>17</sup></a> Basically, a grammar of graphics is a framework which follows a layered approach to describe and construct visualizations or graphics in a structured manner. Even the letters <code>gg</code> in ggplot2 stand for <code>g</code>rammar of <code>g</code>raphics.</p>
<p>Hadley Wickham, in his paper titled <strong>A Layered Grammar of Graphics</strong><a class="footnote-ref" tabindex="0" data-toggle="popover" data-content='&lt;p&gt;&lt;a href="http://vita.had.co.nz/papers/layered-grammar.pdf"&gt;http://vita.had.co.nz/papers/layered-grammar.pdf&lt;/a&gt;&lt;/p&gt;'><sup>18</sup></a>(2010)<span class="citation"><a class="footnote-ref" tabindex="0" data-toggle="popover" data-content='&lt;p&gt;Hadley Wickham, &lt;span&gt;“A Layered Grammar of Graphics,”&lt;/span&gt; &lt;em&gt;Journal of Computational and Graphical Statistics&lt;/em&gt; 19, no. 1 (2010): 3–28, &lt;a href="https://doi.org/10.1198/jcgs.2009.07098"&gt;https://doi.org/10.1198/jcgs.2009.07098&lt;/a&gt;.&lt;/p&gt;'><sup>19</sup></a></span> proposed his idea of layered grammar of graphics in detail and simultaneously put forward his idea of <em>ggplot2</em> as an open source implementation framework for building graphics. Readers/Users are advised to check the paper as it describes the concept of grammar of graphics in detail. By the end of the decade the package progressed<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content="&lt;p&gt;Version 3.3.0 was released in March 2020&lt;/p&gt;"><sup>20</sup></a> to one of the most used and popular packages in R.</p>
<p>The relationship between the components explained in both the grammars can be illustrated with the following figure<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content="&lt;p&gt;Source: Hadley Wickham’s paper on &lt;em&gt;the layered grammar of graphics&lt;/em&gt;&lt;/p&gt;"><sup>21</sup></a>. The components on the left have been put forward by Wilkinson whereas those on right were proposed by Wickham. It may be seen that <code>TRANS</code> has no relation in <code>ggplot2</code> as its role is played by in-built features of R.</p>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:unnamed-chunk-239"></span>
<img src="images/layers_gg.png" alt="Layers in Grammar of Graphics mapped in GGPLOT2" width="189" height="75%"><p class="caption">
Figure 13.1: Layers in Grammar of Graphics mapped in GGPLOT2
</p>
</div>
<p>Thus, to build a graphic having one or more dimensions, from a given data, we use <em>seven</em> major components -</p>
<ol style="list-style-type: decimal">
<li>
<strong>Data:</strong> Unarguably, a graphic/visualisation should start with a data. It is also the first argument in most important function in the package i.e. <code>ggplot(data =)</code>.</li>
<li>
<strong>Aesthetics:</strong> or <code><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes()</a></code> in short, provide a mapping of various data dimensions to axes so as to provide positions to various data points in the output plot/graphic.</li>
<li>
<strong>Geometries:</strong> or <code>geoms</code> for short, are used to provide the <em>geometries</em> so that data points may take a concrete shape on the visualisation. For e.g. the data points should be depicted as bars or scatter points or else are decided by the provided <code>geoms.</code>
</li>
<li>
<strong>Statistics:</strong> or <code>stat</code> for short, provides the statistics to show in the visualisation like measures of central tendency, etc.</li>
<li>
<strong>Scale:</strong> This component is used to decide whether any dimension needs some scaling like logrithmic transformation, etc.</li>
<li>
<strong>Coordinate System:</strong> Though most of the time <em>cartesian coordinate system</em> is used, yet there are times when <em>polar coordinate system</em> (e.g. pie chart) or <em>spherical coordinate system</em> (e.g. geographical maps) are used.</li>
<li>
<strong>Facets:</strong> Used when based on certain dimension, the plot is divided into further sub-plots.</li>
</ol>
<p><strong>Prerequisites</strong></p>
<div class="sourceCode" id="cb765"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org">ggplot2</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div id="ggplot2-in-action" class="section level2 unnumbered">
<h2>GGPLOT2 in action<a class="anchor" aria-label="anchor" href="#ggplot2-in-action"><i class="fas fa-link"></i></a>
</h2>
<blockquote>
<p>Out of the afore-mentioned components, three are to be explicitly provided and thus can be understood as mandatoty components. These three componenets are <code>data</code>, <code>aesthetics</code> and <code>geometries</code>. Whilst these three compoenents are mandatorily provided, it is not that others are not mandatory. basically other componenets have their defaults (e.g. default coordinate system is cartesian coordinate system). Let us dive into these three essential components and build a plot using these.</p>
</blockquote>
</div>
<div id="building-a-basic-plot" class="section level2" number="13.2">
<h2>
<span class="header-section-number">13.2</span> Building a basic plot<a class="anchor" aria-label="anchor" href="#building-a-basic-plot"><i class="fas fa-link"></i></a>
</h2>
<p>We will use <code>mtcars</code> datasets, a default dataset to learn the concepts.</p>
<p>See what happens when <code>data</code> is provided to <code>ggplot</code> function-</p>
<div class="sourceCode" id="cb766"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">mtcars</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="DauR_files/figure-html/fig_blank-1.png" width="672" style="display: block; margin: auto;"></div>
<p>We can see that a blank chart/plot space has been created as our data <code>mtcars</code> has now mapped with ggplot2. Now let us provide aesthetic mappings to this using function <code><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes()</a></code></p>
<div class="sourceCode" id="cb767"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">mtcars</span>, mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">wt</span>, y<span class="op">=</span><span class="va">mpg</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="DauR_files/figure-html/fig_gg_2-1.png" width="672" style="display: block; margin: auto;">
You may now notice, apart from creating a blank space for plot, the two dimensions provided, i.e. <code>wt</code> and <code>mpg</code> have been <em>mapped</em> with <code>x</code> and <code>y</code> axes respectively. Since no geometry has been provided, the plot area is still blank. Now we will provide geometry to our dimension say <em>point</em>. To do this we will use another layer of function <code>geom_*</code> (<code><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point()</a></code> in this case specifically).</p>
<div class="sourceCode" id="cb768"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">mtcars</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">wt</span>, <span class="va">mpg</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="DauR_files/figure-html/fig_3-1.png" width="672" style="display: block; margin: auto;">
Notice that another layer has been added to function <code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot()</a></code> using a <code>+</code> sign here.</p>
<p>We could have used another geometry say boxplot here.</p>
<div class="sourceCode" id="cb769"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">mtcars</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>y <span class="op">=</span> <span class="va">wt</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html">geom_boxplot</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="DauR_files/figure-html/fig_4-1.png" width="672" style="display: block; margin: auto;"></div>
<p>That’s basic architecture of this package. Now lets discuss more on <code>aesthetics</code> and <code>geometries</code> before moving on to another compoenents.</p>
</div>
<div id="more-on-aesthetics" class="section level2" number="13.3">
<h2>
<span class="header-section-number">13.3</span> More on Aesthetics<a class="anchor" aria-label="anchor" href="#more-on-aesthetics"><i class="fas fa-link"></i></a>
</h2>
<p>Now what if color is provided inside <code>geom_*</code> function.</p>
<div class="sourceCode" id="cb770"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">mtcars</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">wt</span>, <span class="va">mpg</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>color<span class="op">=</span><span class="st">'red'</span><span class="op">)</span></span></code></pre></div>
<p><img src="DauR_files/figure-html/fig_5-1.png" width="672" style="display: block; margin: auto;">
As the argument <code>color='red'</code> was mentioned inside the <code><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point()</a></code> function, it turned every point to red. But if we have to pass a vector/column based on which the points should be colored, it should be wrapped within aesthetics function <code><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes()</a></code> -</p>
<div class="sourceCode" id="cb771"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">mtcars</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">wt</span>, <span class="va">mpg</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>color<span class="op">=</span><span class="va">cyl</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="DauR_files/figure-html/fig_6-1.png" width="672" style="display: block; margin: auto;">
Since the <code>cyl</code> column was a numeric column, ggplot2 thought it to be a <code>continuos</code> column and thus produced a color scale instead of a legend. We however, know that this is a categorical column here, and thus if we want to produce a color legend we will have to convert it to a factor first. See now the changes-</p>
<div class="sourceCode" id="cb772"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">mtcars</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">wt</span>, <span class="va">mpg</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>color<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html">as.factor</a></span><span class="op">(</span><span class="va">cyl</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="DauR_files/figure-html/fig_7-1.png" width="672" style="display: block; margin: auto;">
One more thing - <code><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes()</a></code> function wrapped in <code><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point()</a></code> function could have been wrapped in <code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot()</a></code> also. So basically the following code will also produce exactly the same chart-</p>
<pre><code>ggplot(mtcars, aes(wt, mpg, color = as.factor(cyl))) +
  geom_point()</code></pre>
<p>Two questions arise here -</p>
<ol style="list-style-type: decimal">
<li>Is there any difference between the two?</li>
</ol>
<p><strong>Ans:</strong> Yes, basically aesthetics if provided under the <code>geoms</code>, will override those aesthetics which are already provided under <code>ggplot</code> function. See the result of following command in your console-</p>
<div class="sourceCode" id="cb774"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">mtcars</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">wt</span>, <span class="va">mpg</span>, color <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">as.factor</a></span><span class="op">(</span><span class="va">cyl</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>color<span class="op">=</span><span class="st">'red'</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="DauR_files/figure-html/fig_8-1.png" width="672" style="display: block; margin: auto;"></div>
<ol start="2" style="list-style-type: decimal">
<li>What if <code>color='red'</code> (or blue) is passed inside <code><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes()</a></code>?</li>
</ol>
<p><strong>Ans:</strong> In this case ggplot will try to map it some aesthetics called ‘blue’. Let’s see</p>
<div class="sourceCode" id="cb775"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">mtcars</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">wt</span>, <span class="va">mpg</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>color<span class="op">=</span><span class="st">'blue'</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="DauR_files/figure-html/fig_9-1.png" width="672" style="display: block; margin: auto;">
Interesting! GGPLOT2 has not only mapped a dummy variable called <code>'blue'</code> with color of points, but also created a legend. More interestingly the color is not what we wanted.</p>
<p>Different types of aesthetic attributes work better with different types of variables. For example, <code>color</code> and <code>shape</code> work well with discreet variables, while <code>size</code> or <code>alpha</code> (transparency) works well for continuous variables. In your console run the following command and check results</p>
<pre><code>ggplot(mtcars, aes(wt, mpg, shape=as.factor(cyl))) +
  geom_point()
# OR
ggplot(mtcars, aes(wt, mpg, size=cyl)) +
  geom_point()
# OR
ggplot(mtcars, aes(wt, mpg, alpha=cyl)) +
  geom_point()</code></pre>
<p>Multiple aesthetics can be mapped simultaneously, as per requirement. See this example-</p>
<div class="sourceCode" id="cb777"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">mtcars</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">wt</span>, <span class="va">mpg</span>, shape<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html">as.factor</a></span><span class="op">(</span><span class="va">cyl</span><span class="op">)</span>, color<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html">as.factor</a></span><span class="op">(</span><span class="va">gear</span><span class="op">)</span>, alpha<span class="op">=</span><span class="va">wt</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="DauR_files/figure-html/fig_10-1.png" width="672" style="display: block; margin: auto;"></div>
<p>Some commonly used aesthetics are -</p>
<ul>
<li>
<code>shape</code> = Display a point with <code><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point()</a></code> as a dot, star, triangle, or square</li>
<li>
<code>fill</code> = The interior color (e.g. of a bar or boxplot)</li>
<li>
<code>color</code> = The exterior line of a <code>bar</code>, <code>boxplot</code>, etc., or the point color if using <code><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point()</a></code>
</li>
<li>
<code>size</code> = Size (e.g. line thickness, point size)</li>
<li>
<code>alpha</code> = Transparency (<code>1 = opaque</code>, <code>0 = invisible</code>)</li>
<li>
<code>binwidth</code> = Width of histogram bins</li>
<li>
<code>width</code> = Width of “bar plot” columns</li>
<li>
<code>linetype</code> = Line type (e.g. solid, dashed, dotted)</li>
</ul>
<p><strong>A few shapes available in <code>shape</code> aesthetics, with <code>fill</code> aesthetic shown in <code>orange' and</code>color` aesthetic shown in ‘blue’ color.</strong></p>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:shapes"></span>
<img src="shapes.png" alt="Some Shapes available in GGplot" width="99%"><p class="caption">
Figure 13.2: Some Shapes available in GGplot
</p>
</div>
</div>
<div id="geoms" class="section level2" number="13.4">
<h2>
<span class="header-section-number">13.4</span> More on Geoms<a class="anchor" aria-label="anchor" href="#geoms"><i class="fas fa-link"></i></a>
</h2>
<p>In previous section we have seen that as soon as we passed a <code>geom_*</code> function/layer to <code>data</code> &amp; <code>aesthetics</code> layers, the chart/graph was constructed. Actually, <code><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point()</a></code> function, in the background added three more layers i.e. <code>stat</code>, <code>geom</code> and <code>position</code>. Why? The answer is simple, <code>geom_*</code> are generally shortcuts, which add these three layers. So in our example, <code>ggplot(mtcars, aes(wt, mpg)) + geom_point()</code> is actually equivalent to -</p>
<pre><code>ggplot(mpg, aes(displ, hwy)) +
  layer(
  mapping = NULL, 
  data = NULL,
  geom = "point", 
  stat = "identity",
  position = "identity"
)</code></pre>
<p>A complete list of <code>geoms</code> available in ggplot2 is given in Annex-. Some common geoms are listed below:</p>
<ul>
<li>Histograms - <code><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram()</a></code>
</li>
<li>Bar charts - <code><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar()</a></code> or <code><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_col()</a></code>
</li>
<li>Box plots - <code><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html">geom_boxplot()</a></code>
</li>
<li>Points (e.g. scatter plots) - <code><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point()</a></code>
</li>
<li>Line graphs - <code><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line()</a></code> or <code><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_path()</a></code>
</li>
<li>Trend lines - <code><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html">geom_smooth()</a></code>
</li>
</ul>
<p><strong>Note that in ggplot2 <code>color</code> aesthetic represent border color of geometry and <code>fill</code> aesthetic represent color used to be fill that geometry.</strong></p>
<div id="list-of-geoms-available-in-ggplot2" class="section level3" number="13.4.1">
<h3>
<span class="header-section-number">13.4.1</span> List of geoms available in <code>ggplot2</code><a class="anchor" aria-label="anchor" href="#list-of-geoms-available-in-ggplot2"><i class="fas fa-link"></i></a>
</h3>
<div class="inline-table"><table class="table table-sm">
<caption>List of GEOMS available in <code>ggplot2</code> package</caption>
<colgroup>
<col width="24%">
<col width="75%">
</colgroup>
<thead><tr class="header">
<th align="left">Topic</th>
<th align="left">Title</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">geom_abline</td>
<td align="left">Reference lines: horizontal, vertical, and diagonal</td>
</tr>
<tr class="even">
<td align="left">geom_bar</td>
<td align="left">Bar charts</td>
</tr>
<tr class="odd">
<td align="left">geom_bin_2d</td>
<td align="left">Heatmap of 2d bin counts</td>
</tr>
<tr class="even">
<td align="left">geom_blank</td>
<td align="left">Draw nothing</td>
</tr>
<tr class="odd">
<td align="left">geom_boxplot</td>
<td align="left">A box and whiskers plot (in the style of Tukey)</td>
</tr>
<tr class="even">
<td align="left">geom_contour</td>
<td align="left">2D contours of a 3D surface</td>
</tr>
<tr class="odd">
<td align="left">geom_count</td>
<td align="left">Count overlapping points</td>
</tr>
<tr class="even">
<td align="left">geom_density</td>
<td align="left">Smoothed density estimates</td>
</tr>
<tr class="odd">
<td align="left">geom_density_2d</td>
<td align="left">Contours of a 2D density estimate</td>
</tr>
<tr class="even">
<td align="left">geom_dotplot</td>
<td align="left">Dot plot</td>
</tr>
<tr class="odd">
<td align="left">geom_errorbarh</td>
<td align="left">Horizontal error bars</td>
</tr>
<tr class="even">
<td align="left">geom_function</td>
<td align="left">Draw a function as a continuous curve</td>
</tr>
<tr class="odd">
<td align="left">geom_hex</td>
<td align="left">Hexagonal heatmap of 2d bin counts</td>
</tr>
<tr class="even">
<td align="left">geom_freqpoly</td>
<td align="left">Histograms and frequency polygons</td>
</tr>
<tr class="odd">
<td align="left">geom_jitter</td>
<td align="left">Jittered points</td>
</tr>
<tr class="even">
<td align="left">geom_crossbar</td>
<td align="left">Vertical intervals: lines, crossbars &amp; errorbars</td>
</tr>
<tr class="odd">
<td align="left">geom_map</td>
<td align="left">Polygons from a reference map</td>
</tr>
<tr class="even">
<td align="left">geom_path</td>
<td align="left">Connect observations</td>
</tr>
<tr class="odd">
<td align="left">geom_point</td>
<td align="left">Points</td>
</tr>
<tr class="even">
<td align="left">geom_polygon</td>
<td align="left">Polygons</td>
</tr>
<tr class="odd">
<td align="left">geom_qq_line</td>
<td align="left">A quantile-quantile plot</td>
</tr>
<tr class="even">
<td align="left">geom_quantile</td>
<td align="left">Quantile regression</td>
</tr>
<tr class="odd">
<td align="left">geom_ribbon</td>
<td align="left">Ribbons and area plots</td>
</tr>
<tr class="even">
<td align="left">geom_rug</td>
<td align="left">Rug plots in the margins</td>
</tr>
<tr class="odd">
<td align="left">geom_segment</td>
<td align="left">Line segments and curves</td>
</tr>
<tr class="even">
<td align="left">geom_smooth</td>
<td align="left">Smoothed conditional means</td>
</tr>
<tr class="odd">
<td align="left">geom_spoke</td>
<td align="left">Line segments parameterised by location, direction and distance</td>
</tr>
<tr class="even">
<td align="left">geom_label</td>
<td align="left">Text</td>
</tr>
<tr class="odd">
<td align="left">geom_raster</td>
<td align="left">Rectangles</td>
</tr>
<tr class="even">
<td align="left">geom_violin</td>
<td align="left">Violin plot</td>
</tr>
<tr class="odd">
<td align="left">CoordSf</td>
<td align="left">Visualise sf objects</td>
</tr>
<tr class="even">
<td align="left">update_geom_defaults</td>
<td align="left">Modify geom/stat aesthetic defaults for future plots</td>
</tr>
</tbody>
</table></div>
</div>
</div>
<div id="faceting" class="section level2" number="13.5">
<h2>
<span class="header-section-number">13.5</span> Faceting<a class="anchor" aria-label="anchor" href="#faceting"><i class="fas fa-link"></i></a>
</h2>
<p>The amount of data also makes a difference: if there is a lot of data it can be hard to distinguish different groups. An alternative solution is to use faceting, as described next. Facets, or “small-multiples”, are used to split one plot into a multi-panel figure, with one panel (“facet”) per group of data. The same type of plot is created multiple times, each one using a sub-group of the same dataset.</p>
<p>In <code>ggplot2</code> faceting can be acheived using either of the functions -</p>
<ul>
<li>
<code><a href="https://ggplot2.tidyverse.org/reference/facet_grid.html">facet_grid()</a></code> creates a grid of plots, with each plot showing a subset of the data. We may also specify the number of columns to use in the grid using the <code>ncol</code> argument.</li>
<li>
<code><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap()</a></code> creates a grid of plots with different variables on each axis. We may also specify the scales to use for each axis using the <code>scales</code> argument.</li>
</ul>
<p>Let us understand this, with these examples.</p>
<p>Example-1</p>
<div class="sourceCode" id="cb779"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">mpg</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">displ</span>, y <span class="op">=</span> <span class="va">hwy</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap</a></span><span class="op">(</span><span class="op">~</span> <span class="va">class</span>, ncol <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="DauR_files/figure-html/unnamed-chunk-242-1.png" width="672"></div>
<p>Example-2</p>
<div class="sourceCode" id="cb780"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">mpg</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">displ</span>, y <span class="op">=</span> <span class="va">hwy</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_grid.html">facet_grid</a></span><span class="op">(</span><span class="va">year</span> <span class="op">~</span> <span class="va">class</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="DauR_files/figure-html/unnamed-chunk-243-1.png" width="672"></div>
<p>Notice that <code><a href="https://ggplot2.tidyverse.org/reference/facet_grid.html">facet_grid()</a></code> arranges the plots in a grid with different variables on each axis. We specify the variables to use for faceting using the <code>~</code> operator. For example, <code>facet_grid(variable1 ~ variable2)</code> will create a grid of plots with <code>variable1</code> on the y-axis and <code>variable2</code> on the x-axis. This is useful when we want to compare the relationship between two variables across different levels of a third variable.</p>
<p>On the other hand, <code><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap()</a></code> creates a grid of plots, each showing a subset of your data based on a single variable. We specify the variable to use for faceting using the same <code>~</code> operator here too. For example, <code>facet_wrap(~ variable)</code> will create a grid of plots, each showing a different level of the variable. This is useful when you have a single categorical variable that you want to use for faceting.</p>
</div>
<div id="labels" class="section level2" number="13.6">
<h2>
<span class="header-section-number">13.6</span> Labels<a class="anchor" aria-label="anchor" href="#labels"><i class="fas fa-link"></i></a>
</h2>
<p>Labeling is an essential aspect of data visualization because it provides context and information about the data being presented. Labels can include titles, axis labels, legends, and annotations that describe the data and provide important information that helps the viewer understand what they are looking at. Proper labeling can help to make the data more understandable, clear, and accessible, which enhances its overall value and impact.</p>
<div id="labeling-data-points" class="section level3" number="13.6.1">
<h3>
<span class="header-section-number">13.6.1</span> Labeling Data points<a class="anchor" aria-label="anchor" href="#labeling-data-points"><i class="fas fa-link"></i></a>
</h3>
<p>To label data points in ggplot2, we can use the <code><a href="https://ggplot2.tidyverse.org/reference/geom_text.html">geom_text()</a></code> function. This function adds text to the plot at the specified x and y coordinates. Moreover, we can customize the appearance of the labels by adding additional arguments to <code><a href="https://ggplot2.tidyverse.org/reference/geom_text.html">geom_text()</a></code> -</p>
<ul>
<li>
<code>size</code> to set font size</li>
<li>
<code>color</code> to color the fonts</li>
<li>
<code>hjust</code> or <code>vjust</code> to adjust the labels vertically or horizontally, respectively.</li>
</ul>
<p>Example-</p>
<div class="sourceCode" id="cb781"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">mtcars</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">hp</span>, y <span class="op">=</span> <span class="va">mpg</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html">geom_text</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>label <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html">rownames</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">)</span><span class="op">)</span>,</span>
<span>            size <span class="op">=</span> <span class="fl">3</span>,</span>
<span>            color <span class="op">=</span> <span class="st">"red"</span>,</span>
<span>            vjust <span class="op">=</span> <span class="op">-</span><span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="DauR_files/figure-html/unnamed-chunk-244-1.png" width="672"></div>
<p><strong>TIP: Use package <code>ggrepel</code> to show all labels, when needed, without overlapping and in a better way.</strong> E.g.</p>
<div class="sourceCode" id="cb782"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggrepel.slowkow.com/">ggrepel</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/options.html">options</a></span><span class="op">(</span>ggrepel.max.overlaps <span class="op">=</span> <span class="cn">Inf</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">mtcars</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">hp</span>, y <span class="op">=</span> <span class="va">mpg</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggrepel.slowkow.com/reference/geom_text_repel.html">geom_text_repel</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>label <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html">rownames</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">)</span><span class="op">)</span>,</span>
<span>            size <span class="op">=</span> <span class="fl">3</span>,</span>
<span>            color <span class="op">=</span> <span class="st">"red"</span>,</span>
<span>            vjust <span class="op">=</span> <span class="op">-</span><span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="DauR_files/figure-html/unnamed-chunk-245-1.png" width="672"></div>
</div>
<div id="labeling-charts" class="section level3" number="13.6.2">
<h3>
<span class="header-section-number">13.6.2</span> Labeling Charts<a class="anchor" aria-label="anchor" href="#labeling-charts"><i class="fas fa-link"></i></a>
</h3>
<p>There are several ways to add labels to ggplot2 charts, but we will focus on using the <code><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs()</a></code> function, which allows us to add <code>titles</code>, <code>subtitles</code>, <code>axis labels</code>, and other annotations like <code>caption</code>, etc. to the plot. Example -</p>
<div class="sourceCode" id="cb783"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">mtcars</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">hp</span>, y <span class="op">=</span> <span class="va">mpg</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Scatter plot of mpg vs. hp"</span>,</span>
<span>       subtitle <span class="op">=</span> <span class="st">"Data from mtcars dataset"</span>,</span>
<span>       x <span class="op">=</span> <span class="st">"Horsepower"</span>,</span>
<span>       y <span class="op">=</span> <span class="st">"Miles per gallon"</span>,</span>
<span>       caption <span class="op">=</span> <span class="st">"Source: R datasets"</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="DauR_files/figure-html/unnamed-chunk-246-1.png" width="672"></div>
<p>We can also customize the appearance of the labels by using the <code><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme()</a></code> function, which allows us to modify the font size, font family, and other visual properties of the labels. Example-</p>
<div class="sourceCode" id="cb784"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">mtcars</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">hp</span>, y <span class="op">=</span> <span class="va">mpg</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Scatter plot of mpg vs. hp"</span>,</span>
<span>       x <span class="op">=</span> <span class="st">"Horsepower"</span>,</span>
<span>       y <span class="op">=</span> <span class="st">"Miles per gallon"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>plot.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">20</span>, color <span class="op">=</span> <span class="st">'seagreen'</span><span class="op">)</span>,</span>
<span>        axis.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">16</span>, color <span class="op">=</span> <span class="st">"blue"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="DauR_files/figure-html/unnamed-chunk-247-1.png" width="672"></div>
</div>
</div>
<div id="modifying-scales" class="section level2" number="13.7">
<h2>
<span class="header-section-number">13.7</span> Modifying scales<a class="anchor" aria-label="anchor" href="#modifying-scales"><i class="fas fa-link"></i></a>
</h2>
<p>Several times the requirement is to modify x or/and y axis minimum and/or maximum values i.e. axis limits; or otherwise the axis itself is to be transformed. For these requirements, we have <code>sacle_*_*()</code> group of functions in <code>ggplot2</code>.</p>
<p>For example we have these two functions for continuos axis/variables.</p>
<pre><code>scale_x_continuous(name, breaks, labels, limits, trans)
scale_y_continuous(name, breaks, labels, limits, trans)</code></pre>
<p>In arguments to above functions, we can see that axis title (name), axis breaks, axis labels, axis limits, and transformations can be dealt with.</p>
<p>Example-</p>
<div class="sourceCode" id="cb786"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Basic Scatter Plot</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">cars</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">speed</span>, y <span class="op">=</span> <span class="va">dist</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co"># Modifying scales both axis title and axis limits</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">cars</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">speed</span>, y <span class="op">=</span> <span class="va">dist</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_x_continuous</a></span><span class="op">(</span>name<span class="op">=</span><span class="st">"Speed of cars"</span>, limits<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">30</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_continuous</a></span><span class="op">(</span>name<span class="op">=</span><span class="st">"Stopping distance"</span>, limits<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">150</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:scale1"></span>
<img src="DauR_files/figure-html/scale1-1.png" alt="Modifying Scales in GGplot2" width="49%"><img src="DauR_files/figure-html/scale1-2.png" alt="Modifying Scales in GGplot2" width="49%"><p class="caption">
Figure 13.3: Modifying Scales in GGplot2
</p>
</div>
<p>As for transformation we can use <code>trans</code> argument</p>
<div class="sourceCode" id="cb787"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">cars</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">speed</span>, y <span class="op">=</span> <span class="va">dist</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_x_continuous</a></span><span class="op">(</span>trans<span class="op">=</span><span class="st">'log10'</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_continuous</a></span><span class="op">(</span>trans<span class="op">=</span><span class="st">'log10'</span><span class="op">)</span></span>
<span></span>
<span><span class="va">state.x77</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">Area</span>, <span class="va">Illiteracy</span><span class="op">/</span><span class="fl">100</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_x_continuous</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"Area in Square Miles"</span>, labels <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="va"><a href="https://scales.r-lib.org/reference/comma.html">comma</a></span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_continuous</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"Illiteracy as % of Population"</span>, labels <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="va"><a href="https://scales.r-lib.org/reference/percent_format.html">percent</a></span><span class="op">)</span></span></code></pre></div>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:scale2"></span>
<img src="DauR_files/figure-html/scale2-1.png" alt="Transforming Axes in GGplot2" width="49%"><img src="DauR_files/figure-html/scale2-2.png" alt="Transforming Axes in GGplot2" width="49%"><p class="caption">
Figure 13.4: Transforming Axes in GGplot2
</p>
</div>
</div>
<div id="themes" class="section level2" number="13.8">
<h2>
<span class="header-section-number">13.8</span> Themes<a class="anchor" aria-label="anchor" href="#themes"><i class="fas fa-link"></i></a>
</h2>
<p>We can customize the appearance of plots, such as the axis labels, titles, background colors, and font sizes by applying themes to the plot. In the above, notice that we have used <code><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme()</a></code> function to modify font etc. of labels in the plot. Now see the following example-</p>
<div class="sourceCode" id="cb788"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">mtcars</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">wt</span>, y <span class="op">=</span> <span class="va">mpg</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"MPG vs. Weight"</span>,</span>
<span>       x <span class="op">=</span> <span class="st">"Weight (1000 lbs)"</span>,</span>
<span>       y <span class="op">=</span> <span class="st">"Miles per Gallon"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_bw</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">mtcars</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">wt</span>, y <span class="op">=</span> <span class="va">mpg</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"MPG vs. Weight"</span>,</span>
<span>       x <span class="op">=</span> <span class="st">"Weight (1000 lbs)"</span>,</span>
<span>       y <span class="op">=</span> <span class="st">"Miles per Gallon"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_void</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:theme1"></span>
<img src="DauR_files/figure-html/theme1-1.png" alt="Modifying Themes in GGplot2 theme bw (left) and theme void (right)" width="49%"><img src="DauR_files/figure-html/theme1-2.png" alt="Modifying Themes in GGplot2 theme bw (left) and theme void (right)" width="49%"><p class="caption">
Figure 13.5: Modifying Themes in GGplot2 theme bw (left) and theme void (right)
</p>
</div>
<p>In this example, we’ve used the <code><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_bw()</a></code> and <code><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_void()</a></code> functions to apply a black-and-white theme to the plot. Some theme functions that can be used to modify plot themes are -</p>
<ul>
<li>
<code><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_bw()</a></code>: A black and white theme that is useful when you want a simple, clean plot.</li>
<li>
<code><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_classic()</a></code>: A classic theme that adds gray borders and gridlines to the plot.</li>
<li>
<code><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_void()</a></code>: A theme with a transparent background and no gridlines or borders.</li>
<li>
<code><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal()</a></code>: A minimalistic theme that removes the gridlines and reduces the size of the axis labels.</li>
<li>
<code>theme(axis.title = element_text(size = 16), plot.title = element_text(size = 20))</code>: This code sets the font size of the axis and plot titles to 16 and 20, respectively.</li>
<li>
<code>theme(panel.background = element_rect(fill = "gray90"))</code>: This code sets the background color of the plot to a light gray color.</li>
</ul>
<p>We can also customize specific elements of the plot using <code>element_*()</code> functions. For example:</p>
<div class="sourceCode" id="cb789"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">mtcars</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">wt</span>, y <span class="op">=</span> <span class="va">mpg</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"MPG vs. Weight"</span>,</span>
<span>       x <span class="op">=</span> <span class="st">"Weight (1000 lbs)"</span>,</span>
<span>       y <span class="op">=</span> <span class="st">"Miles per Gallon"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_bw</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>plot.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"blue"</span>, size <span class="op">=</span> <span class="fl">20</span>, face <span class="op">=</span> <span class="st">"bold"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:theme2"></span>
<img src="DauR_files/figure-html/theme2-1.png" alt="Customising Themes in GGplot2" width="49%"><p class="caption">
Figure 13.6: Customising Themes in GGplot2
</p>
</div>
<p>We can combine multiple customization options together to create a customized theme that fits our specific needs. The possibilities for customization are endless, so feel free to experiment and create your own unique theme!</p>
</div>
<div id="savingexporting-plots" class="section level2" number="13.9">
<h2>
<span class="header-section-number">13.9</span> Saving/exporting plots<a class="anchor" aria-label="anchor" href="#savingexporting-plots"><i class="fas fa-link"></i></a>
</h2>
<p>Of course, after creating charts/plots we would like to save them for further usage in our reports/documents, etc. Though there may be many options to save a plot to disk, we will be focussing on three different methods.</p>
<div id="saving-through-rstudio-menu" class="section level3 unnumbered">
<h3>Saving through Rstudio menu<a class="anchor" aria-label="anchor" href="#saving-through-rstudio-menu"><i class="fas fa-link"></i></a>
</h3>
<p>To save a graph using the RStudio menus, go to the Plots tab and choose Export.</p>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:export1"></span>
<img src="images/export.png" alt="Exporting Charts" width="95%"><p class="caption">
Figure 13.7: Exporting Charts
</p>
</div>
<p>Three options are available here.</p>
<ul>
<li>Save as Image</li>
<li>Save as PDF</li>
<li>Copy to clipboard.</li>
</ul>
</div>
<div id="saving-through-code" class="section level3 unnumbered">
<h3>Saving through code<a class="anchor" aria-label="anchor" href="#saving-through-code"><i class="fas fa-link"></i></a>
</h3>
<p>We may also save our plots using function <code><a href="https://ggplot2.tidyverse.org/reference/ggsave.html">ggsave()</a></code> here. Its syntax is simple</p>
<pre><code>ggsave(
  filename,
  plot = last_plot(),
  device = NULL,
  path = NULL,
  scale = 1,
  width = NA,
  height = NA,
  units = c("in", "cm", "mm", "px"),
  dpi = 300,
  limitsize = TRUE,
  bg = NULL,
  ...
)</code></pre>
<p>All arguments are simple to understand. Thus for example if we need to save the following violin plot,</p>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:export2"></span>
<img src="DauR_files/figure-html/export2-1.png" alt="Violin Plot" width="95%"><p class="caption">
Figure 13.8: Violin Plot
</p>
</div>
<p>we can use this code</p>
<pre><code>ggsave('violin.png', base_plot, height = 10, width = 8)</code></pre>
</div>
<div id="graphics-devices-base-r-plots" class="section level3 unnumbered">
<h3>Graphics Devices (Base R Plots)<a class="anchor" aria-label="anchor" href="#graphics-devices-base-r-plots"><i class="fas fa-link"></i></a>
</h3>
<p>If we create plots outside of ggplot (with <code><a href="https://rdrr.io/r/graphics/plot.default.html">plot()</a></code>, <code><a href="https://rdrr.io/r/graphics/hist.html">hist()</a></code>, <code><a href="https://rdrr.io/r/graphics/boxplot.html">boxplot()</a></code>, etc.), we cannot use <code><a href="https://ggplot2.tidyverse.org/reference/ggsave.html">ggsave()</a></code> to save our plots since it only supports plots made with ggplot.</p>
<p>Base R provides a way to save these plots with its graphic device functions. There are three steps involved in this process-</p>
<ul>
<li>Specify the file extension and properties (size, resolution, etc.) along with units</li>
<li>create the plot, in base R or/and ggplot2</li>
<li>Signal that the plot is finished and save it by running <code><a href="https://rdrr.io/r/grDevices/dev.html">dev.off()</a></code>. Thus, using this way we can insert as many charts in a single pdf without turning off the device till our pdf is ready.</li>
</ul>
<p>Example-</p>
<div class="sourceCode" id="cb792"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Creates a png file</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/grDevices/png.html">png</a></span><span class="op">(</span></span>
<span>  filename <span class="op">=</span> <span class="st">"scatter.png"</span>,</span>
<span>  width <span class="op">=</span> <span class="fl">5</span>,</span>
<span>  height <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  units <span class="op">=</span> <span class="st">"in"</span>,</span>
<span>  res <span class="op">=</span> <span class="fl">300</span></span>
<span><span class="op">)</span></span>
<span><span class="co"># Prints a ggplot2 in it</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">mtcars</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">wt</span>, y <span class="op">=</span> <span class="va">mpg</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html">geom_abline</a></span><span class="op">(</span>intercept <span class="op">=</span> <span class="fl">5</span>,</span>
<span>              slope <span class="op">=</span> <span class="fl">3</span>,</span>
<span>              color <span class="op">=</span> <span class="st">"seagreen"</span><span class="op">)</span></span>
<span><span class="co"># Device is off</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/grDevices/dev.html">dev.off</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code>## png 
##   2</code></pre>
<div class="sourceCode" id="cb794"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Creates a new PDF file</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/grDevices/pdf.html">pdf</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">"two_page.pdf"</span>,</span>
<span>    width <span class="op">=</span> <span class="fl">6</span>,</span>
<span>    height <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span>
<span><span class="co">#first plot</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">$</span><span class="va">wt</span>, <span class="va">mtcars</span><span class="op">$</span><span class="va">mpg</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/abline.html">abline</a></span><span class="op">(</span>a <span class="op">=</span> <span class="fl">5</span>, b <span class="op">=</span> <span class="fl">3</span>, col <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span></span>
<span><span class="co"># Second Plot</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">mtcars</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">wt</span>, y <span class="op">=</span> <span class="va">mpg</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html">geom_abline</a></span><span class="op">(</span>intercept <span class="op">=</span> <span class="fl">5</span>,</span>
<span>              slope <span class="op">=</span> <span class="fl">3</span>,</span>
<span>              color <span class="op">=</span> <span class="st">"seagreen"</span><span class="op">)</span></span>
<span><span class="co"># Device Off</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/grDevices/dev.html">dev.off</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code>## png 
##   2</code></pre>
</div>
</div>
<div id="ggplot2-tips-and-other-extensionssupporting-libraries" class="section level2 unnumbered">
<h2>GGPLOT2 Tips and other extensions/supporting libraries<a class="anchor" aria-label="anchor" href="#ggplot2-tips-and-other-extensionssupporting-libraries"><i class="fas fa-link"></i></a>
</h2>
<ul>
<li><a href="https://exts.ggplot2.tidyverse.org/gallery/">Extensions</a></li>
<li><a href="https://r-graph-gallery.com/ggplot2-package.html">R graph Gallery</a></li>
</ul>
</div>
<div id="more-to-read" class="section level2 unnumbered">
<h2>More to read<a class="anchor" aria-label="anchor" href="#more-to-read"><i class="fas fa-link"></i></a>
</h2>
<ul>
<li>Book<span class="citation"><a class="footnote-ref" tabindex="0" data-toggle="popover" data-content='&lt;p&gt;Hadley Wickham, &lt;em&gt;Ggplot2: Elegant Graphics for Data Analysis&lt;/em&gt; (Springer-Verlag New York, 2016), &lt;a href="https://ggplot2.tidyverse.org"&gt;https://ggplot2.tidyverse.org&lt;/a&gt;.&lt;/p&gt;'><sup>22</sup></a></span>
</li>
<li><a href="https://posit.co/wp-content/uploads/2022/10/data-visualization-1.pdf">ggplot2 cheatsheet</a></li>
<li><a href="http://r-statistics.co/ggplot2-cheatsheet.html">Another Cheatsheet</a></li>
</ul>
</div>
</div>

  <div class="chapter-nav">
<div class="prev"><a href="visualisations-in-base-r.html"><span class="header-section-number">12</span> Visualisations in Base R</a></div>
<div class="next"><a href="data-transformation-in-dplyr.html"><span class="header-section-number">14</span> Data Transformation in dplyr</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#visualising-data-with-ggplot2"><span class="header-section-number">13</span> Visualising data with ggplot2</a></li>
<li><a class="nav-link" href="#core-concepts-of-grammar-of-graphics"><span class="header-section-number">13.1</span> Core concepts of grammar of graphics</a></li>
<li><a class="nav-link" href="#ggplot2-in-action">GGPLOT2 in action</a></li>
<li><a class="nav-link" href="#building-a-basic-plot"><span class="header-section-number">13.2</span> Building a basic plot</a></li>
<li><a class="nav-link" href="#more-on-aesthetics"><span class="header-section-number">13.3</span> More on Aesthetics</a></li>
<li>
<a class="nav-link" href="#geoms"><span class="header-section-number">13.4</span> More on Geoms</a><ul class="nav navbar-nav"><li><a class="nav-link" href="#list-of-geoms-available-in-ggplot2"><span class="header-section-number">13.4.1</span> List of geoms available in ggplot2</a></li></ul>
</li>
<li><a class="nav-link" href="#faceting"><span class="header-section-number">13.5</span> Faceting</a></li>
<li>
<a class="nav-link" href="#labels"><span class="header-section-number">13.6</span> Labels</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#labeling-data-points"><span class="header-section-number">13.6.1</span> Labeling Data points</a></li>
<li><a class="nav-link" href="#labeling-charts"><span class="header-section-number">13.6.2</span> Labeling Charts</a></li>
</ul>
</li>
<li><a class="nav-link" href="#modifying-scales"><span class="header-section-number">13.7</span> Modifying scales</a></li>
<li><a class="nav-link" href="#themes"><span class="header-section-number">13.8</span> Themes</a></li>
<li>
<a class="nav-link" href="#savingexporting-plots"><span class="header-section-number">13.9</span> Saving/exporting plots</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#saving-through-rstudio-menu">Saving through Rstudio menu</a></li>
<li><a class="nav-link" href="#saving-through-code">Saving through code</a></li>
<li><a class="nav-link" href="#graphics-devices-base-r-plots">Graphics Devices (Base R Plots)</a></li>
</ul>
</li>
<li><a class="nav-link" href="#ggplot2-tips-and-other-extensionssupporting-libraries">GGPLOT2 Tips and other extensions/supporting libraries</a></li>
<li><a class="nav-link" href="#more-to-read">More to read</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
          
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>R for Audit Analytics</strong>" was written by Anil Goyal. It was last built on 2024-08-02.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
