<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 9 Getting data in and out of R | R for Audit Analytics</title>
<meta name="author" content="Anil Goyal">
<meta name="description" content="Till now, we have created our own datasets or we have used sample datasets available in R. In practical usage, there will hardly be any case when we get the data imported in R by itself. So we...">
<meta name="generator" content="bookdown 0.40 with bs4_book()">
<meta property="og:title" content="Chapter 9 Getting data in and out of R | R for Audit Analytics">
<meta property="og:type" content="book">
<meta property="og:url" content="https://anilyayavar.github.io/new-book/read.html">
<meta property="og:image" content="https://anilyayavar.github.io/new-book/images/cover.jpg">
<meta property="og:description" content="Till now, we have created our own datasets or we have used sample datasets available in R. In practical usage, there will hardly be any case when we get the data imported in R by itself. So we...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 9 Getting data in and out of R | R for Audit Analytics">
<meta name="twitter:description" content="Till now, we have created our own datasets or we have used sample datasets available in R. In practical usage, there will hardly be any case when we get the data imported in R by itself. So we...">
<meta name="twitter:image" content="https://anilyayavar.github.io/new-book/images/cover.jpg">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.7.0/transition.js"></script><script src="libs/bs3compat-0.7.0/tabs.js"></script><script src="libs/bs3compat-0.7.0/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/kePrint-0.0.1/kePrint.js"></script><link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<style type="text/css">
    /* Used with Pandoc 2.11+ new --citeproc when CSL is used */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
        }
    .hanging div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }
  </style>
<link rel="stylesheet" href="style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">R for Audit Analytics</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Welcome to R for Audit Analytics</a></li>
<li><a class="" href="preface.html">Preface</a></li>
<li><a class="" href="about-author.html">About author</a></li>
<li><a class="" href="gearing-up.html">Gearing up</a></li>
<li><a class="" href="part-i-basic-r-programming-concepts.html">Part-I: Basic R Programming Concepts</a></li>
<li><a class="" href="r-programming-language.html"><span class="header-section-number">1</span> R Programming Language</a></li>
<li><a class="" href="subset.html"><span class="header-section-number">2</span> Subsetting R objects or accesing specific elements</a></li>
<li><a class="" href="func.html"><span class="header-section-number">3</span> Functions and operations in R</a></li>
<li><a class="" href="existing-and-useful-functions-in-base-r.html"><span class="header-section-number">4</span> Existing and useful functions in base R</a></li>
<li><a class="" href="pipes-in-r.html"><span class="header-section-number">5</span> Pipes in R</a></li>
<li><a class="" href="control-statements.html"><span class="header-section-number">6</span> Control statements</a></li>
<li><a class="" href="functional-programming.html"><span class="header-section-number">7</span> Functional Programming</a></li>
<li><a class="" href="file.html"><span class="header-section-number">8</span> File handling operations in R</a></li>
<li><a class="active" href="read.html"><span class="header-section-number">9</span> Getting data in and out of R</a></li>
<li><a class="" href="data-cleaning-in-r.html"><span class="header-section-number">10</span> Data Cleaning in R</a></li>
<li><a class="" href="merging-large-number-of-similar-datasets-into-one.html"><span class="header-section-number">11</span> Merging large number of similar datasets into one</a></li>
<li><a class="" href="part-ii-exploratory-data-analysis.html">Part-II: Exploratory Data Analysis</a></li>
<li><a class="" href="visualisations-in-base-r.html"><span class="header-section-number">12</span> Visualisations in Base R</a></li>
<li><a class="" href="visualising-data-with-ggplot2.html"><span class="header-section-number">13</span> Visualising data with ggplot2</a></li>
<li><a class="" href="data-transformation-in-dplyr.html"><span class="header-section-number">14</span> Data Transformation in dplyr</a></li>
<li><a class="" href="combining-tablestabular-data.html"><span class="header-section-number">15</span> Combining Tables/tabular data</a></li>
<li><a class="" href="data-wrangling-in-tidyr.html"><span class="header-section-number">16</span> Data Wrangling in tidyr</a></li>
<li><a class="" href="generating-descriptive-statistics.html"><span class="header-section-number">17</span> Generating Descriptive statistics</a></li>
<li><a class="" href="part-iii-probability-and-sampling-in-r.html">Part-III: Probability and Sampling in R</a></li>
<li><a class="" href="probability-in-r.html"><span class="header-section-number">18</span> Probability in R</a></li>
<li><a class="" href="random-sampling-in-r.html"><span class="header-section-number">19</span> Random sampling in R</a></li>
<li><a class="" href="part-iv-machine-learning-in-r.html">Part-IV: Machine Learning in R</a></li>
<li><a class="" href="linear-regression.html"><span class="header-section-number">20</span> Linear Regression</a></li>
<li><a class="" href="principal-component-analysis-in-r.html"><span class="header-section-number">21</span> Principal Component Analysis in R</a></li>
<li><a class="" href="clustering-in-r-using-kmeans-algorithm.html"><span class="header-section-number">22</span> Clustering in R (Using Kmeans algorithm)</a></li>
<li><a class="" href="association-rule-mining-in-r-apriori.html"><span class="header-section-number">23</span> Association Rule Mining in R (Apriori)</a></li>
<li><a class="" href="part-v-time-series.html">Part-V: Time Series</a></li>
<li><a class="" href="date-and-time-calculations.html"><span class="header-section-number">24</span> Date and Time calculations</a></li>
<li><a class="" href="time-series-analysis.html"><span class="header-section-number">25</span> Time Series Analysis</a></li>
<li><a class="" href="part-vi-network-analytics.html">Part VI: Network Analytics</a></li>
<li><a class="" href="network-analyticsgraph-theory-in-r.html"><span class="header-section-number">26</span> Network Analytics/Graph theory in R</a></li>
<li><a class="" href="applying-network-analysis-in-auditfraud-detection.html"><span class="header-section-number">27</span> Applying network analysis in audit/fraud detection</a></li>
<li><a class="" href="part-vii-text-analytics-in-r.html">Part-VII: Text Analytics in R</a></li>
<li><a class="" href="string-manipulation-in-stringr.html"><span class="header-section-number">28</span> String manipulation in stringr</a></li>
<li><a class="" href="regex---a-quick-introduction.html"><span class="header-section-number">29</span> Regex - A quick introduction</a></li>
<li><a class="" href="regex-in-human-readble-format-using-rebus.html"><span class="header-section-number">30</span> Regex in human readble format using rebus</a></li>
<li><a class="" href="text-analytics-in-r.html"><span class="header-section-number">31</span> Text Analytics in R</a></li>
<li><a class="" href="sentiment-analysis.html"><span class="header-section-number">32</span> Sentiment Analysis</a></li>
<li><a class="" href="visualising-text-analytics-through-wordcloud-etc..html"><span class="header-section-number">33</span> Visualising Text analytics through Wordcloud, etc.</a></li>
<li><a class="" href="finding-string-similarity.html"><span class="header-section-number">34</span> Finding string similarity</a></li>
<li><a class="" href="part-viii-geo-computation-in-r.html">Part-VIII: Geo computation in R</a></li>
<li><a class="" href="maps-in-r.html"><span class="header-section-number">35</span> Maps in R</a></li>
<li><a class="" href="geo-coding-in-r.html"><span class="header-section-number">36</span> Geo-Coding in R</a></li>
<li><a class="" href="reverse-geo-coding.html"><span class="header-section-number">37</span> Reverse geo-coding</a></li>
<li><a class="" href="part-ix-identifying-anamolous-observations-for-audit.html">Part-IX: Identifying anamolous observations for audit</a></li>
<li><a class="" href="benford-testsanalysis.html"><span class="header-section-number">38</span> Benford Tests/Analysis</a></li>
<li><a class="" href="anomaly-detection.html"><span class="header-section-number">39</span> Anomaly Detection</a></li>
<li><a class="" href="finding-anamolous-outliers.html"><span class="header-section-number">40</span> Finding Anamolous Outliers</a></li>
<li><a class="" href="dup.html"><span class="header-section-number">41</span> Duplicate Detection</a></li>
<li><a class="" href="detecting-gaps-in-sequences.html"><span class="header-section-number">42</span> Detecting gaps in sequences</a></li>
<li><a class="" href="data-envelopment-analysis.html"><span class="header-section-number">43</span> Data Envelopment Analysis</a></li>
<li class="book-part">Appendix</li>
<li><a class="" href="colors-in-r.html"><span class="header-section-number">A</span> Colors in R</a></li>
<li><a class="" href="various-datasets-in-base-r-used-in-this-book.html"><span class="header-section-number">B</span> Various Datasets, in base R, used in this book</a></li>
<li><a class="" href="references.html">References</a></li>
</ul>

        <div class="book-extra">
          
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="read" class="section level1" number="9">
<h1>
<span class="header-section-number">9</span> Getting data in and out of R<a class="anchor" aria-label="anchor" href="#read"><i class="fas fa-link"></i></a>
</h1>
<p>Till now, we have created our own datasets or we have used sample datasets available in R. In practical usage, there will hardly be any case when we get the data imported in R by itself. So we have to import and load our data sets in R, for our analytics tasks. Even after completing the analytics, the summarised data, other reports, charts, etc. need to be exported. This chapter is intended to do all these tasks.</p>
<p>First section deals about functions related to reading external data i.e. importing objects into R. This is followed by another section dealing with writing data to external files i.e. exporting data out of R.</p>
<div id="importing-external-data-in-r---base-r-methods" class="section level2" number="9.1">
<h2>
<span class="header-section-number">9.1</span> Importing external data in R - Base R methods<a class="anchor" aria-label="anchor" href="#importing-external-data-in-r---base-r-methods"><i class="fas fa-link"></i></a>
</h2>
<p>Base R has many functions which can fulfill nearly any of our jobs to import external data into R. However, there are packages which are customised to do certain tasks in easier way and thus, we will also learn two of the packages from <code>tidyverse</code> also.</p>
<p>There are some important functions in base R, which are used frequently to import external data into R environment. Let us discuss these one by one.</p>
<div id="reading-tables-through-read.table-andor-read.csv" class="section level3 unnumbered">
<h3>Reading tables through <code>read.table()</code> and/or <code>read.csv()</code><a class="anchor" aria-label="anchor" href="#reading-tables-through-read.table-andor-read.csv"><i class="fas fa-link"></i></a>
</h3>
<p>Basically these two functions are most commonly used functions in R, to get tabular data out of flat files. The two functions namely <code><a href="https://rdrr.io/r/utils/read.table.html">read.table()</a></code> and <code><a href="https://rdrr.io/r/utils/read.table.html">read.csv()</a></code> are used respectively to read tabular data out of flat files having simple text format (.txt) and comma separated values (.csv) formats respectively. There are three more cousins to these functions.</p>
<ul>
<li>
<code><a href="https://rdrr.io/r/utils/read.table.html">read.csv2()</a></code> to read csv files where <code>;</code> is used as delimiter and <code>,</code> is used for decimals instead.</li>
<li>
<code><a href="https://rdrr.io/r/utils/read.table.html">read.delim()</a></code> to read delimited files where <code>tab character</code> has been used as delimiter and <code>.</code> as decimal.</li>
<li>
<code><a href="https://rdrr.io/r/utils/read.table.html">read.delim2()</a></code>, similarly to read delimited files where <code>tab character</code> has been used as delimiter and <code>,</code> as decimal.</li>
</ul>
<p>Most important arguments to these functions are -</p>
<ul>
<li>
<code>file</code> the name of the file along with complete path as string<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content='&lt;p&gt;If backward slash &lt;code&gt;\&lt;/code&gt; is used in file paths, these must be &lt;code&gt;escaped&lt;/code&gt; as R recognises &lt;code&gt;\&lt;/code&gt; as escape character itself. So, &lt;code&gt;"my/location/here/file.txt"&lt;/code&gt; and &lt;code&gt;"my\\file\\here\\file.txt"&lt;/code&gt; are the correct way of giving file name&lt;/p&gt;'><sup>9</sup></a>.</li>
<li>
<code>header</code> a logical value indicating if first line of the file has to be read as header or not.</li>
<li>
<code>sep</code> a string indicating a separator value to separate columns.</li>
<li>
<code>colClasses</code> a character vector indicating type of the columns if these are to be read explicitly in these types/formats only.</li>
<li>
<code>skip</code> an integer, indicating how many rows (from beginning) are to be skipped.</li>
</ul>
<p>Readers may check results of <code>?read.table()</code> to get a complete list of arguments of these functions.</p>
<p>Example: Let us try to download data related to <em>World Happiness Report 201=21</em> which is available on data.world portal.</p>
<pre><code>wh2021 &lt;- read.csv("https://query.data.world/s/qbsbmxlfj54sl4mq3y6uxsr3pkhhmo")
# Check dimensions
dim(wh2021)
# Check column names
colnames(wh2021)</code></pre>
<p>We can see that dataset named <code>wh2021</code> having <code>20</code> columns and <code>149</code> rows is now available in our environment.</p>
<blockquote>
<p><strong>Tip: Use <code>"clipboard"</code> in file argument for pasting copied data into R. E.g. Copy a few rows and cells from excel spreadsheet and run this command <code>read.delim("clipboard", header = FALSE)</code>.</strong></p>
</blockquote>
</div>
<div id="read-data-into-a-vector-through-scan-or-readline" class="section level3 unnumbered">
<h3>Read data into a vector through <code>scan()</code> or <code>readline()</code><a class="anchor" aria-label="anchor" href="#read-data-into-a-vector-through-scan-or-readline"><i class="fas fa-link"></i></a>
</h3>
<p>As afore-mentioned functions <code><a href="https://rdrr.io/r/utils/read.table.html">read.table()</a></code> <em>et al</em> are used in reading data into tables, we may also require reading data into a vector or simple list. The two functions <code><a href="https://rdrr.io/r/base/scan.html">scan()</a></code> and <code><a href="https://rdrr.io/r/base/readline.html">readline()</a></code> are used for these purposes.</p>
<p>The basic syntax of <code><a href="https://rdrr.io/r/base/scan.html">scan()</a></code> is -</p>
<pre><code>scan(file = "",
     what = double(),
     nmax = -1,
     ...
)</code></pre>
<p>Where -</p>
<ul>
<li>
<code>file</code> is name of the file, or link</li>
<li>
<code>what</code> is format/data type to be read. Default type is double</li>
<li>
<code>nmax</code> is mux number of data values to be read, default is <code>-1</code> which means all.</li>
</ul>
<p>There are many other usefule arguments, for which please check results of <code><a href="https://rdrr.io/r/base/scan.html">?scan</a></code> in your console.</p>
<p>Example -</p>
<pre><code>scan("http://mattmahoney.net/iq/digits.txt", nmax = 10)</code></pre>
<p>This function is sometimes useful to read data from keyboard into a vector. Just use a blank string <code>""</code> in file name. See this example</p>
<div class="inline-figure"><img src="images/scan.png"></div>
<p>Function <code><a href="https://rdrr.io/r/base/readline.html">readline()</a></code> on the other hand does similar job, but with a prompt. See this example</p>
<div class="inline-figure"><img src="images/readline.png"></div>
</div>
<div id="reading-text-files-through-readlines" class="section level3 unnumbered">
<h3>Reading text files through <code>readLines()</code><a class="anchor" aria-label="anchor" href="#reading-text-files-through-readlines"><i class="fas fa-link"></i></a>
</h3>
<p>Function <code><a href="https://rdrr.io/r/base/readLines.html">readLines()</a></code> is used to read text lines from a file (or connection). To see this in action, prepare a text file (say <code>"txt.txt"</code>) and try reading it using <code>readLines("txt.txt")</code>.</p>
</div>
</div>
<div id="exporting-data-out-of-r---base-r-methods" class="section level2" number="9.2">
<h2>
<span class="header-section-number">9.2</span> Exporting data out of R - Base R methods<a class="anchor" aria-label="anchor" href="#exporting-data-out-of-r---base-r-methods"><i class="fas fa-link"></i></a>
</h2>
<p>Since the nature of most of the data anaytic jobs carried out in R, will be followed after reading the external data which will be followed by wrangling, transformation, modelling, etc., all in R. Exporting files will not be used as much as reading external data. Still, there will be times, when wrangled data tables need to be exported out of R. For each of the different use cases, the following functions will almost complete our export requirements.</p>
<p>Let’s learn these.</p>
<div id="writing-tabular-data-through-write.table-andor-write.csv" class="section level3 unnumbered">
<h3>Writing tabular data through <code>write.table()</code> and/or <code>write.csv()</code><a class="anchor" aria-label="anchor" href="#writing-tabular-data-through-write.table-andor-write.csv"><i class="fas fa-link"></i></a>
</h3>
<p>Exporting data frames, whether after cleaning, wrangling, or transformation, etc., can be exported using these functions. Latter will be used to write data frames in csv formats specifically. The syntax is -</p>
<pre><code>write.table(x, file = "", sep = " ", ...)
write.csv(x, file = "", ...)
write.csv2(x, file = "", ...)</code></pre>
<p>where -</p>
<ul>
<li>
<code>x</code> is the data frame object to be exported</li>
<li>
<code>file</code> is used to give file name (along with path)</li>
<li>
<code>sep</code> is separator</li>
<li>
<code>...</code> - there are many more arguments which are used to cutomised export needs. See <code>?write.table()</code> for full details.</li>
</ul>
<p>E.g. - The following command will export <code>iris</code> data frame as <code>iris.csv</code> file in the current working directory.</p>
<div class="sourceCode" id="cb708"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/write.table.html">write.csv</a></span><span class="op">(</span><span class="va">iris</span>, <span class="st">'iris.csv'</span><span class="op">)</span></span></code></pre></div>
</div>
<div id="writing-character-data-line-by-line-to-a-file-through-writelines" class="section level3 unnumbered">
<h3>Writing character data line by line to a file through <code>writeLines()</code><a class="anchor" aria-label="anchor" href="#writing-character-data-line-by-line-to-a-file-through-writelines"><i class="fas fa-link"></i></a>
</h3>
<p>Similar to <code>readLines</code>, function <code><a href="https://rdrr.io/r/base/writeLines.html">writeLines()</a></code> will write the text data into a file with given file name. Type the following code in your console and check that a new file with name <code>my_new_file.txt</code> has been created with the given contents in your current working directory.</p>
<div class="sourceCode" id="cb709"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/writeLines.html">writeLines</a></span><span class="op">(</span><span class="st">"Andrew 25</span></span>
<span><span class="st">           Bob 45</span></span>
<span><span class="st">           Charles 56"</span>, <span class="st">"my_new_file.txt"</span><span class="op">)</span></span></code></pre></div>
</div>
<div id="using-dput-to-get-a-code-representation-of-r-object" class="section level3 unnumbered">
<h3>Using <code>dput()</code> to get a code representation of R object<a class="anchor" aria-label="anchor" href="#using-dput-to-get-a-code-representation-of-r-object"><i class="fas fa-link"></i></a>
</h3>
<p>This function will output the code representation of the given R object. This function is particularly useful, when you are searching for help online and you need to give some sample data to reproduce the problem. E.g. on <a href="https://stackoverflow.com/"><em>Stack Overflow</em></a> when asking for a solution to a specific problem, <a href="https://stackoverflow.com/questions/5963269/how-to-make-a-great-r-reproducible-example">reproducible data</a> needs to be furnished. Please also refer to section <a href="read.html#reprex">9.3.3</a> for more.</p>
<p>Example-1:</p>
<div class="sourceCode" id="cb710"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>Name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Andrew"</span>, <span class="st">"Bob"</span>, <span class="st">"Charles"</span><span class="op">)</span>,</span>
<span>                      Age <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">25</span>, <span class="fl">45</span>, <span class="fl">56</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dput.html">dput</a></span><span class="op">(</span><span class="va">my_data</span><span class="op">)</span></span></code></pre></div>
<pre><code>## structure(list(Name = c("Andrew", "Bob", "Charles"), Age = c(25, 
## 45, 56)), class = "data.frame", row.names = c(NA, -3L))</code></pre>
<p>And while reproducing someone else’s dput-</p>
<div class="sourceCode" id="cb712"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">now_mydata</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/structure.html">structure</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>Name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Andrew"</span>, <span class="st">"Bob"</span>, <span class="st">"Charles"</span><span class="op">)</span>, Age <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">25</span>, </span>
<span><span class="fl">45</span>, <span class="fl">56</span><span class="op">)</span><span class="op">)</span>, class <span class="op">=</span> <span class="st">"data.frame"</span>, row.names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="op">-</span><span class="fl">3L</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">now_mydata</span></span></code></pre></div>
<pre><code>##      Name Age
## 1  Andrew  25
## 2     Bob  45
## 3 Charles  56</code></pre>
</div>
</div>
<div id="using-external-packages-for-readingwriting-data" class="section level2" number="9.3">
<h2>
<span class="header-section-number">9.3</span> Using external packages for reading/writing data<a class="anchor" aria-label="anchor" href="#using-external-packages-for-readingwriting-data"><i class="fas fa-link"></i></a>
</h2>
<div id="package-readr" class="section level3" number="9.3.1">
<h3>
<span class="header-section-number">9.3.1</span> Package <code>readr</code><a class="anchor" aria-label="anchor" href="#package-readr"><i class="fas fa-link"></i></a>
</h3>
<p>The <code>readr</code> package<span class="citation"><a class="footnote-ref" tabindex="0" data-toggle="popover" data-content='&lt;p&gt;Hadley Wickham, Jim Hester, and Jennifer Bryan, &lt;em&gt;Readr: Read Rectangular Text Data&lt;/em&gt;, 2024, &lt;a href="https://readr.tidyverse.org"&gt;https://readr.tidyverse.org&lt;/a&gt;.&lt;/p&gt;'><sup>10</sup></a></span> is part of core <code>tidyverse</code> and is loaded directly when we load it through <code><a href="https://tidyverse.tidyverse.org">library(tidyverse)</a></code>. It provides a range of analogous functions for each of the reading functions in base R.</p>
<div class="inline-table"><table class="table table-sm">
<thead><tr class="header">
<th align="center">Base R</th>
<th align="center">readr</th>
<th align="left">Uses</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">read.table</td>
<td align="center">read_table</td>
<td align="left">Reading table</td>
</tr>
<tr class="even">
<td align="center">read.csv</td>
<td align="center">read_csv</td>
<td align="left">Reading CSV file with comma as sep</td>
</tr>
<tr class="odd">
<td align="center">read.csv2</td>
<td align="center">read_csv2</td>
<td align="left">Reading CSV file with semi-colon as sep</td>
</tr>
<tr class="even">
<td align="center">read.delim</td>
<td align="center">read_delim</td>
<td align="left">Reading files with any delimiter</td>
</tr>
<tr class="odd">
<td align="center">read.fwf</td>
<td align="center">read_fwf</td>
<td align="left">Reading fixed width files</td>
</tr>
<tr class="even">
<td align="center">read.tsv</td>
<td align="center">read_tsv</td>
<td align="left">Reading tab delimited file</td>
</tr>
<tr class="odd">
<td align="center">--</td>
<td align="center">write_delim</td>
<td align="left">Writing files with any delimiter</td>
</tr>
<tr class="even">
<td align="center">write.csv</td>
<td align="center">write_csv</td>
<td align="left">Writing files with comma delimiter</td>
</tr>
<tr class="odd">
<td align="center">write.csv2</td>
<td align="center">write_csv2</td>
<td align="left">Writing files with semi-colon delimiter</td>
</tr>
<tr class="even">
<td align="center">--</td>
<td align="center">write_tsv</td>
<td align="left">writing a tab delimited file</td>
</tr>
</tbody>
</table></div>
<p>So a question may be asked here that what’s the difference between these two sets of functions. Firstly, <code>readr</code> alternatives are much faster than their base R counterparts. Secondly, it provides an informative problem report when parsing leads to unexpected results.</p>
<p>For these, check results of these examples-</p>
<div class="sourceCode" id="cb714"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span><span class="fu"><a href="https://readr.tidyverse.org/reference/readr_example.html">readr_example</a></span><span class="op">(</span><span class="st">"chickens.csv"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>## Rows: 5 Columns: 4
## ── Column specification ────────────────────────────────────────────────────────
## Delimiter: ","
## chr (3): chicken, sex, motto
## dbl (1): eggs_laid
## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<pre><code>## # A tibble: 5 × 4
##   chicken                 sex     eggs_laid motto                               
##   &lt;chr&gt;                   &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;                               
## 1 Foghorn Leghorn         rooster         0 That's a joke, ah say, that's a jok…
## 2 Chicken Little          hen             3 The sky is falling!                 
## 3 Ginger                  hen            12 Listen. We'll either die free chick…
## 4 Camilla the Chicken     hen             7 Bawk, buck, ba-gawk.                
## 5 Ernie The Giant Chicken rooster         0 Put Captain Solo in the cargo hold.</code></pre>
<p>Note that the column types, while parsing the data frame, have now been printed. These column types have been guessed by <code>readr</code> actually. If the column types are not what were actually required to be parsed, then argument <code>col_types</code> may be used. We can also use <code><a href="https://readr.tidyverse.org/reference/spec.html">spec()</a></code> function to retrieve the data types guessed by <code>readr</code> later-on, so these can be modified and used again in <code>col_types</code> argument. See this example</p>
<div class="sourceCode" id="cb717"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/write.table.html">write.csv</a></span><span class="op">(</span><span class="va">iris</span>, <span class="st">"iris.csv"</span><span class="op">)</span> <span class="co">#write a dummy data</span></span>
<span><span class="fu"><a href="https://readr.tidyverse.org/reference/spec.html">spec</a></span><span class="op">(</span><span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span><span class="st">"iris.csv"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>## New names:
## Rows: 150 Columns: 6
## ── Column specification
## ──────────────────────────────────────────────────────── Delimiter: "," chr
## (1): Species dbl (5): ...1, Sepal.Length, Sepal.Width, Petal.Length,
## Petal.Width
## ℹ Use `spec()` to retrieve the full column specification for this data. ℹ
## Specify the column types or set `show_col_types = FALSE` to quiet this message.
## • `` -&gt; `...1`</code></pre>
<pre><code>## cols(
##   ...1 = col_double(),
##   Sepal.Length = col_double(),
##   Sepal.Width = col_double(),
##   Petal.Length = col_double(),
##   Petal.Width = col_double(),
##   Species = col_character()
## )</code></pre>
<div class="sourceCode" id="cb720"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span><span class="st">"iris.csv"</span>,</span>
<span>         col_select <span class="op">=</span> <span class="fl">2</span><span class="op">:</span><span class="fl">6</span>,</span>
<span>         col_types <span class="op">=</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/cols.html">cols</a></span><span class="op">(</span></span>
<span>           Sepal.Length <span class="op">=</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/parse_atomic.html">col_double</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>           Sepal.Width <span class="op">=</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/parse_atomic.html">col_double</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>           Petal.Length <span class="op">=</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/parse_atomic.html">col_double</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>           Petal.Width <span class="op">=</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/parse_atomic.html">col_double</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>           Species <span class="op">=</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/parse_factor.html">col_factor</a></span><span class="op">(</span>levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'setosa'</span>, <span class="st">'versicolor'</span>, <span class="st">'virginica'</span><span class="op">)</span><span class="op">)</span></span>
<span>         <span class="op">)</span></span>
<span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<pre><code>## New names:
## • `` -&gt; `...1`</code></pre>
<pre><code>## # A tibble: 2 × 5
##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species
##          &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt; &lt;fct&gt;  
## 1          5.1         3.5          1.4         0.2 setosa 
## 2          4.9         3            1.4         0.2 setosa</code></pre>
</div>
<div id="package-readxl" class="section level3" number="9.3.2">
<h3>
<span class="header-section-number">9.3.2</span> Package <code>readxl</code><a class="anchor" aria-label="anchor" href="#package-readxl"><i class="fas fa-link"></i></a>
</h3>
<p>This package is also part of <code>tidyverse</code> but this one has to be loaded specifically using <code><a href="https://readxl.tidyverse.org">library(readxl)</a></code>. As the name suggests, it has functions which are useful to read/write data to/from excel files. Excel files (having extension .xls or .xlsx) are slightly different in a way that these may contain several <em>sheets</em> of data at once. The functions <code>read_excel()</code>, <code>read_xlsx</code>, and <code>read_xls</code> have been designed for reading sheets from excel files. The syntax is</p>
<pre><code>read_excel(path, sheet = NULL, range = NULL)
read_xlsx(path, sheet = NULL, range = NULL)
read_xls(path, sheet = NULL, range = NULL)</code></pre>
<p>To get the names of sheets in an excel file we can use <code>excel_sheets()</code> function from the library.</p>
<pre><code>excel_sheets(path)</code></pre>
</div>
<div id="reprex" class="section level3" number="9.3.3">
<h3>
<span class="header-section-number">9.3.3</span> Package <code>reprex</code><a class="anchor" aria-label="anchor" href="#reprex"><i class="fas fa-link"></i></a>
</h3>
<p>This is again part of tidyverse, but has to be loaded specifically by calling <code><a href="https://reprex.tidyverse.org">library(reprex)</a></code>. The name <code>reprex</code> is actually short for reproducible example. This is useful particularly when we are stuck in some problem and seek for online help on some forum such as <a href="https://stackoverflow.com/questions/5963269/how-to-make-a-great-r-reproducible-example">Stack Overflow</a>, <a href="https://community.rstudio.com">R Studio Community</a>, etc.</p>
<p>As an example do this in your console</p>
<pre><code><a href="https://reprex.tidyverse.org">library(reprex)

x &lt;- dput(head(iris))
x</a></code></pre>
<p>Thereafter run <code>reprex()</code>, a small window in the <code>Viewer</code> tab will be opened like this. Moreover, the code has been copied on the clipboard.</p>
<div class="inline-figure"><img src="images/reprex.png"></div>
<p>For more reading please refer <a href="https://www.tidyverse.org/help/">this page.</a><a class="footnote-ref" tabindex="0" data-toggle="popover" data-content='&lt;p&gt;&lt;a href="https://www.tidyverse.org/help/" class="uri"&gt;https://www.tidyverse.org/help/&lt;/a&gt;&lt;/p&gt;'><sup>11</sup></a></p>
</div>
</div>
</div>

  <div class="chapter-nav">
<div class="prev"><a href="file.html"><span class="header-section-number">8</span> File handling operations in R</a></div>
<div class="next"><a href="data-cleaning-in-r.html"><span class="header-section-number">10</span> Data Cleaning in R</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#read"><span class="header-section-number">9</span> Getting data in and out of R</a></li>
<li>
<a class="nav-link" href="#importing-external-data-in-r---base-r-methods"><span class="header-section-number">9.1</span> Importing external data in R - Base R methods</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#reading-tables-through-read.table-andor-read.csv">Reading tables through read.table() and/or read.csv()</a></li>
<li><a class="nav-link" href="#read-data-into-a-vector-through-scan-or-readline">Read data into a vector through scan() or readline()</a></li>
<li><a class="nav-link" href="#reading-text-files-through-readlines">Reading text files through readLines()</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#exporting-data-out-of-r---base-r-methods"><span class="header-section-number">9.2</span> Exporting data out of R - Base R methods</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#writing-tabular-data-through-write.table-andor-write.csv">Writing tabular data through write.table() and/or write.csv()</a></li>
<li><a class="nav-link" href="#writing-character-data-line-by-line-to-a-file-through-writelines">Writing character data line by line to a file through writeLines()</a></li>
<li><a class="nav-link" href="#using-dput-to-get-a-code-representation-of-r-object">Using dput() to get a code representation of R object</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#using-external-packages-for-readingwriting-data"><span class="header-section-number">9.3</span> Using external packages for reading/writing data</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#package-readr"><span class="header-section-number">9.3.1</span> Package readr</a></li>
<li><a class="nav-link" href="#package-readxl"><span class="header-section-number">9.3.2</span> Package readxl</a></li>
<li><a class="nav-link" href="#reprex"><span class="header-section-number">9.3.3</span> Package reprex</a></li>
</ul>
</li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
          
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>R for Audit Analytics</strong>" was written by Anil Goyal. It was last built on 2024-08-12.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
